[
  {
    "text": "[Music]",
    "start": "0",
    "end": "15829"
  },
  {
    "text": "[Music] uh so my name is Alexander garenta I",
    "start": "17940",
    "end": "23080"
  },
  {
    "text": "work for a company called marakana happen to be one of the organizers of this group and uh tonight's talk is on",
    "start": "23080",
    "end": "28920"
  },
  {
    "text": "Android c2dm okay so we have a whole you",
    "start": "28920",
    "end": "33960"
  },
  {
    "text": "know slew of things to talk about one of which is the you know we're going to discuss kind of more or go through the",
    "start": "33960",
    "end": "40760"
  },
  {
    "text": "through the slide deck but I wanted to actually start with a demo first just to show you that this does in fact work",
    "start": "40760",
    "end": "46160"
  },
  {
    "text": "kind of just show you the you know the experience of of of c2dm what does it actually offer um and the application",
    "start": "46160",
    "end": "52480"
  },
  {
    "text": "that I have is um is a kind of a Twitter like client uh that is communicating to",
    "start": "52480",
    "end": "59440"
  },
  {
    "text": "a to a server that I happen to also host which is based on status.net which is an",
    "start": "59440",
    "end": "65640"
  },
  {
    "text": "open source think of it as an open source implementation of Twitter okay so",
    "start": "65640",
    "end": "70759"
  },
  {
    "text": "anyone could any one of you can go to status.net download it install it on your server it's basically a PHP app you",
    "start": "70759",
    "end": "78000"
  },
  {
    "text": "know set it up with the mySQL database you know put it up on Apache and you effectively have a Twitter server ready",
    "start": "78000",
    "end": "85040"
  },
  {
    "text": "to go which follows exactly the same apis um you know effectively restful",
    "start": "85040",
    "end": "90680"
  },
  {
    "text": "apis that Twitter does okay so the problem with an app like that as you would imagine is you know you want to",
    "start": "90680",
    "end": "97200"
  },
  {
    "text": "you want this app to keep on notifying you of your friends updates right you want to be able to stay in touch with what your friends are saying right and",
    "start": "97200",
    "end": "104240"
  },
  {
    "text": "so one way to implement it will be to pull for this information right so you go to the server and you fetch that",
    "start": "104240",
    "end": "110200"
  },
  {
    "text": "information from the server every whatever every however often but as you will you know could imagine that wastes",
    "start": "110200",
    "end": "116399"
  },
  {
    "text": "battery that wastes bandwidth um and it doesn't necessarily always Prov provide you with the most up-to-date information",
    "start": "116399",
    "end": "121759"
  },
  {
    "text": "so ideally we would like the server to push that information to us so what I",
    "start": "121759",
    "end": "127159"
  },
  {
    "text": "did for this demo is I actually wrote a plugin for C2 for status.net application",
    "start": "127159",
    "end": "133400"
  },
  {
    "text": "so it's a PHP plugin I hate PHP but that was you know the only choice and so um I",
    "start": "133400",
    "end": "139160"
  },
  {
    "text": "wrote a plugin that basically helps with the server push part okay so you will see that there are going to be three",
    "start": "139160",
    "end": "145360"
  },
  {
    "text": "three components involved with respect to push one is the r a our server and",
    "start": "145360",
    "end": "152160"
  },
  {
    "text": "then the Google messaging infrastructure that basically you know connects the two",
    "start": "152160",
    "end": "157640"
  },
  {
    "text": "okay we'll go over what really push is and what is you know what are the benefits but I just wanted to kind of do the demo first so uh my app is actually",
    "start": "157640",
    "end": "165920"
  },
  {
    "text": "running in an emulator right here this emulator is based on the Google apis so",
    "start": "165920",
    "end": "172239"
  },
  {
    "text": "if you're building and you know obviously you want to test this as you will see in a moment uh you need to test it against an emulator that supports the",
    "start": "172239",
    "end": "179159"
  },
  {
    "text": "Google AP so when you go and open up your uh your Android SDK manager one of",
    "start": "179159",
    "end": "185480"
  },
  {
    "text": "the things one of the options that you have is to download a platform um and you all know that you all need at least",
    "start": "185480",
    "end": "191239"
  },
  {
    "text": "one platform for you to develop in well you have to choose the Google platform",
    "start": "191239",
    "end": "196360"
  },
  {
    "text": "version 2.2 or better okay so there we are perfect so uh here is my well here",
    "start": "196360",
    "end": "205440"
  },
  {
    "text": "not yet so hopefully this will load soon enough there you go and so this is my little application um it's we call it",
    "start": "205440",
    "end": "212840"
  },
  {
    "text": "yamba which stands for yet another micro micro blogging application and it's really not meant to be used you know by",
    "start": "212840",
    "end": "220560"
  },
  {
    "text": "for real real life I guess you could use it for that it's really just for demo purposes and there's certainly things",
    "start": "220560",
    "end": "226360"
  },
  {
    "text": "that could be made better uh but anyways this is the this is the timeline outline you can imagine you know if you were in",
    "start": "226360",
    "end": "232920"
  },
  {
    "text": "a twitter- like application this is what your friends are saying okay and it's just bunch of stuff okay now that bunch",
    "start": "232920",
    "end": "239519"
  },
  {
    "text": "of stuff is posted on uh This Server yamba Morana which again why happen to",
    "start": "239519",
    "end": "246480"
  },
  {
    "text": "host and one of the things I can do there is I can say you know hello and I click on send and you know I whoops bad",
    "start": "246480",
    "end": "255480"
  },
  {
    "text": "request that kind of s sucks so much for my live demo so let's",
    "start": "255480",
    "end": "260639"
  },
  {
    "text": "try this again um hopefully not all of you are on",
    "start": "260639",
    "end": "266040"
  },
  {
    "text": "the network because then you know this won't work",
    "start": "266040",
    "end": "271720"
  },
  {
    "text": "so there you go okay so it says hello and it actually knows I'm eff Fishman worth smart so and this is all by the",
    "start": "272400",
    "end": "280160"
  },
  {
    "text": "way status.net none of it except for the little customization branding and this little plugin is custom everything you",
    "start": "280160",
    "end": "287759"
  },
  {
    "text": "can literally go and download it's open source so you notice that this timeline doesn't update okay now if I go um over",
    "start": "287759",
    "end": "297199"
  },
  {
    "text": "here to this uh section called preferences whatever of my application and I click on this auto update timeline",
    "start": "297199",
    "end": "303600"
  },
  {
    "text": "and actually let's click on that um I'm going to go out of the out of my",
    "start": "303600",
    "end": "308720"
  },
  {
    "text": "application um and I just wanted to show you that by I mean this is you know the",
    "start": "308720",
    "end": "314520"
  },
  {
    "text": "the back end loat so hopefully most of you know what Lockette is it's you know showing you effectively what's going on",
    "start": "314520",
    "end": "320280"
  },
  {
    "text": "in the background one of the things you'll notice it says right here completing c2dm registration and then",
    "start": "320280",
    "end": "325960"
  },
  {
    "text": "gives me my registration ID I'll explain what this is a little later but this is just to kind of give you an idea that",
    "start": "325960",
    "end": "332400"
  },
  {
    "text": "something happened when I clicked on that little check box and which said you know allow auto updates okay now I'm",
    "start": "332400",
    "end": "339720"
  },
  {
    "text": "going to go back here I just wanted to show you that if I go to my menu uh specifically",
    "start": "339720",
    "end": "346080"
  },
  {
    "text": "settings and applications okay and running",
    "start": "346080",
    "end": "351759"
  },
  {
    "text": "Services there are no running services that are specific to my application okay",
    "start": "351759",
    "end": "357520"
  },
  {
    "text": "so there isn't some kind of a background service that's looping right now and scanning for you know or or pulling data",
    "start": "357520",
    "end": "365400"
  },
  {
    "text": "now of course you know you could implement this by an an alarm you can schedule to be notified VI an alarm so you don't really need a background",
    "start": "365400",
    "end": "371479"
  },
  {
    "text": "service but hopefully you trust me that there isn't one right now okay and you can download this source code is",
    "start": "371479",
    "end": "376680"
  },
  {
    "text": "available it's open source you could actually examine it yourself so now I'm going to go out of this application Al",
    "start": "376680",
    "end": "382240"
  },
  {
    "text": "together and I'm going to go back in here which is my little yamba maranao.com and say hello 3 okay and",
    "start": "382240",
    "end": "389319"
  },
  {
    "text": "click consent and what I expect is that this application will hopefully within",
    "start": "389319",
    "end": "396280"
  },
  {
    "text": "you know couple of minutes there you go um it'll actually get a little",
    "start": "396280",
    "end": "402560"
  },
  {
    "text": "notification right here I mean I I've just repurposed the Google Talk icon but if you pull it down it says I've got",
    "start": "402560",
    "end": "409599"
  },
  {
    "text": "three new timeline updates okay so it's more than enough to know how many since the last time I fetched it and I click",
    "start": "409599",
    "end": "415039"
  },
  {
    "text": "on it and sure enough it should open it up and hopefully you see it's says here",
    "start": "415039",
    "end": "420240"
  },
  {
    "text": "hello 2 hell 3 so it in fact did pull those updates okay so that's what the",
    "start": "420240",
    "end": "426120"
  },
  {
    "text": "push part is Right somewhere in the cloud something happens that you're interested in and that something makes",
    "start": "426120",
    "end": "433039"
  },
  {
    "text": "it onto your device with without your device having to ask for it okay that's",
    "start": "433039",
    "end": "438599"
  },
  {
    "text": "basically what we want um so the question is how do we get there so I'll show you the source Cod later I just",
    "start": "438599",
    "end": "444479"
  },
  {
    "text": "wanted to kind of go through the basics first so we're going to go through this slide deck that is available you know",
    "start": "444479",
    "end": "450879"
  },
  {
    "text": "actually if you follow this URL you'll be able to open up the slide deck or if you wanted to I don't know if this is",
    "start": "450879",
    "end": "456479"
  },
  {
    "text": "big enough for you to scan uh but you can certainly do that as well or try to scan the the the you know the code so",
    "start": "456479",
    "end": "463879"
  },
  {
    "text": "anyway um just um you guys all know about myself so I don't have to introduce myself I've been doing you",
    "start": "463879",
    "end": "470280"
  },
  {
    "text": "know Android for not as long as I've been doing Java um and in the past life I have worked on things like SMS and WAP",
    "start": "470280",
    "end": "477159"
  },
  {
    "text": "push and MMS so I'm kind of I have some idea of what you know push is about um",
    "start": "477159",
    "end": "483039"
  },
  {
    "text": "so as far as this talk what we want to cover is pull versus push uh c2dm itself",
    "start": "483039",
    "end": "488319"
  },
  {
    "text": "so what it is you know what are the requirements and limitations the big picture you know how does it actually work the implementation of c2dm so the",
    "start": "488319",
    "end": "495680"
  },
  {
    "text": "steps to implement the big picture effectively all the things you're going to have to go through and yes there are going to be quite a few steps but most",
    "start": "495680",
    "end": "502280"
  },
  {
    "text": "of them are going to be boilerplate code that you can literally copy paste from some other project like the one that I'm",
    "start": "502280",
    "end": "507680"
  },
  {
    "text": "going to provide you with in case you're want to download it uh so it's there's doesn't there's not a lot of complexity",
    "start": "507680",
    "end": "513800"
  },
  {
    "text": "to it even though the framework as a whole is complex um and some some additional features like collapsis the",
    "start": "513800",
    "end": "520680"
  },
  {
    "text": "AutoNation and things like that and we're going to talk about some of the limitations okay so assumptions as far",
    "start": "520680",
    "end": "527000"
  },
  {
    "text": "as what I assume you guys know and if you don't it's okay because you know feel free to ask questions if you don't",
    "start": "527000",
    "end": "532080"
  },
  {
    "text": "know what some of these things are but I assume you know Android you know Java um that you have an idea what broadcast",
    "start": "532080",
    "end": "538120"
  },
  {
    "text": "receivers are what what an anrs are the application not responsive uh what in",
    "start": "538120",
    "end": "543560"
  },
  {
    "text": "service what services are if you ever used intent Services even better um",
    "start": "543560",
    "end": "548680"
  },
  {
    "text": "permissions um I guess the security folks in the back will know everything about permissions W clocks if you",
    "start": "548680",
    "end": "554959"
  },
  {
    "text": "haven't used them that's okay I'll explain what wake clocks are um and you have an idea what HTTP post and HTTP get",
    "start": "554959",
    "end": "561680"
  },
  {
    "text": "are okay I mean you don't have to obviously understand the whole everything but as long as long as you have a general idea what you know the",
    "start": "561680",
    "end": "568240"
  },
  {
    "text": "basis of HTTP that enough and then for some of the backend stuff um there you know it's implemented in PHP not my",
    "start": "568240",
    "end": "574680"
  },
  {
    "text": "first choice but just because status.net was implemented PHP I'll explain the PHP",
    "start": "574680",
    "end": "580120"
  },
  {
    "text": "code you don't have to get it if you don't know PHP uh I mean you don't have to get PHP but you'll get what the code",
    "start": "580120",
    "end": "585640"
  },
  {
    "text": "does so u a lot of what I do or what I cover is actually already been covered",
    "start": "585640",
    "end": "592720"
  },
  {
    "text": "um and a lot of the concepts are actually already been documented either in the video from Google iio 2010 or on",
    "start": "592720",
    "end": "599560"
  },
  {
    "text": "the web pages that I list here so it's not this is not necessarily novel information the opportunity however is",
    "start": "599560",
    "end": "605360"
  },
  {
    "text": "for us to go in deeper into how this all works okay so feel free to kind of look",
    "start": "605360",
    "end": "610720"
  },
  {
    "text": "at the original slides from Google as well as the uh the Google c2dm project",
    "start": "610720",
    "end": "616120"
  },
  {
    "text": "so that said you know why are we here so pull versus push so assumption is that",
    "start": "616120",
    "end": "623519"
  },
  {
    "text": "you guys care about keeping the the data on the device fresh whatever they may",
    "start": "623519",
    "end": "629640"
  },
  {
    "text": "mean I mean if you're building a game you may not you know you don't need to be here maybe you know for a game pushes",
    "start": "629640",
    "end": "635480"
  },
  {
    "text": "or even pull or even network connectivity is not even important okay um but if you have an application like",
    "start": "635480",
    "end": "642000"
  },
  {
    "text": "Twitter or like a stock quote application or like email application address book notes to-dos anything that",
    "start": "642000",
    "end": "648839"
  },
  {
    "text": "could benefit from being synchronized with the cloud you you know you would want to hopefully care about this so we want to",
    "start": "648839",
    "end": "655760"
  },
  {
    "text": "keep our data Fresh So polling is one way we can do it right and that's certainly easy right you build some kind",
    "start": "655760",
    "end": "661680"
  },
  {
    "text": "of a one way to do it would be to build some kind of a service to to you know leave it in the background and have that",
    "start": "661680",
    "end": "668279"
  },
  {
    "text": "service have a thread that just spins and goes and pull tries to download something from the from the net and then",
    "start": "668279",
    "end": "675360"
  },
  {
    "text": "goes and sleeps for a while and then goes again and so on and so on um another slightly more or more advanced",
    "start": "675360",
    "end": "682279"
  },
  {
    "text": "way would be to actually build a or set up an alarm manager to wake you up X",
    "start": "682279",
    "end": "688079"
  },
  {
    "text": "every x amount of minutes hopefully if you're using the inexact timing uh you can actually save the battery a little",
    "start": "688079",
    "end": "694200"
  },
  {
    "text": "bit but basically you get woken up x amount of you know at some frequency and then you launch an intent service so",
    "start": "694200",
    "end": "700760"
  },
  {
    "text": "something that runs in a separate thread that goes and does the the work of pulling stuff from the internet and then you save it somewhere hopefully for",
    "start": "700760",
    "end": "707120"
  },
  {
    "text": "caching purposes and then you're done so that those are the two typical polling approaches okay now um if you are using",
    "start": "707120",
    "end": "716320"
  },
  {
    "text": "polling okay so if you do choose to use polling and it's okay okay you know it's appropriate where content changes really",
    "start": "716320",
    "end": "722160"
  },
  {
    "text": "frequently and you are okay with having somewhat of stale data right if your",
    "start": "722160",
    "end": "727360"
  },
  {
    "text": "user doesn't have to have the most upto-date information hey polling it's cheap enough to implement works pretty",
    "start": "727360",
    "end": "733279"
  },
  {
    "text": "much on any Android phone hey why don't we go with that but like I said as you will see it's not optimal so but if you",
    "start": "733279",
    "end": "740040"
  },
  {
    "text": "do choose to do it at least consider having the server side implement the logic of hey do I have new data or not",
    "start": "740040",
    "end": "748800"
  },
  {
    "text": "right so the the client side should try to keep the the the the polls or the the",
    "start": "748800",
    "end": "754519"
  },
  {
    "text": "amount of time it actually spends in a poll as short as possible right so for example you can say server send me",
    "start": "754519",
    "end": "760959"
  },
  {
    "text": "content if it's been modified since assuming you're doing an HTP request and",
    "start": "760959",
    "end": "766160"
  },
  {
    "text": "then the server decides whether the content has been changed or not and then decides whether or not to send you a",
    "start": "766160",
    "end": "771199"
  },
  {
    "text": "three or four which means no no changes or at 200 for example which gives you the latest data along with you know with",
    "start": "771199",
    "end": "777920"
  },
  {
    "text": "along with that response so again if you choose to do it at least consider you know having the the client",
    "start": "777920",
    "end": "784800"
  },
  {
    "text": "part do as as little work as possible now that said when our phones are idle",
    "start": "784800",
    "end": "790079"
  },
  {
    "text": "we you know they typically consume something like 5 to 8 milliamps okay um",
    "start": "790079",
    "end": "796120"
  },
  {
    "text": "however when we're in a poll and again this data comes from Google I did not do research on this the network draws or",
    "start": "796120",
    "end": "802040"
  },
  {
    "text": "the radio draws somewhere between you know 80 to 200 milliamps depending on",
    "start": "802040",
    "end": "807680"
  },
  {
    "text": "the what kind of network you're on and depending on whether you're sending or receiving sending is way more expensive it's twice as expensive as receiving",
    "start": "807680",
    "end": "814320"
  },
  {
    "text": "data okay um so for example for a short poll you're you know you may end up",
    "start": "814320",
    "end": "819560"
  },
  {
    "text": "using 0.5 milliamp hours right and if you do every you know your polls every",
    "start": "819560",
    "end": "826199"
  },
  {
    "text": "let's say five minutes which is not unreasonable if you want to keep data really really fresh the problem is that",
    "start": "826199",
    "end": "832160"
  },
  {
    "text": "you know especially because the radio stays on a little longer than you would actually like it to um you know this",
    "start": "832160",
    "end": "837519"
  },
  {
    "text": "adds up so for examp example if you're doing it in one application you may eat a typical battery like 10% of a typical",
    "start": "837519",
    "end": "844560"
  },
  {
    "text": "battery on a on a device just from one application doing this pooling and you can imagine you know users have a lot of",
    "start": "844560",
    "end": "850680"
  },
  {
    "text": "applications so you know if each one was to do this it would basically consume potentially quite quite a lot of uh",
    "start": "850680",
    "end": "857320"
  },
  {
    "text": "battery and ultimately that's what we care about here if it wasn't for battery and to some extent bandwidth you know we",
    "start": "857320",
    "end": "862399"
  },
  {
    "text": "wouldn't really care we could pull as as frequently as we wanted of course it affects the server side but not as not",
    "start": "862399",
    "end": "867880"
  },
  {
    "text": "as big you know effect as it is on the battery so of course increasing the frequency uh or decreasing the frequency",
    "start": "867880",
    "end": "874639"
  },
  {
    "text": "so increasing the delay between the poles makes things better but then our data becomes stale okay",
    "start": "874639",
    "end": "881120"
  },
  {
    "text": "so of course preferably since we know pulling you know affects our battery and",
    "start": "881120",
    "end": "887199"
  },
  {
    "text": "affects the network bandwidth that we waste needlessly we would prefer to push okay so we would like the cloud to tell",
    "start": "887199",
    "end": "894240"
  },
  {
    "text": "us when there's data available for us so how do we do this right there are",
    "start": "894240",
    "end": "899720"
  },
  {
    "text": "different approaches of course c2dm is just one of the approaches one one simple way is to use SMS like you can",
    "start": "899720",
    "end": "906000"
  },
  {
    "text": "literally push via SMS use your server can basically send an SMS message",
    "start": "906000",
    "end": "911440"
  },
  {
    "text": "through like one of the providers like click AEL and your your your phone can receive the SMS message your application",
    "start": "911440",
    "end": "917880"
  },
  {
    "text": "that SMS message and for example do something in response and it can even eat the SMS message so that the actual",
    "start": "917880",
    "end": "924880"
  },
  {
    "text": "SMS client doesn't see even see it right you could do something like that it's",
    "start": "924880",
    "end": "930680"
  },
  {
    "text": "not optimal but that's one approach another approach is to do W push which I've done in the past but never in an",
    "start": "930680",
    "end": "935959"
  },
  {
    "text": "Android environment and I've never actually seen examples of people doing W push on Android so I don't even know how you'd go about doing it I don't know how",
    "start": "935959",
    "end": "942480"
  },
  {
    "text": "well it's supported I mean I know how it would go about doing it but H it's a little ugly as it is um or a third",
    "start": "942480",
    "end": "950399"
  },
  {
    "text": "approach would be to have a persistent connection with some kind of a server in the back end and then whenever the",
    "start": "950399",
    "end": "957120"
  },
  {
    "text": "server has something to tell us it just and basically does a simple push via this persistent connection okay now this",
    "start": "957120",
    "end": "964880"
  },
  {
    "text": "is doable and I'm assuming that's what you guys do um and the the problem is as",
    "start": "964880",
    "end": "970120"
  },
  {
    "text": "you will see this is not trivial and does require background services and to some extent we are still pulling over",
    "start": "970120",
    "end": "976959"
  },
  {
    "text": "that persistent connections because we we need to keep the persistent connection persistent I.E we don't want it to die okay so we'll talk about that",
    "start": "976959",
    "end": "984720"
  },
  {
    "text": "or a fourth approach would be to do c2dm so c2dm is you will see it's stands for",
    "start": "984720",
    "end": "990240"
  },
  {
    "text": "cloud to device messaging framework that Google basically runs and supports opens",
    "start": "990240",
    "end": "995600"
  },
  {
    "text": "it up open it up well I would say for free but it's not really officially available to everyone at least not the",
    "start": "995600",
    "end": "1001880"
  },
  {
    "text": "way would like it to be uh so it's not really free because it's still essentially beta but ideally we would",
    "start": "1001880",
    "end": "1008360"
  },
  {
    "text": "basically use the Google service to provide the whole messaging infrastructure so we just have to focus",
    "start": "1008360",
    "end": "1014000"
  },
  {
    "text": "on the you know client side and the server side and leave the plumbing up to Google and it's easy and it's going to",
    "start": "1014000",
    "end": "1020319"
  },
  {
    "text": "be free although that definition of free is yet to be defined so the question is why is SMS expensive well it is",
    "start": "1020319",
    "end": "1026438"
  },
  {
    "text": "ultimately the charge of the SMS and the other the other reason as you will see actually in a moment is that our",
    "start": "1026439",
    "end": "1032079"
  },
  {
    "text": "application will require permission to read SMS and most users will not necessarily like that because they may",
    "start": "1032079",
    "end": "1037438"
  },
  {
    "text": "not trust us I mean that's that's that's a simple you know the simple",
    "start": "1037439",
    "end": "1043240"
  },
  {
    "text": "answer um so push push Via SMS okay so basically what you can do is you can have some C application",
    "start": "1043240",
    "end": "1049440"
  },
  {
    "text": "that has a you know broadcast receiver let's say we call it an SMS notification receiver that is subscribed to receive",
    "start": "1049440",
    "end": "1057080"
  },
  {
    "text": "an intent called you know SMS received for that we need to you know have this permission called receive SMS which",
    "start": "1057080",
    "end": "1064280"
  },
  {
    "text": "again that's what I was saying your users may not like to install the application if it even has this permission now there's one little extra",
    "start": "1064280",
    "end": "1071160"
  },
  {
    "text": "feature here that I said Android priority 100 I mean you can pick any priority as you will see SMS messages",
    "start": "1071160",
    "end": "1078320"
  },
  {
    "text": "are or intents are delivered as ordered broadcasts that means that we can eat them meaning that if we like a",
    "start": "1078320",
    "end": "1084080"
  },
  {
    "text": "particular SMS we don't have to allow the default SMS client to even receive it because ultimately it's not going to",
    "start": "1084080",
    "end": "1090320"
  },
  {
    "text": "care about our push notifications so we accomplish this by having a priority higher than that client so this is what",
    "start": "1090320",
    "end": "1098240"
  },
  {
    "text": "I this could look like you basically have that SMS receiver which on receive",
    "start": "1098240",
    "end": "1103679"
  },
  {
    "text": "receive some kind of an intent that contains something called pdus out of which you can parse an SMS message now",
    "start": "1103679",
    "end": "1110919"
  },
  {
    "text": "in that from that SMS message you can ask hey is this SMS message or does this SMS message mean it's a notification for",
    "start": "1110919",
    "end": "1118039"
  },
  {
    "text": "us for example you can say does this SMS message contain some special keyword",
    "start": "1118039",
    "end": "1123559"
  },
  {
    "text": "that only I will know about right and if it does I'll interpret it to be a notification and then I'll react to that",
    "start": "1123559",
    "end": "1130080"
  },
  {
    "text": "notification and because I don't want anyone else to receive the SMS message I will say a board broadcast and that's it",
    "start": "1130080",
    "end": "1136240"
  },
  {
    "text": "I ate it nobody else can see it and that's my simp push mechanism okay on the server side you need to now know how",
    "start": "1136240",
    "end": "1142400"
  },
  {
    "text": "to construct SMS messages you need to sign up with something like I said click tell is just someone use in the past but",
    "start": "1142400",
    "end": "1148440"
  },
  {
    "text": "it's not that complicated that's one approach W push is slightly more",
    "start": "1148440",
    "end": "1154080"
  },
  {
    "text": "complicated it involves you know quite a few other pieces But ultimately it's still SMS but in the SMS message itself",
    "start": "1154080",
    "end": "1161679"
  },
  {
    "text": "you effectively embed a URL and when the when the you know client receives it it's supposed to go and fetch the data",
    "start": "1161679",
    "end": "1168280"
  },
  {
    "text": "that URL so it's a little more more structured approach to effectively doing the same thing okay I've never done it",
    "start": "1168280",
    "end": "1174200"
  },
  {
    "text": "on Android I don't even know how you know again exactly how to go about doing it but assuming it's possible you know",
    "start": "1174200",
    "end": "1179559"
  },
  {
    "text": "that's something you could examine rolling out your own persistent connection that's the third approach",
    "start": "1179559",
    "end": "1184760"
  },
  {
    "text": "right so in that approach what you can do is you can basically establish a background Service",
    "start": "1184760",
    "end": "1190960"
  },
  {
    "text": "as you know in Android we you know it supports background Services they can be kept persistent hopefully you know they",
    "start": "1190960",
    "end": "1196720"
  },
  {
    "text": "won't be they won't be killed there's actually a little persistent equals true flag that you can add in the Manifest of your",
    "start": "1196720",
    "end": "1202640"
  },
  {
    "text": "application to make it not be killed as readily as other applications could be okay so what this would do is would it",
    "start": "1202640",
    "end": "1210240"
  },
  {
    "text": "would open up a TCP connection to your backend server and it would keep it open",
    "start": "1210240",
    "end": "1216520"
  },
  {
    "text": "and so whenever the server would want to give you some information it would simply pump it over that connection and",
    "start": "1216520",
    "end": "1222919"
  },
  {
    "text": "then you're you know you would receive it in that background service and from that you know message that you get back",
    "start": "1222919",
    "end": "1228280"
  },
  {
    "text": "you would now interpreted to for example be a notification for a particular app and that's I'm assuming how for example",
    "start": "1228280",
    "end": "1234080"
  },
  {
    "text": "you guys okay fair enough but this is one approach you any one of us could use",
    "start": "1234080",
    "end": "1239400"
  },
  {
    "text": "so ultimately we don't need to really go and depend on c2dm because that's really",
    "start": "1239400",
    "end": "1244640"
  },
  {
    "text": "what c2dm does okay I'll be interesting to hear how you guys do it okay fair",
    "start": "1244640",
    "end": "1249679"
  },
  {
    "text": "enough um now the reason why you need to have this connection open is because your client needs to open a connection",
    "start": "1249679",
    "end": "1256159"
  },
  {
    "text": "to the server it can't be the server can server cannot open a connection to the client right I mean the client can be",
    "start": "1256159",
    "end": "1261440"
  },
  {
    "text": "anywhere it can be on any network it may not have a you know public IP address",
    "start": "1261440",
    "end": "1266480"
  },
  {
    "text": "that the server can connect to you know or nor would firewalls allow connections usually in that direction anyways right",
    "start": "1266480",
    "end": "1273320"
  },
  {
    "text": "so we need to keep the connection open the problem is firewalls like to kill idle connections right and our client",
    "start": "1273320",
    "end": "1279320"
  },
  {
    "text": "switches networks goes from 3G to 4G to 2G to Wi-Fi right and that changes IP",
    "start": "1279320",
    "end": "1284840"
  },
  {
    "text": "that kills the connection so we now need to periodically check on the health of connection to keep it open right and",
    "start": "1284840",
    "end": "1290960"
  },
  {
    "text": "that's that's painful right not not it's painful but it's that that's effectively we're pulling that's the health of the",
    "start": "1290960",
    "end": "1297120"
  },
  {
    "text": "connection which means we're pulling right and we basically have to do the work and imagine if there were five",
    "start": "1297120",
    "end": "1304679"
  },
  {
    "text": "applications or 10 applications they all need this persistence connections because they all have their own custom",
    "start": "1304679",
    "end": "1311400"
  },
  {
    "text": "push notifications there's no way for us to unless we publicize this and you know export it as a service there's no easy",
    "start": "1311400",
    "end": "1318080"
  },
  {
    "text": "way for us to leverage these persistent connections across applications right so if every one of them is waking up the",
    "start": "1318080",
    "end": "1324559"
  },
  {
    "text": "device to check out the health of the connection right you again we're back to the problem of drawing you know killing",
    "start": "1324559",
    "end": "1330400"
  },
  {
    "text": "the user's battery so we while this is fine right for one application it's not",
    "start": "1330400",
    "end": "1336240"
  },
  {
    "text": "fine when you have a lot of applications doing the same thing and it's very hard to implement because persistent",
    "start": "1336240",
    "end": "1342880"
  },
  {
    "text": "connections are actually expensive to keep on the server side you know servers may have thousands of cores and",
    "start": "1342880",
    "end": "1348520"
  },
  {
    "text": "thousands of you know you a lot of memory but they have a limited number of connections they can hold open okay",
    "start": "1348520",
    "end": "1356000"
  },
  {
    "text": "there just has to do with how many ports are available I mean it's a it's a pain just the way you know the the the TCP IP",
    "start": "1356000",
    "end": "1362080"
  },
  {
    "text": "was designed so again we don't like to do that because it would you know complicate how we scale on the server",
    "start": "1362080",
    "end": "1368440"
  },
  {
    "text": "side um and we can't really share so it's not really you know beneficial for",
    "start": "1368440",
    "end": "1373799"
  },
  {
    "text": "the end user so enter c2dm c2dm is a effectively what we just described",
    "start": "1373799",
    "end": "1380240"
  },
  {
    "text": "except that it's run by Google and it's exposed in a way that anyone can benefit from right so effectively Google has a",
    "start": "1380240",
    "end": "1388080"
  },
  {
    "text": "persistent connection on our devices so every one of you has an Android phone you know that has Google market on it",
    "start": "1388080",
    "end": "1394880"
  },
  {
    "text": "and you've used you you actually configured it with a Google account you do have actually well and that the phone",
    "start": "1394880",
    "end": "1401600"
  },
  {
    "text": "is as you will see 2.2 or better you do have support for c2dm today right and do",
    "start": "1401600",
    "end": "1408799"
  },
  {
    "text": "have this persistent Connection in the background at all times and so while that may seem weird why the heck is it",
    "start": "1408799",
    "end": "1415679"
  },
  {
    "text": "there well Google has always used it for basically push of their own stuff so for example contact synchronization or email",
    "start": "1415679",
    "end": "1422679"
  },
  {
    "text": "like Gmail is implemented over this or market like for example if you go to market.android.com you find an app you",
    "start": "1422679",
    "end": "1428559"
  },
  {
    "text": "want and you click sent to or install on my phone well how do you think that app gets onto your phone so there's a push",
    "start": "1428559",
    "end": "1434480"
  },
  {
    "text": "from Market to your app or to Market from the Google Market to your Google market on the device that says go and",
    "start": "1434480",
    "end": "1440400"
  },
  {
    "text": "fetch this app and that's how you go and start downloading it so there's pretty much all Google services use you know",
    "start": "1440400",
    "end": "1447440"
  },
  {
    "text": "that have anything to do with the cloud use the push technology okay so what Google did is basically you know as you",
    "start": "1447440",
    "end": "1454799"
  },
  {
    "text": "will see they just allowed us to to piggyback on what they already had so we're already paying the price we as the",
    "start": "1454799",
    "end": "1461320"
  },
  {
    "text": "end users we're already paying the price for for c2dm right because Google uses it so we might as well you know build",
    "start": "1461320",
    "end": "1468559"
  },
  {
    "text": "applications of the same infrastructure okay so of course there's some polling involved involved because we need to",
    "start": "1468559",
    "end": "1474960"
  },
  {
    "text": "keep the the health of the connection in we need to keep on tracking for the health of the connection so it's not",
    "start": "1474960",
    "end": "1480399"
  },
  {
    "text": "ideal because of those all those conditions we we mentioned but Google has figured out a way to do it fairly",
    "start": "1480399",
    "end": "1486200"
  },
  {
    "text": "efficiently uh so that again you know it takes it's we we we take it for granted we just assume that it's there okay so",
    "start": "1486200",
    "end": "1493440"
  },
  {
    "text": "so what exactly is CM how would you classify it so it's a free again free is yet to be defined lightweight Android",
    "start": "1493440",
    "end": "1501600"
  },
  {
    "text": "framework that is and Google run service so it's not just a framework it requires the service or you know a slew of",
    "start": "1501600",
    "end": "1508559"
  },
  {
    "text": "servers on the back end that allows effectively our app servers so our app servers to push notifications to our",
    "start": "1508559",
    "end": "1516000"
  },
  {
    "text": "apps running on our users devices okay so we can Target a",
    "start": "1516000",
    "end": "1521240"
  },
  {
    "text": "particular app on a particular device okay from our app Ser from our cloud",
    "start": "1521240",
    "end": "1526320"
  },
  {
    "text": "from our you know backend server so it's more efficient because we piggyback we leverage what's already there so we're",
    "start": "1526320",
    "end": "1531960"
  },
  {
    "text": "not recreating you know the entire messaging bus and Google does all the work right I mean that seems like a you",
    "start": "1531960",
    "end": "1538799"
  },
  {
    "text": "know win-win well it's a win for for Google because they just basically you know yes it's a little more expensive",
    "start": "1538799",
    "end": "1545120"
  },
  {
    "text": "for them to support this techn you know infrastructure but at the same time the biggest expense of keeping these",
    "start": "1545120",
    "end": "1550720"
  },
  {
    "text": "connections open it's already done they already paid for it right and basically takes care of this c2dm service takes",
    "start": "1550720",
    "end": "1557840"
  },
  {
    "text": "care of uh the the the best effort delivery and message queuing so I'll explain what best effort delivery really",
    "start": "1557840",
    "end": "1564120"
  },
  {
    "text": "means it's not guaranteed delivery but it's you know pretty pretty good um and",
    "start": "1564120",
    "end": "1569320"
  },
  {
    "text": "it's one thing you should know though is that what c2dm is not is not designed to",
    "start": "1569320",
    "end": "1575080"
  },
  {
    "text": "push content to the devices it's meant to push notifications so the payload of the push",
    "start": "1575080",
    "end": "1581600"
  },
  {
    "text": "messages is limited and especially because it is not effectively designed or it's not guaranteed you need to work",
    "start": "1581600",
    "end": "1589000"
  },
  {
    "text": "around that limitation so you don't want to push content right so for example if you're building a chat application you",
    "start": "1589000",
    "end": "1595320"
  },
  {
    "text": "would not put the message of the chat into the into the notification the notification would really be used just",
    "start": "1595320",
    "end": "1601760"
  },
  {
    "text": "to tickle the application to go to the server and download the latest chat history right so it's not to you your",
    "start": "1601760",
    "end": "1608679"
  },
  {
    "text": "own your content your sensitive data would not really be part or shouldn't be part of c2dm even though it could okay",
    "start": "1608679",
    "end": "1615919"
  },
  {
    "text": "so we'll see this how this works um so as far as the requirements and limitations okay this is where some of",
    "start": "1615919",
    "end": "1621919"
  },
  {
    "text": "you may feel disappointed but it it is what it is um first of all you require your users to have at least proy or",
    "start": "1621919",
    "end": "1628120"
  },
  {
    "text": "better which now more than half of the users out there have so it's not that",
    "start": "1628120",
    "end": "1633399"
  },
  {
    "text": "big of a deal or at least not as big of a deal as it once was on the device there has to be Market Google market so",
    "start": "1633399",
    "end": "1641320"
  },
  {
    "text": "that means the devices that you know some these kind of Chinese you know",
    "start": "1641320",
    "end": "1646399"
  },
  {
    "text": "tablets that have never received Google blessing you know will not have the c2dm",
    "start": "1646399",
    "end": "1651520"
  },
  {
    "text": "service required on the on the on the client side so that won't work okay so",
    "start": "1651520",
    "end": "1656600"
  },
  {
    "text": "there needs to be market and there has to be at least one account configured on the device with Market okay now the apps",
    "start": "1656600",
    "end": "1664919"
  },
  {
    "text": "themselves don't have to come for Market your app can be installed as a APK that they download off of a network or even",
    "start": "1664919",
    "end": "1670960"
  },
  {
    "text": "Pro potentially from Amazon Market okay it doesn't have to come from Market go market is just used to basically",
    "start": "1670960",
    "end": "1677080"
  },
  {
    "text": "facilitate the the c2dm endpoint um as far as on the emulator as",
    "start": "1677080",
    "end": "1682640"
  },
  {
    "text": "I mentioned previously as I was starting waiting for it to start up your emulator requires that you have the Google apis",
    "start": "1682640",
    "end": "1688640"
  },
  {
    "text": "enabled right so when you build a platform or you download the platform through the avd or SDK manager you need",
    "start": "1688640",
    "end": "1695840"
  },
  {
    "text": "to basically download the the latest uh or at least one of the Google platforms that's 2.2 or better as far as the",
    "start": "1695840",
    "end": "1702559"
  },
  {
    "text": "limitations again it's best eff for delivery so messages could be get lost and not be delivered although though",
    "start": "1702559",
    "end": "1708840"
  },
  {
    "text": "again you guys can talk about uh you know some of your experiences later to see you know what you've actually seen",
    "start": "1708840",
    "end": "1713919"
  },
  {
    "text": "in practice uh the other thing is the messages could be delivered out of order so that is also again a re reason why",
    "start": "1713919",
    "end": "1720399"
  },
  {
    "text": "you would not want to use it for chat application as an example because then the chat history may may appear to be",
    "start": "1720399",
    "end": "1725480"
  },
  {
    "text": "all over the place the the payload of the messages is limited to 10 24 bytes",
    "start": "1725480",
    "end": "1731279"
  },
  {
    "text": "which it's not that big of a deal because again you shouldn't be putting much there anyways uh there's no support",
    "start": "1731279",
    "end": "1736679"
  },
  {
    "text": "for time to live so you can't say oh I want my message to only live for next 2 minutes after which it's not relevant",
    "start": "1736679",
    "end": "1742760"
  },
  {
    "text": "it'd be cool if there was Unfortunately they don't have it uh they have it's somewhat arbitrary you know it's on the",
    "start": "1742760",
    "end": "1749159"
  },
  {
    "text": "order of weeks to a month uh so if the user doesn't get their message let's say they leave the country they come back in",
    "start": "1749159",
    "end": "1754679"
  },
  {
    "text": "two weeks they'll probably get it if they come back in three months the message will probably never be delivered okay it's not well defined as to what",
    "start": "1754679",
    "end": "1761640"
  },
  {
    "text": "that time to live is on the server side nor is there a way for us to control it um and it's still in the labs and this",
    "start": "1761640",
    "end": "1768080"
  },
  {
    "text": "this is the biggest pain for me uh you know when I when I kind of talk to people about c2dm is like I would love",
    "start": "1768080",
    "end": "1773919"
  },
  {
    "text": "to say oh you go ahead and use it you know tomorrow and in fact you can but the problem is you need to you know be",
    "start": "1773919",
    "end": "1778960"
  },
  {
    "text": "WID listed by Google in order to be able to do this and you know they may refuse you for whatever reason so far they've",
    "start": "1778960",
    "end": "1785559"
  },
  {
    "text": "been pretty good and they've been you know generally accepting people but what they don't specify exactly is what are",
    "start": "1785559",
    "end": "1791240"
  },
  {
    "text": "the qu quarter limits you're supposed to go to them and specifically say oh by the way I'm building this kind of an",
    "start": "1791240",
    "end": "1796880"
  },
  {
    "text": "application expect this messages to be sent you know to a user at a time or to all of the users across my user",
    "start": "1796880",
    "end": "1803480"
  },
  {
    "text": "population in a given day will this work with c2dm and they may say no and then",
    "start": "1803480",
    "end": "1808799"
  },
  {
    "text": "what do you do right so you definitely want to talk to them before you go down the path of building everything and then finding out that it's not going to",
    "start": "1808799",
    "end": "1814840"
  },
  {
    "text": "potentially work from the business end of things not from technological things of things because the limits are not",
    "start": "1814840",
    "end": "1819919"
  },
  {
    "text": "well defined okay for testing only you know no problem you don't have even have",
    "start": "1819919",
    "end": "1825840"
  },
  {
    "text": "you just request an account you generally get it it's you know it's pretty easy now this is the big picture",
    "start": "1825840",
    "end": "1831960"
  },
  {
    "text": "now that we hopefully understand the limitations and what it is this is basically what you what we'll go through",
    "start": "1831960",
    "end": "1837039"
  },
  {
    "text": "so the next slides are really dedicated to walking through this graph so there's",
    "start": "1837039",
    "end": "1842919"
  },
  {
    "text": "couple you know there's a number number of steps that are evolved the the Step Zero that's missing from this graph is",
    "start": "1842919",
    "end": "1849080"
  },
  {
    "text": "US registering for c2dm with Google that is we sign up I don't actually want to",
    "start": "1849080",
    "end": "1854640"
  },
  {
    "text": "use the word register because that's used somewhere else we sign up for c2dm and with a particular email address okay",
    "start": "1854640",
    "end": "1862559"
  },
  {
    "text": "just remember that part um they hopefully approve us what we then do is",
    "start": "1862559",
    "end": "1868120"
  },
  {
    "text": "we build an application that supports this we build an you know server s that supports it and at run time this is kind",
    "start": "1868120",
    "end": "1873720"
  },
  {
    "text": "of generally what would happen our app right with c2dm enabled would get",
    "start": "1873720",
    "end": "1879200"
  },
  {
    "text": "installed and let's say the user says I want to keep it in sync which is what happened when I clicked on that little",
    "start": "1879200",
    "end": "1884240"
  },
  {
    "text": "check box to keep my my timeline in sync my my app app would go to c2dm cloud",
    "start": "1884240",
    "end": "1890480"
  },
  {
    "text": "with the email address that I used when I registered or signed up for c2dm which",
    "start": "1890480",
    "end": "1897240"
  },
  {
    "text": "somehow makes its way into the app that's up to you it gets basically something known as a registration ID now",
    "start": "1897240",
    "end": "1904279"
  },
  {
    "text": "part of that request is not just the email address but rather it also includes something that's unique about",
    "start": "1904279",
    "end": "1910279"
  },
  {
    "text": "that app and that device okay so it's not just the email address it's also the think of it as the",
    "start": "1910279",
    "end": "1917279"
  },
  {
    "text": "some kind of a signature of the app on that particular device you don't really control that part the you know",
    "start": "1917279",
    "end": "1923320"
  },
  {
    "text": "effectively the package manager already knows what your signature of the of your app is inside of Android so that part is",
    "start": "1923320",
    "end": "1928840"
  },
  {
    "text": "taken care of for you okay c2dm in response to your request from the app",
    "start": "1928840",
    "end": "1934760"
  },
  {
    "text": "side gives you some kind of a registration ID that is unique to that app on that device okay the second step",
    "start": "1934760",
    "end": "1943559"
  },
  {
    "text": "is we go and tell our server about that particular registration and we tell our server about us for",
    "start": "1943559",
    "end": "1950679"
  },
  {
    "text": "example we could tell our server our device ID and or our user ID if there was a concept of a user ID in that",
    "start": "1950679",
    "end": "1957440"
  },
  {
    "text": "particular application because you want to you know on the server side you want to be able to know okay so this registration ID is associated with this",
    "start": "1957440",
    "end": "1964639"
  },
  {
    "text": "you know this particular user or this particular device otherwise you know you just have a slew of registration IDs",
    "start": "1964639",
    "end": "1970519"
  },
  {
    "text": "which is good for one to many but not good for one to one communication right",
    "start": "1970519",
    "end": "1976279"
  },
  {
    "text": "so the server remembers it so the server side gets the two the two pieces of information something it's unique about",
    "start": "1976279",
    "end": "1982600"
  },
  {
    "text": "the user or the device and the registration ID and saves it usually in some kind of a database and then the",
    "start": "1982600",
    "end": "1988559"
  },
  {
    "text": "server goes and at some point in the future when there's something to to push into our app right so this by the way",
    "start": "1988559",
    "end": "1996360"
  },
  {
    "text": "this connection disappears right this is just a simple you know let's say HTTP post request at some point in the future",
    "start": "1996360",
    "end": "2003159"
  },
  {
    "text": "the server goes and wants to push some information okay let's say you know stock quote change that you're tracking",
    "start": "2003159",
    "end": "2010880"
  },
  {
    "text": "okay the the the first thing that happens the server goes to something called client login service on in the",
    "start": "2010880",
    "end": "2017639"
  },
  {
    "text": "Google Cloud which is used for a number of different applications in addition to c2dm this is not c2dm specific it's",
    "start": "2017639",
    "end": "2024279"
  },
  {
    "text": "really something that Google uses for just API level authentication and what we do is we authenticate with the uh",
    "start": "2024279",
    "end": "2031960"
  },
  {
    "text": "with the email address that we signed up with for c2dm the password for that",
    "start": "2031960",
    "end": "2038600"
  },
  {
    "text": "account and um some kind of a service indicator that says that the the token",
    "start": "2038600",
    "end": "2043720"
  },
  {
    "text": "that we're going to get back is going to be used with c2dm service okay so if that authentication worked and it can",
    "start": "2043720",
    "end": "2050560"
  },
  {
    "text": "fail and so then you have to worry about retries and stuff like that but if it works what you get back is some kind of a token call it off token okay so now",
    "start": "2050560",
    "end": "2060358"
  },
  {
    "text": "that we have the off token we have the registration ID and we have a message we want to push what we do is we create a",
    "start": "2060359",
    "end": "2066520"
  },
  {
    "text": "another post so this this is step five right we create another post and this time around we go to the c2dm front end",
    "start": "2066520",
    "end": "2074200"
  },
  {
    "text": "and in the c2dm front end or to the c2dm front end we pass the registration ID",
    "start": "2074200",
    "end": "2079760"
  },
  {
    "text": "the uh the off token and the message including some other parameters the c2dm obviously checks our",
    "start": "2079760",
    "end": "2086800"
  },
  {
    "text": "our token then checks for obviously the you know the registration ID that it's",
    "start": "2086800",
    "end": "2092240"
  },
  {
    "text": "valid okay and then it basically checks for through the messaging server or",
    "start": "2092240",
    "end": "2097760"
  },
  {
    "text": "figures out which messaging server has basically connection to our app so",
    "start": "2097760",
    "end": "2103520"
  },
  {
    "text": "somehow there's a way for it to know this information let's assume that there is no message there's no basically",
    "start": "2103520",
    "end": "2109720"
  },
  {
    "text": "connection to our app prior to even that checked um c2dm would have queed their message so you would have put it in some",
    "start": "2109720",
    "end": "2115720"
  },
  {
    "text": "kind of a cue so that in case you know something goes wrong our message is at least saved so you know there's some",
    "start": "2115720",
    "end": "2121040"
  },
  {
    "text": "kind of a persistence happening and so at some point in the future let's say you know we get off of player or your",
    "start": "2121040",
    "end": "2127119"
  },
  {
    "text": "user gets off the plane and now you know they're connected to the network automatically they reestablish the",
    "start": "2127119",
    "end": "2132440"
  },
  {
    "text": "connection to c2dm or to the Google cloud and basically the the the server",
    "start": "2132440",
    "end": "2137720"
  },
  {
    "text": "or CDD messaging server notices this device notices there's a queued message picks up the message from the queue if",
    "start": "2137720",
    "end": "2143680"
  },
  {
    "text": "there was one and pushes it to the device and now the device gets the connection gets the message and",
    "start": "2143680",
    "end": "2151000"
  },
  {
    "text": "internally it's delivered that message becomes a broadcast effectively intent",
    "start": "2151000",
    "end": "2156560"
  },
  {
    "text": "that gets broadcast throughout the system but somehow targets our particular app and our now our app gets",
    "start": "2156560",
    "end": "2162000"
  },
  {
    "text": "spoken up and our app says ahuh look there's a notification for me I want to do something in response and generally",
    "start": "2162000",
    "end": "2168560"
  },
  {
    "text": "the Step 11 which is missing I guess step 10 well 11 I guess what's missing",
    "start": "2168560",
    "end": "2173599"
  },
  {
    "text": "from the picture is that we would then go back to our app server and get the information we're interested in and",
    "start": "2173599",
    "end": "2180200"
  },
  {
    "text": "that's the part that's assume that you're going to can you know do on your own the only other part is that you know",
    "start": "2180200",
    "end": "2185520"
  },
  {
    "text": "Google will remove remove the message from the queue because now it's successfully been delivered so the",
    "start": "2185520",
    "end": "2190839"
  },
  {
    "text": "question is is there any confirmation on the delivery of the message so there's no act that goes basically from your",
    "start": "2190839",
    "end": "2198000"
  },
  {
    "text": "server so like for example if you push a message you go through steps 4 through 10 and now your your app gets the",
    "start": "2198000",
    "end": "2205000"
  },
  {
    "text": "message you don't get a confirmation from Google the message was received but the the way you design your app is you",
    "start": "2205000",
    "end": "2211359"
  },
  {
    "text": "make your app as Step 11 go back to your server and fetch whatever data is interested in that that Step 11 acts as",
    "start": "2211359",
    "end": "2218880"
  },
  {
    "text": "a confirmation of the fact that the message was received right that is your act so the the acknowledgement you do",
    "start": "2218880",
    "end": "2225400"
  },
  {
    "text": "yourself just by the nature of how you design your application does that make sense app the device never gets the",
    "start": "2225400",
    "end": "2232000"
  },
  {
    "text": "message if never gets the message you just don't get that app you you never get that so for example if you put something unique in the push",
    "start": "2232000",
    "end": "2238839"
  },
  {
    "text": "notification and you you never get that you know pull from your app when it gets",
    "start": "2238839",
    "end": "2244119"
  },
  {
    "text": "that push push notification you will know that it has never received it so now you you can on the server side assume that it's been lost or that the",
    "start": "2244119",
    "end": "2251160"
  },
  {
    "text": "client has left the country or left the you know area where they have network connectivity right or they've disabled",
    "start": "2251160",
    "end": "2257960"
  },
  {
    "text": "the service which is also they can disable basically they can unregister which is something we'll talk about does",
    "start": "2257960",
    "end": "2264160"
  },
  {
    "text": "this make sense so this is the big picture yes there are a lot of steps but you know guess what a lot of these steps",
    "start": "2264160",
    "end": "2269920"
  },
  {
    "text": "happen in the Google cloud and they're here just so you kind of get a general picture not that you should even care about it no it's a good question so is",
    "start": "2269920",
    "end": "2276960"
  },
  {
    "text": "the author for the client no the off token is for the server effectively and you can re not only you can you should",
    "start": "2276960",
    "end": "2283640"
  },
  {
    "text": "reuse the off token so if you're sending messages to hundreds or thousands of different clients you should reuse the",
    "start": "2283640",
    "end": "2289160"
  },
  {
    "text": "same off token the step five through 10 are repeated for each client but step",
    "start": "2289160",
    "end": "2294599"
  },
  {
    "text": "four will be done only once and in fact you should cash your off token keep it",
    "start": "2294599",
    "end": "2299760"
  },
  {
    "text": "somewhere and then if it some point expires you didn't need to just handle re reacquiring it it's a great question",
    "start": "2299760",
    "end": "2306560"
  },
  {
    "text": "yes my my application so for in order for my application to to receive the message to have notification so over",
    "start": "2306560",
    "end": "2313520"
  },
  {
    "text": "here on this side I basically what I need to do is I need to implement a broadcast receiver which will receive a",
    "start": "2313520",
    "end": "2320319"
  },
  {
    "text": "particular kind of broadcast that is targeting my application and there's a mechanism in place that prevents other",
    "start": "2320319",
    "end": "2326520"
  },
  {
    "text": "applications from being from receiving that broadcast so even though broadcast is one to many messaging you know system",
    "start": "2326520",
    "end": "2332920"
  },
  {
    "text": "in Android if you will you know in this case it's really one to one so my my application gets tickled and what's also",
    "start": "2332920",
    "end": "2339680"
  },
  {
    "text": "cool is that my app my sorry my device or my user's device can actually be",
    "start": "2339680",
    "end": "2344839"
  },
  {
    "text": "sleeping there's no requirement for the device itself to be awake when this happens right so the so the actual",
    "start": "2344839",
    "end": "2351000"
  },
  {
    "text": "message can wake up the device then my I get that message and then I react to the",
    "start": "2351000",
    "end": "2356160"
  },
  {
    "text": "message and do whatever I want to do in response okay so let's actually see how",
    "start": "2356160",
    "end": "2362839"
  },
  {
    "text": "this all works so we're going to go first of all just through the you know through what Google provides and we're",
    "start": "2362839",
    "end": "2368040"
  },
  {
    "text": "going to actually see these 10 steps so on the device Google provides basically",
    "start": "2368040",
    "end": "2373160"
  },
  {
    "text": "a background service that helps establish and maintain this single SSL",
    "start": "2373160",
    "end": "2379119"
  },
  {
    "text": "encrypted connection okay TCP IP connection which is alive at all times",
    "start": "2379119",
    "end": "2384400"
  },
  {
    "text": "okay even when your phone is off the connection is alive per se meaning",
    "start": "2384400",
    "end": "2389599"
  },
  {
    "text": "there's basically you know I mean it's p packet switch connection so it's not really alive but you know there's",
    "start": "2389599",
    "end": "2394680"
  },
  {
    "text": "assumption that it's alive right um and as long as a tower for example you",
    "start": "2394680",
    "end": "2400520"
  },
  {
    "text": "know 3G Tower knows where you are you know it maintains that connection if you're on Wi-Fi depending on how the",
    "start": "2400520",
    "end": "2406160"
  },
  {
    "text": "Wi-Fi is implemented whether or not you know the Wi-Fi is on or not you know whether you have a lock or not you know",
    "start": "2406160",
    "end": "2411440"
  },
  {
    "text": "that may maintain their connection but presumably it's alive at all times so this also honors the background data",
    "start": "2411440",
    "end": "2417440"
  },
  {
    "text": "settings so if you go in your device you say I don't care about background data you know this turns off the service effectively um it automatically starts",
    "start": "2417440",
    "end": "2424000"
  },
  {
    "text": "when the network becomes available so if you're network if you're going in the airplan mod of course it's not going to run and it uses heartbeats to",
    "start": "2424000",
    "end": "2431480"
  },
  {
    "text": "effectively reconnect so it'll temporar or periodically excuse me check the",
    "start": "2431480",
    "end": "2437440"
  },
  {
    "text": "health of the connection the reason for it because firewalls and other things can kill the connection without the",
    "start": "2437440",
    "end": "2443599"
  },
  {
    "text": "server Andor the client knowing about it so unless we check on the connection we may think we have it but if we don't all",
    "start": "2443599",
    "end": "2449800"
  },
  {
    "text": "the push messages are not never going to reach us so we need to keep on checking that it's that the connection is good",
    "start": "2449800",
    "end": "2455599"
  },
  {
    "text": "okay Google figured out how to minimize this frequency of checks like so they basically go and try to check it as",
    "start": "2455599",
    "end": "2462400"
  },
  {
    "text": "infrequently as possible given the circumstances so I don't know I've never I don't have access to their algorithms",
    "start": "2462400",
    "end": "2468560"
  },
  {
    "text": "but I would assume that for different kinds of connections they have different kinds of frequencies and maybe even for",
    "start": "2468560",
    "end": "2473599"
  },
  {
    "text": "different kinds of past usage patterns they may have different kind of you know frequencies for future you know for",
    "start": "2473599",
    "end": "2478880"
  },
  {
    "text": "future expectations of my connection so I don't know exactly how they implement it I'm assuming they were smart when",
    "start": "2478880",
    "end": "2483960"
  },
  {
    "text": "they did did it and probably they're you know way smarter than I would ever be able to do it okay so in the cloud they",
    "start": "2483960",
    "end": "2490480"
  },
  {
    "text": "provide basically a farm of servers that handles all these connections from all these millions of devices out there you",
    "start": "2490480",
    "end": "2496079"
  },
  {
    "text": "know um and it has a fairly efficient resumption mechanism because it is SSL",
    "start": "2496079",
    "end": "2501440"
  },
  {
    "text": "encrypted that if a connection gets dropped he doesn't have to re know reh handshake which is an expensive process",
    "start": "2501440",
    "end": "2508680"
  },
  {
    "text": "with in SSL it actually caches the session keys so it usually just uses the symmetric encryption as opposed to",
    "start": "2508680",
    "end": "2514760"
  },
  {
    "text": "having to go or Rego through the whole you know you know public key you know verification process or you know the",
    "start": "2514760",
    "end": "2521000"
  },
  {
    "text": "handshake sh the initial handshake um and it's very smart that you know it can detect the connections and of course the",
    "start": "2521000",
    "end": "2526920"
  },
  {
    "text": "server side can also detect connections so the server side if it detects the connection is dropped it'll just kill",
    "start": "2526920",
    "end": "2532200"
  },
  {
    "text": "that connection and it'll basically you know stop trying to send it to the",
    "start": "2532200",
    "end": "2537720"
  },
  {
    "text": "clients that are not there right so that's that's obviously uh helpful so what we do is we basically provide an",
    "start": "2537720",
    "end": "2544280"
  },
  {
    "text": "Android app that just listens on these broadcast m messages and we handle these notifications of course there's a server",
    "start": "2544280",
    "end": "2550440"
  },
  {
    "text": "component which is sending this but on the appside we really just need a broadcast receiver now Step Zero so now let's go",
    "start": "2550440",
    "end": "2558720"
  },
  {
    "text": "through the steps the the the Step Zero is you need to go and sign up for Google c2dm so basic you need to have a Google",
    "start": "2558720",
    "end": "2565559"
  },
  {
    "text": "account um and you go to this URL address you say what kind of an app you're going to build you don't have to",
    "start": "2565559",
    "end": "2571280"
  },
  {
    "text": "even have the app first you just give them something that sounds like you're not going to spam uh or you're not going",
    "start": "2571280",
    "end": "2576720"
  },
  {
    "text": "to you know do do malicious things and they generally will approve you it takes a couple of days you know it's not that",
    "start": "2576720",
    "end": "2582160"
  },
  {
    "text": "big of a deal uh they were supposed to go live by the end of last year they didn't I don't know exactly when they",
    "start": "2582160",
    "end": "2588119"
  },
  {
    "text": "will I asked them on several occasions they told me they can't tell me so go figure okay so one thing that you will",
    "start": "2588119",
    "end": "2595359"
  },
  {
    "text": "provide during the registration process is some kind of a email address that is known as the rooll email address this is",
    "start": "2595359",
    "end": "2602319"
  },
  {
    "text": "not meant to be a human email address but rather it's an email address associated with C to DN it can be your",
    "start": "2602319",
    "end": "2609200"
  },
  {
    "text": "email address per se but it doesn't have to be okay and this is the email address that you will later on use both when",
    "start": "2609200",
    "end": "2616559"
  },
  {
    "text": "registering from the app to the c2dm servers to get the registration ID as",
    "start": "2616559",
    "end": "2622359"
  },
  {
    "text": "well as when going and grabbing an off token from Google so the same email address needs to be used in those two",
    "start": "2622359",
    "end": "2628480"
  },
  {
    "text": "other places so step one okay and the step one is actually multiple steps so",
    "start": "2628480",
    "end": "2634960"
  },
  {
    "text": "in this particular case this is typically what I would do in an app that has c2dm so first of all so basically",
    "start": "2634960",
    "end": "2641200"
  },
  {
    "text": "this is my manifest file so first of all what you will notice is I go and Define",
    "start": "2641200",
    "end": "2646640"
  },
  {
    "text": "my own Android application now some of you may not even know what that means if you've never",
    "start": "2646640",
    "end": "2651920"
  },
  {
    "text": "used the Android application class if you've never extended from it but as you will see later it's a it gives me a",
    "start": "2651920",
    "end": "2658280"
  },
  {
    "text": "simple way to share effectively data in this case way clocks from one component",
    "start": "2658280",
    "end": "2665000"
  },
  {
    "text": "with another component okay I'll explain where where that comes into play later",
    "start": "2665000",
    "end": "2670319"
  },
  {
    "text": "then what I do is I build a receiver so this receiver is basically going to help",
    "start": "2670319",
    "end": "2675480"
  },
  {
    "text": "me um receive by notifications as well as handle registrations so there are two",
    "start": "2675480",
    "end": "2682760"
  },
  {
    "text": "kinds of events I need to receive the actual notifications themselves as well as successful registrations or",
    "start": "2682760",
    "end": "2689400"
  },
  {
    "text": "unsuccessful registrations or un registrations okay so that is basically the receiver part the one thing I need",
    "start": "2689400",
    "end": "2696200"
  },
  {
    "text": "is to have this permission that basically I you know or I require the permission that whoever sends me this",
    "start": "2696200",
    "end": "2702800"
  },
  {
    "text": "basically needs to hold this permission in order for for it to send me this these messages this is really just to",
    "start": "2702800",
    "end": "2708280"
  },
  {
    "text": "prevent other apps for spoofing these notifications okay then what I have are",
    "start": "2708280",
    "end": "2715800"
  },
  {
    "text": "a couple of permissions the one is called W clock because I will want to keep my device a wake while I'm handling",
    "start": "2715800",
    "end": "2722520"
  },
  {
    "text": "or you know getting data from my server and I'll explain later on what that is used how that's used the internet",
    "start": "2722520",
    "end": "2728880"
  },
  {
    "text": "permission is obvious uh the receive permission is basically obvious",
    "start": "2728880",
    "end": "2734119"
  },
  {
    "text": "hopefully that's basically what I require in order to be able to receive uh the uh the basically these",
    "start": "2734119",
    "end": "2741000"
  },
  {
    "text": "notifications and then the last permission is somewhat non obvious basically what I have here is a users",
    "start": "2741000",
    "end": "2747880"
  },
  {
    "text": "permission called um c2d message and I actually Define that permission with a",
    "start": "2747880",
    "end": "2754240"
  },
  {
    "text": "protection level of signature so why the heck am I create getting a permission and using it at the same time and it",
    "start": "2754240",
    "end": "2759480"
  },
  {
    "text": "seems arbitrary it uses my package name yet it uses something that's specifically called c2dm message well",
    "start": "2759480",
    "end": "2766760"
  },
  {
    "text": "basically be later on at some point in the future when my app is supposed to receive a notification in order for me",
    "start": "2766760",
    "end": "2773720"
  },
  {
    "text": "to prevent to basically make sure that only I get that notification via this",
    "start": "2773720",
    "end": "2779240"
  },
  {
    "text": "broadcast receiver and nobody else the c2dm mechanism is going to basically",
    "start": "2779240",
    "end": "2786000"
  },
  {
    "text": "attach this PR permission to the message and that will effectively help me be the",
    "start": "2786000",
    "end": "2792920"
  },
  {
    "text": "only one who receives the message nobody else will be able to get it okay and that is really just I mean that's the",
    "start": "2792920",
    "end": "2799480"
  },
  {
    "text": "only way you can make broadcast messages be one to one otherwise anyone on the phone would potentially be able to",
    "start": "2799480",
    "end": "2805680"
  },
  {
    "text": "intercept my messages and whatever do whatever they want with it again it's really for security reasons only and",
    "start": "2805680",
    "end": "2811800"
  },
  {
    "text": "then the last little bit is they Needs A Min SDK version of 8 Okay so that's",
    "start": "2811800",
    "end": "2817599"
  },
  {
    "text": "effectively for or better so step 1.2 how do I actually register so again",
    "start": "2817599",
    "end": "2824079"
  },
  {
    "text": "this is the code so let's say I do it in an application or you know a service or",
    "start": "2824079",
    "end": "2830079"
  },
  {
    "text": "broadcast doesn't matter some kind of Android component I want to handle the registration I want to actually enable",
    "start": "2830079",
    "end": "2835800"
  },
  {
    "text": "this on the device so this is the code that's on the device so basically what I",
    "start": "2835800",
    "end": "2841079"
  },
  {
    "text": "do is I create an INT this is boilerplate code okay I create an intent which is basically says I want register",
    "start": "2841079",
    "end": "2848119"
  },
  {
    "text": "and to this intent I passed some kind of a extra pending intent for something",
    "start": "2848119",
    "end": "2855160"
  },
  {
    "text": "called broadcast now you don't have to know what pending intents are nor exactly what these zeros and new intent",
    "start": "2855160",
    "end": "2860839"
  },
  {
    "text": "things are literally all you need to know is that this part effectively",
    "start": "2860839",
    "end": "2866160"
  },
  {
    "text": "represents our the signature of our app somehow the c2dm service figures out who",
    "start": "2866160",
    "end": "2871680"
  },
  {
    "text": "we are it's basically able to extract our package name effectively that's what",
    "start": "2871680",
    "end": "2876880"
  },
  {
    "text": "what it is it extracts your package name from this spending intent and they later on knows that it's our application that",
    "start": "2876880",
    "end": "2883800"
  },
  {
    "text": "wishes to receive these messages that's the that's that's the extent that you have to care about it what I then do is",
    "start": "2883800",
    "end": "2890599"
  },
  {
    "text": "I put another extra and this is important where I put a sender which is basically that Ro email that I signed up",
    "start": "2890599",
    "end": "2897280"
  },
  {
    "text": "with okay this is how c2dm knows basically you know which account this is",
    "start": "2897280",
    "end": "2903160"
  },
  {
    "text": "for and finally I go and say start service with this registration intent",
    "start": "2903160",
    "end": "2908960"
  },
  {
    "text": "this is how I request the registration from c2dm on the app side that's the first step okay the second step is now",
    "start": "2908960",
    "end": "2918640"
  },
  {
    "text": "the Google hopefully I mean hopefully you know there's internet connectivity and hopefully you know I was approved",
    "start": "2918640",
    "end": "2925079"
  },
  {
    "text": "and you know c2dm service say yes you're good I basically get a",
    "start": "2925079",
    "end": "2930400"
  },
  {
    "text": "registration event that says you've registered right this is basically step",
    "start": "2930400",
    "end": "2935960"
  },
  {
    "text": "two I now hopefully get my registration ID so the way I do this is again I have a",
    "start": "2935960",
    "end": "2941680"
  },
  {
    "text": "broadcast receiver which if you remember is signed up to receive these registration",
    "start": "2941680",
    "end": "2948000"
  },
  {
    "text": "intents okay so that's what I'm looking for so what I do is I say okay the on",
    "start": "2948000",
    "end": "2953960"
  },
  {
    "text": "receive fired hopefully this is from C to DM I go and say okay is this registration int action and let's say it",
    "start": "2953960",
    "end": "2962400"
  },
  {
    "text": "is I then go and get some Fields extra fields from it and then I interpret the fields like if there's an error field",
    "start": "2962400",
    "end": "2968680"
  },
  {
    "text": "that means there was an error if there's unregistered field that means you know actually unregistered as opposed to registered or if there was a reg or",
    "start": "2968680",
    "end": "2976160"
  },
  {
    "text": "registration ID field that means or extra that means that I successfully registered so I now have the",
    "start": "2976160",
    "end": "2982720"
  },
  {
    "text": "registration ID that I need to provide to my server so you can Target my app okay that's basically what I care",
    "start": "2982720",
    "end": "2989839"
  },
  {
    "text": "about now generally because this is happening in a broadcast receiver you can't go and open up a connection to",
    "start": "2989839",
    "end": "2995760"
  },
  {
    "text": "your server because that's going to be a long running operation which would cause an anr you get one of those like this",
    "start": "2995760",
    "end": "3001119"
  },
  {
    "text": "application is not responding you have 10 seconds basically to handle it and you know there's a chance that you may not have enough time so you want to do",
    "start": "3001119",
    "end": "3008000"
  },
  {
    "text": "this in separate thread okay so again don't ever do HTTP",
    "start": "3008000",
    "end": "3014160"
  },
  {
    "text": "calls or anything that may take longer than you know order of milliseconds",
    "start": "3014160",
    "end": "3019280"
  },
  {
    "text": "within your broadcast receivers or anywhere else for that matter okay so",
    "start": "3019280",
    "end": "3024880"
  },
  {
    "text": "what I do the typically is let's say I have some kind of a background service in this case I call it reg service this",
    "start": "3024880",
    "end": "3030720"
  },
  {
    "text": "is my service which is going to tell my server that I have this registration ID",
    "start": "3030720",
    "end": "3036319"
  },
  {
    "text": "so I basically put the registration ID in some kind of an intent and I start now my own service okay so now what happens this is",
    "start": "3036319",
    "end": "3044240"
  },
  {
    "text": "basically how I would Implement my service I you know I implement it as a",
    "start": "3044240",
    "end": "3049280"
  },
  {
    "text": "as a intent service and for those of you that don't know what intent actually how many of",
    "start": "3049280",
    "end": "3054680"
  },
  {
    "text": "you have used intent Services before okay how many of you know what intent",
    "start": "3054680",
    "end": "3060000"
  },
  {
    "text": "services are okay how many of you don't know what services",
    "start": "3060000",
    "end": "3065319"
  },
  {
    "text": "are okay so services are components that allow Android you know effectively they're components that run in the",
    "start": "3065319",
    "end": "3071280"
  },
  {
    "text": "background that effectively allow your application to be persistent in the background do something in the background there's no UI associate with",
    "start": "3071280",
    "end": "3076599"
  },
  {
    "text": "them at least not in general so an intent service is a service that differs from other services because it has a",
    "start": "3076599",
    "end": "3083760"
  },
  {
    "text": "method called on handle intent which is guarant to be run in a separate",
    "start": "3083760",
    "end": "3089640"
  },
  {
    "text": "thread okay the threading part is taken care of for you you don't have to worry about that that someone else does does",
    "start": "3089640",
    "end": "3095599"
  },
  {
    "text": "it for you okay so effectively what happens is when this service is started which is what I do over here when I say",
    "start": "3095599",
    "end": "3102160"
  },
  {
    "text": "start service at some point the onart command method and on create an onart",
    "start": "3102160",
    "end": "3107520"
  },
  {
    "text": "command methods fire in my service and they start a thread and that thread at some point goes and calls on handle",
    "start": "3107520",
    "end": "3113680"
  },
  {
    "text": "intent so this is a simple way of not having to worry about threads yet not having to run into those an anrs okay so",
    "start": "3113680",
    "end": "3121280"
  },
  {
    "text": "whenever you have long running operations that you want to happen in the background an intent service should be the first thing you",
    "start": "3121280",
    "end": "3127920"
  },
  {
    "text": "consider so you go and grab the intent the registration ID okay now we're in",
    "start": "3127920",
    "end": "3134200"
  },
  {
    "text": "our service let's say we're interested in something that uniquely identifies our user so maybe there's some kind of a",
    "start": "3134200",
    "end": "3140280"
  },
  {
    "text": "method called get user ID now how you implement this method is up to you let's assume there's some kind of a preference",
    "start": "3140280",
    "end": "3145799"
  },
  {
    "text": "that allows you to extract an email of a user or something uniquely identifies a user if you don't have that then you can",
    "start": "3145799",
    "end": "3151799"
  },
  {
    "text": "basically grab the device ID which requires you also have this permission called the read phone state which you",
    "start": "3151799",
    "end": "3157400"
  },
  {
    "text": "can basically grab a telep manager from telepon manager you ask for the device ID but you need something that uniquely",
    "start": "3157400",
    "end": "3163079"
  },
  {
    "text": "identifies that particular device because on the server side you're going to want to Target that device okay and how you actually handle",
    "start": "3163079",
    "end": "3170880"
  },
  {
    "text": "how do you push this to your server how do you complete that step you know three I guess is really up to you like you you",
    "start": "3170880",
    "end": "3177680"
  },
  {
    "text": "know how you push you know you use you can use the HTTP uh URL connection to do a post or you can use even better the",
    "start": "3177680",
    "end": "3184040"
  },
  {
    "text": "Apache HTTP client which Android supports by default okay there you can kind of read examples on how to do this",
    "start": "3184040",
    "end": "3190559"
  },
  {
    "text": "or you can look at some of the code that I have well actually my code uses a library so that library takes care of it",
    "start": "3190559",
    "end": "3195839"
  },
  {
    "text": "so anyway that's that part so let me just remind you we basically now completed this step two over here and",
    "start": "3195839",
    "end": "3203520"
  },
  {
    "text": "hopefully on the server side we have now step three the towards this so let's we're going to see the step three so",
    "start": "3203520",
    "end": "3209280"
  },
  {
    "text": "step three is basically let's say we create some kind of a table on the server side which is you know in a database table where we save the user ID",
    "start": "3209280",
    "end": "3215960"
  },
  {
    "text": "and the registration ID okay that's it and now that's all we care about",
    "start": "3215960",
    "end": "3221040"
  },
  {
    "text": "literally we don't really we not really yet sending any messages we just save it and we're we say we're done you know",
    "start": "3221040",
    "end": "3227680"
  },
  {
    "text": "let's you could you know if this is a serlet you can go and extract this parameters from a ser and stick them in a database how you do this you know it's",
    "start": "3227680",
    "end": "3234119"
  },
  {
    "text": "beyond what we have time to talk about although I can show your code in PHP now the step four now we want to push the",
    "start": "3234119",
    "end": "3241000"
  },
  {
    "text": "message from our server to our client at some point in the future so how do we do this okay so the first thing we do is we",
    "start": "3241000",
    "end": "3248680"
  },
  {
    "text": "basically go to this client login the client login requires that we post a",
    "start": "3248680",
    "end": "3253799"
  },
  {
    "text": "message to this URL address and in the post we have to include the following parameters",
    "start": "3253799",
    "end": "3260040"
  },
  {
    "text": "basically the account type the email the password the service and and source",
    "start": "3260040",
    "end": "3265359"
  },
  {
    "text": "source is just some you know user agent string the account type is hosted or Google doesn't really matter the service",
    "start": "3265359",
    "end": "3271680"
  },
  {
    "text": "has to be a2dm which is says we are trying to get an off token for A2 a2dm",
    "start": "3271680",
    "end": "3276920"
  },
  {
    "text": "service and the email and the password have to correspond to what we used to sign up for for this account this this",
    "start": "3276920",
    "end": "3284119"
  },
  {
    "text": "is not our personal email and our personal password it's basically the the email that we provided when we signed up",
    "start": "3284119",
    "end": "3290280"
  },
  {
    "text": "for c2dm in the first place okay in response to this we get some kind of an",
    "start": "3290280",
    "end": "3296520"
  },
  {
    "text": "TP 200 response hopefully and that 200 response contains a line called o equals",
    "start": "3296520",
    "end": "3302200"
  },
  {
    "text": "some kind of a string that some kind of a string is your token and what you do you cash it you save it because you're",
    "start": "3302200",
    "end": "3309319"
  },
  {
    "text": "going to need it in the future so you don't want to have to repeat step four again unless at some point it says it's",
    "start": "3309319",
    "end": "3314480"
  },
  {
    "text": "expired and you have to go and reauthenticate you typically save this my code that I'll will show you later on",
    "start": "3314480",
    "end": "3319920"
  },
  {
    "text": "doesn't actually save it but whatever so step",
    "start": "3319920",
    "end": "3325319"
  },
  {
    "text": "five now we want to push the actual message we have the token we know the user we know the registration ID of the",
    "start": "3325319",
    "end": "3331920"
  },
  {
    "text": "user and we have some kind of a data that we think our user is interested in okay so we want to push it this time",
    "start": "3331920",
    "end": "3337880"
  },
  {
    "text": "around we actually go to and this yeah these slides look very weird when they're formatted like this in a",
    "start": "3337880",
    "end": "3343760"
  },
  {
    "text": "different resolution but if you actually download them in a different screen these things will not be cut off but anyways we go to htps Android apis",
    "start": "3343760",
    "end": "3351200"
  },
  {
    "text": "google.com c2dm send okay and we do a post the post post again this is coming",
    "start": "3351200",
    "end": "3357240"
  },
  {
    "text": "from the server side the post includes the registration ID the collapse key I'll explain in a moment the data which",
    "start": "3357240",
    "end": "3364880"
  },
  {
    "text": "can basically be arbitrary name value pairs like for example stock equals you know I don't",
    "start": "3364880",
    "end": "3373240"
  },
  {
    "text": "know Java which was son's former stock you know that's like the stock that maybe re you know has some new",
    "start": "3373240",
    "end": "3379559"
  },
  {
    "text": "information on it okay um and then delay while while idle I'll explain in a",
    "start": "3379559",
    "end": "3384880"
  },
  {
    "text": "moment okay so don't worry about the collapse key and the while idle for the time being just assume that we're",
    "start": "3384880",
    "end": "3391280"
  },
  {
    "text": "sending the registration ID the data that we they were interested in and in",
    "start": "3391280",
    "end": "3397240"
  },
  {
    "text": "the effectively HTTP heads we need to provide something called authorization",
    "start": "3397240",
    "end": "3402319"
  },
  {
    "text": "header which includes this Google login space off equals and then the token okay",
    "start": "3402319",
    "end": "3408880"
  },
  {
    "text": "this is how we prove that we are legit the registration ID identifies a",
    "start": "3408880",
    "end": "3414359"
  },
  {
    "text": "particular app on a particular device device and the data is whatever arbitrary data we want to put in there",
    "start": "3414359",
    "end": "3420119"
  },
  {
    "text": "what we get back in response to this is hopefully a 200 or we get some kind of an i error error equals something and",
    "start": "3420119",
    "end": "3426440"
  },
  {
    "text": "then we interpret errors there's also other kinds of non2 200 like 503 which means the server is busy try again later",
    "start": "3426440",
    "end": "3432799"
  },
  {
    "text": "it could be a 401 if we're not authenticated if the Au toen expired or is invalid in fact there's a whole slew",
    "start": "3432799",
    "end": "3439319"
  },
  {
    "text": "of things that can happen right so quar exceeded device qu exceeded you know",
    "start": "3439319",
    "end": "3444480"
  },
  {
    "text": "invalid registration Notre third message too big uh 401 or 503 you have a",
    "start": "3444480",
    "end": "3450680"
  },
  {
    "text": "question no it's it has to be a header so this has to be an um whoops HTP",
    "start": "3450680",
    "end": "3455760"
  },
  {
    "text": "request pram sorry this should say HTTP request Heather thanks for noticing that",
    "start": "3455760",
    "end": "3460799"
  },
  {
    "text": "so it has to be a Heather otherwise it won't work okay these are the sorts of",
    "start": "3460799",
    "end": "3465880"
  },
  {
    "text": "things you have to deal with like for example the quote exceeded and the vice quote exceeded are somewhat well they're",
    "start": "3465880",
    "end": "3472599"
  },
  {
    "text": "not well defined we don't know really when we'll exceed our quota but the vice C ex is when we target one particular",
    "start": "3472599",
    "end": "3478039"
  },
  {
    "text": "device too many times in a given time frame and then CeX is when we send too many messages Al together from a",
    "start": "3478039",
    "end": "3484000"
  },
  {
    "text": "particular you know sender ID uh the rest of these are self OB you know are hopefully obvious and you know you you",
    "start": "3484000",
    "end": "3490520"
  },
  {
    "text": "you'll get them now the 503 you should Implement and there's something called retry after so you generally the server",
    "start": "3490520",
    "end": "3496720"
  },
  {
    "text": "will tell you oh by the way I'm busy try back in 30 seconds 5 minutes whatever and you need to honor this and if you",
    "start": "3496720",
    "end": "3503880"
  },
  {
    "text": "don't you at least need to employ exponential back off it means you know every time you go back you should wait",
    "start": "3503880",
    "end": "3509400"
  },
  {
    "text": "longer and longer and longer you know not in a linear fashion pro more like you know geometric fashion or even you",
    "start": "3509400",
    "end": "3515039"
  },
  {
    "text": "know double the time you wait every single time you go back to the server okay now otherwise you may get banned",
    "start": "3515039",
    "end": "3521200"
  },
  {
    "text": "which sucks so step C 6 seven and 8 remember just to remind you 6 seven and",
    "start": "3521200",
    "end": "3526880"
  },
  {
    "text": "8 happen in the cloud right this is basically in the cloud they go and",
    "start": "3526880",
    "end": "3531960"
  },
  {
    "text": "authenticated request Cee the message rout out for delivery and now deliver okay so let's see how this works so six",
    "start": "3531960",
    "end": "3537960"
  },
  {
    "text": "seven and eight basically Google verifies her login token they it verif",
    "start": "3537960",
    "end": "3543079"
  },
  {
    "text": "you know verifies hopefully also a registration ID then ceser message in some kind of a que some kind of the",
    "start": "3543079",
    "end": "3549319"
  },
  {
    "text": "message store and then if by the way there was another message in a queue",
    "start": "3549319",
    "end": "3555680"
  },
  {
    "text": "with the same registration and the same collapse key that previous message gets",
    "start": "3555680",
    "end": "3561119"
  },
  {
    "text": "replaced and now that now you kind of know what the collapse keys are for remember one of the things we could have",
    "start": "3561119",
    "end": "3566400"
  },
  {
    "text": "specified here is some kind of a collapse key and it's an arbitrary string you can say collapse key equals blah or you can say collapse key equals",
    "start": "3566400",
    "end": "3572760"
  },
  {
    "text": "you know stock you know up you know c2d I don't know some stock update",
    "start": "3572760",
    "end": "3578200"
  },
  {
    "text": "notification right and the idea is you know de collapse key basically if it",
    "start": "3578200",
    "end": "3583720"
  },
  {
    "text": "matches to what's been previously stored it effectively just replaces it this is",
    "start": "3583720",
    "end": "3589319"
  },
  {
    "text": "to avoid if for example your users user is you know let's say they are on a plane their device is off and now they",
    "start": "3589319",
    "end": "3596039"
  },
  {
    "text": "receive like you know 50 stock updates or hundreds of Twitter messages they don't need to go and receive 100",
    "start": "3596039",
    "end": "3601839"
  },
  {
    "text": "notifications one notification is enough for them to be told go back and download these messages right so that's really",
    "start": "3601839",
    "end": "3608200"
  },
  {
    "text": "the the the the the you know the point of the collapse key the Google supports only four collapse Keys um I don't know",
    "start": "3608200",
    "end": "3615000"
  },
  {
    "text": "exactly why they pick that arbitrary number uh but generally that's how it works and so at that point at the last",
    "start": "3615000",
    "end": "3622200"
  },
  {
    "text": "point the system tries to Route the message to a particular server that has a connection to our",
    "start": "3622200",
    "end": "3629520"
  },
  {
    "text": "device or to our user's device okay so now how does this work the last you know",
    "start": "3629520",
    "end": "3635760"
  },
  {
    "text": "the not the last step well I guess it is the last step because the the the part where we remove it from the message store is not even important who cares",
    "start": "3635760",
    "end": "3642160"
  },
  {
    "text": "about it so way basically the way this works is that the first of all the c2d",
    "start": "3642160",
    "end": "3647799"
  },
  {
    "text": "messaging server may decide simply to impose a delay so before actually going and pushing the message to our app you",
    "start": "3647799",
    "end": "3654799"
  },
  {
    "text": "may say you know what I'm going to delay and why it would delay is if it feels that we've sent too many messages to",
    "start": "3654799",
    "end": "3661240"
  },
  {
    "text": "this device in a you know given time frame and the biggest reason why it imposes this somewhat arbitrary delay is",
    "start": "3661240",
    "end": "3668480"
  },
  {
    "text": "basically to avoid you know waking up the device too frequently which may drain the battery so then it tries to",
    "start": "3668480",
    "end": "3675319"
  },
  {
    "text": "effectively cause a condition where multiple collapse key or collapse key you know collapses messages into one so",
    "start": "3675319",
    "end": "3682280"
  },
  {
    "text": "the device doesn't have to be woken up as as frequently um this is basically known as attenuation I don't know that's",
    "start": "3682280",
    "end": "3690400"
  },
  {
    "text": "you know that's why you know that's how they they they they call it but it's not something we get to control it's all you",
    "start": "3690400",
    "end": "3697000"
  },
  {
    "text": "know there's no parameters that affect that help us basically affect that um so",
    "start": "3697000",
    "end": "3702160"
  },
  {
    "text": "again it temporarily delays the message prevents this you know spinning up the radio unnecessarily helps protect the",
    "start": "3702160",
    "end": "3707200"
  },
  {
    "text": "battery helps protect the user by not annoying the user too frequently if our messages you know do anything",
    "start": "3707200",
    "end": "3714520"
  },
  {
    "text": "this is basically our app It generally has to do with our app but it could and this is a good question I'm not sure if",
    "start": "3715960",
    "end": "3721760"
  },
  {
    "text": "they would actually also now think about it it would probably it would make sense",
    "start": "3721760",
    "end": "3727039"
  },
  {
    "text": "if they also took into account other apps that may also be sending to the phone simply because they have the",
    "start": "3727039",
    "end": "3732359"
  },
  {
    "text": "knowledge and if the goal is to protect the radio you know it could help now",
    "start": "3732359",
    "end": "3737599"
  },
  {
    "text": "generally I assume that it's not that simply because we're not going to be able to collapse with messages from",
    "start": "3737599",
    "end": "3743640"
  },
  {
    "text": "other apps so we you know we don't as much but if it does deliver the messages",
    "start": "3743640",
    "end": "3749640"
  },
  {
    "text": "at the same time for multiple apps even though there are different messages the radio is only spawn up spawn up once so",
    "start": "3749640",
    "end": "3755760"
  },
  {
    "text": "I guess you know I don't know exactly how it's implemented it' be interesting to find out but it's a good question so",
    "start": "3755760",
    "end": "3762079"
  },
  {
    "text": "anyway uh the first few messages you know obviously like I said go through and then potentially there may be a a",
    "start": "3762079",
    "end": "3767839"
  },
  {
    "text": "delay depending on how frequently we do this now another feature that we another little token we could have specified",
    "start": "3767839",
    "end": "3773760"
  },
  {
    "text": "when we uh you know sent our our applic or or our message is something called delay while idle remember this was",
    "start": "3773760",
    "end": "3781240"
  },
  {
    "text": "something that we could have put in here delay while Idol equals true or equals anything okay um well actually anything",
    "start": "3781240",
    "end": "3787960"
  },
  {
    "text": "other thing other than false so what that basically means is that if the device is Idle don't deliver the message",
    "start": "3787960",
    "end": "3796400"
  },
  {
    "text": "and by idle it means the screen is not on doesn't mean the device itself may",
    "start": "3796400",
    "end": "3801559"
  },
  {
    "text": "not be on it may even you know device may even have a w clock and they even May maybe something spinning on the",
    "start": "3801559",
    "end": "3807640"
  },
  {
    "text": "device some kind of a background service running maybe it's playing music but the screen is not on and somehow Google c2dm",
    "start": "3807640",
    "end": "3815200"
  },
  {
    "text": "service knows when the screen is on or not on or not again this is part of what",
    "start": "3815200",
    "end": "3820279"
  },
  {
    "text": "Google knows already about us simply because they want you know to deliver optimal user experience across all these",
    "start": "3820279",
    "end": "3826400"
  },
  {
    "text": "other applications of course this has all sorts of privacy issues you can imagine but you know that's how it is so",
    "start": "3826400",
    "end": "3832520"
  },
  {
    "text": "it's up to you whether or not you take advantage of this okay so step two now",
    "start": "3832520",
    "end": "3838680"
  },
  {
    "text": "let's assume there was no delay or even if there was we get now the message",
    "start": "3838680",
    "end": "3843760"
  },
  {
    "text": "makes its way across that persistent connection onto our device it's decrypted from SSL it's somehow",
    "start": "3843760",
    "end": "3850760"
  },
  {
    "text": "extracted and now the in the on our device figures out that this message is",
    "start": "3850760",
    "end": "3856359"
  },
  {
    "text": "for our particular application okay so now we're in the device what happens and this is by the",
    "start": "3856359",
    "end": "3863160"
  },
  {
    "text": "way you know the the the the typ you know this this code is not something that I actually got by getting access to",
    "start": "3863160",
    "end": "3869880"
  },
  {
    "text": "Google source code I'm just kind of giving you more like pseudo code what I think Google is doing in the background",
    "start": "3869880",
    "end": "3875400"
  },
  {
    "text": "okay what first of all it's it seems that intents are coming from this particular you know component whatever",
    "start": "3875400",
    "end": "3883039"
  },
  {
    "text": "this may be okay this is just you know you can find out where the intents are coming from in Android and so what I",
    "start": "3883039",
    "end": "3888599"
  },
  {
    "text": "think this is doing it's creating an intent it's then adding a category to that intent that limits the the receipt",
    "start": "3888599",
    "end": "3897920"
  },
  {
    "text": "or effectively the receipt of that intent to our application and this is just to avoid trying to even consider",
    "start": "3897920",
    "end": "3904279"
  },
  {
    "text": "other applications this is just one of the first measures this doesn't really buy you security it just buys you",
    "start": "3904279",
    "end": "3910359"
  },
  {
    "text": "filtering and this particular category is here because you may not remember but",
    "start": "3910359",
    "end": "3915960"
  },
  {
    "text": "one of the things we did very early on is we said that we categorize these",
    "start": "3915960",
    "end": "3921640"
  },
  {
    "text": "messages or these intents and we put our own package name is the category this is what c2dm requires okay and this is how",
    "start": "3921640",
    "end": "3929680"
  },
  {
    "text": "other applications don't get broken up and they're they're not considered for this message because other applications",
    "start": "3929680",
    "end": "3935520"
  },
  {
    "text": "will receive exactly the same you know in action for their own stuff but",
    "start": "3935520",
    "end": "3941359"
  },
  {
    "text": "they'll since they'll have their own different category they will never see our stuff okay so anyways coming back to",
    "start": "3941359",
    "end": "3948000"
  },
  {
    "text": "this step then what they do they put the data that came from our world right they",
    "start": "3948000",
    "end": "3953160"
  },
  {
    "text": "now take that data and they stick it into the extras of the in and finally they send a broadcast but in",
    "start": "3953160",
    "end": "3959799"
  },
  {
    "text": "the broadcast they require that basically the permission of the rece that sorry that the receiver holds this",
    "start": "3959799",
    "end": "3967000"
  },
  {
    "text": "particular permission in order to receive the broadcast and that was that is the reason why we decare this",
    "start": "3967000",
    "end": "3972119"
  },
  {
    "text": "permission and we use this permission in order be for us to be able to use the you receive this broadcast if you don't",
    "start": "3972119",
    "end": "3978400"
  },
  {
    "text": "know about permissions it's you know again even if you don't fly understand the permissions part if you just follow",
    "start": "3978400",
    "end": "3984079"
  },
  {
    "text": "the the template you'll you generally be able to figure it out quite easily and now hopefully our me Our receiver fires",
    "start": "3984079",
    "end": "3992200"
  },
  {
    "text": "okay so our receiver okay generally will look something like this I don't know what happened to the font on this one",
    "start": "3992200",
    "end": "3998680"
  },
  {
    "text": "but anyways you hopefully will be able to see it so our receiver typically what it will do um actually sorry before we",
    "start": "3998680",
    "end": "4005079"
  },
  {
    "text": "get to a receiver just because part of part of what what a receiver will do is we'll grab a wake clock so how many of",
    "start": "4005079",
    "end": "4010880"
  },
  {
    "text": "you have used wake clogs before two that's it three four how many",
    "start": "4010880",
    "end": "4017200"
  },
  {
    "text": "of you have or know what wake clocks are okay a few",
    "start": "4017200",
    "end": "4023079"
  },
  {
    "text": "more okay then so let me just give you a quick quick quick quick background of",
    "start": "4023079",
    "end": "4028440"
  },
  {
    "text": "wake clock so Android has this very eager power manager that tries to",
    "start": "4028440",
    "end": "4035480"
  },
  {
    "text": "aggressively shut our phone down or turn off the CPU okay because it wants to save the battery so it goes it builds on",
    "start": "4035480",
    "end": "4042799"
  },
  {
    "text": "top of the Linux power management and and it basically creates this idea of we clocks and so what happens is if there",
    "start": "4042799",
    "end": "4049920"
  },
  {
    "text": "are no applications that hold these so-called way clocks which are kernel",
    "start": "4049920",
    "end": "4055400"
  },
  {
    "text": "managed our CPU will shut down now our CPU May spool up again if there's an",
    "start": "4055400",
    "end": "4063319"
  },
  {
    "text": "interrupt that we're interested in and that interrupt wakes up our our CPU and now our CPU candle is interrupt and",
    "start": "4063319",
    "end": "4069160"
  },
  {
    "text": "while it's there he may grab a wake clck and do some processing but generally tries to release its wake locks or the",
    "start": "4069160",
    "end": "4075559"
  },
  {
    "text": "Frameworks try to tries to release the Wake clocks so that it can go back to sleeping as soon as possible so the",
    "start": "4075559",
    "end": "4081599"
  },
  {
    "text": "problem is if we for example let's say you have a background service that has a",
    "start": "4081599",
    "end": "4086880"
  },
  {
    "text": "thread that's spinning in the background well if you don't hold a w clock the fact that that thread may be runnable isn't going to help it because the CPU",
    "start": "4086880",
    "end": "4093359"
  },
  {
    "text": "is going to be you know sleeping and the thread isn't going to run even though the thread itself may not be sleeping",
    "start": "4093359",
    "end": "4098640"
  },
  {
    "text": "like you know you know thread. sleep State simply because you may not have a weight clock so similarly if we go from",
    "start": "4098640",
    "end": "4105000"
  },
  {
    "text": "our application like a broadcast receiver that gets that message go and start some handling of the message but",
    "start": "4105000",
    "end": "4110920"
  },
  {
    "text": "we don't own that we don't actually have a w clock which the prevents device from sleeping that's never going to run",
    "start": "4110920",
    "end": "4117560"
  },
  {
    "text": "actually it will run only if the user is interacting with a device which then keeps the device awake and then it goes",
    "start": "4117560",
    "end": "4122719"
  },
  {
    "text": "and does something right but if the device itself was you know not awake it's just not going to run okay so you",
    "start": "4122719",
    "end": "4129238"
  },
  {
    "text": "need to grab a wake clck if you want something to happen so the problem is I",
    "start": "4129239",
    "end": "4134400"
  },
  {
    "text": "need to share the w clocks from the broadcast receiver which is going to receive the notification and the service",
    "start": "4134400",
    "end": "4141480"
  },
  {
    "text": "which is going to react to that notification at some point in the future okay and the reason I mean that's just",
    "start": "4141480",
    "end": "4148318"
  },
  {
    "text": "fortunately that's how you need to do it and rather than use static fields which I absolutely hate and some other",
    "start": "4148319",
    "end": "4154758"
  },
  {
    "text": "examples on the internet use static Fields I prefer to basically share the way clock through this application",
    "start": "4154759",
    "end": "4161000"
  },
  {
    "text": "object which is implicitly shared as a Singleton across all all components of",
    "start": "4161000",
    "end": "4166120"
  },
  {
    "text": "an Android application it's just how Android works now you may not remember",
    "start": "4166120",
    "end": "4171440"
  },
  {
    "text": "this my app but this my app is basically something I configured way back when I",
    "start": "4171440",
    "end": "4177080"
  },
  {
    "text": "created my Android manifest that I said oh by the way I want my app to be the",
    "start": "4177080",
    "end": "4182359"
  },
  {
    "text": "application okay and as you and everyone has implicit access to the my app okay",
    "start": "4182359",
    "end": "4188400"
  },
  {
    "text": "it's just how Android works so it's a Singleton without you having to actually build it as a Singleton and without you having to use static field or static",
    "start": "4188400",
    "end": "4196159"
  },
  {
    "text": "state so anyway coming back here I have this little app that basically only does",
    "start": "4196159",
    "end": "4203040"
  },
  {
    "text": "and it's also missing one part it basically has internally something called W clock which I forgot to declare",
    "start": "4203040",
    "end": "4209400"
  },
  {
    "text": "here unfortunately and what it does it goes on create talks to the grabs the power manager in front the power manager",
    "start": "4209400",
    "end": "4216520"
  },
  {
    "text": "a grabs a wake clck now grabbing a wake log doesn't actually mean that you acquired it it just sits there okay it",
    "start": "4216520",
    "end": "4224520"
  },
  {
    "text": "then PR provides two methods one is called acquire wake clock another one is called release wake clock and the",
    "start": "4224520",
    "end": "4230159"
  },
  {
    "text": "acquire just goes and says oh by the way if the wake clock is already held don't do anything if the W clock is and return",
    "start": "4230159",
    "end": "4236440"
  },
  {
    "text": "false if the W clock is not held then acquire it and return true and then the the opposite on the other you know on",
    "start": "4236440",
    "end": "4242159"
  },
  {
    "text": "the release hopefully that makes sense okay so you'll see how this gets used in",
    "start": "4242159",
    "end": "4247239"
  },
  {
    "text": "a moment so here's basically how we wow this really looks messed up in this",
    "start": "4247239",
    "end": "4252360"
  },
  {
    "text": "resolution but unfortunately uh basically what we do is we go this is",
    "start": "4252360",
    "end": "4258000"
  },
  {
    "text": "the broadcast receiver which receives the notification now from c2dm okay now we finally get the message where you",
    "start": "4258000",
    "end": "4264560"
  },
  {
    "text": "know the device woke up because c2dm woke it up and now we want to get the message so what we do we've already",
    "start": "4264560",
    "end": "4270560"
  },
  {
    "text": "handled the registration part before I already showed you that before whoops what I do is I basically say oh is this",
    "start": "4270560",
    "end": "4276600"
  },
  {
    "text": "a receive message okay if it is let's say I extract the data that I expect",
    "start": "4276600",
    "end": "4282760"
  },
  {
    "text": "from that message like f one F two or some kind of a you know stock ID or",
    "start": "4282760",
    "end": "4288920"
  },
  {
    "text": "stock code or stock ticker or whatever it may be that you're interested in whatever custom data is there and what I",
    "start": "4288920",
    "end": "4295600"
  },
  {
    "text": "then do is I go and grab my application okay and the way I grab my",
    "start": "4295600",
    "end": "4301679"
  },
  {
    "text": "application is to say context get application context and I cast it into my application that's how you grab",
    "start": "4301679",
    "end": "4307159"
  },
  {
    "text": "effectively applic how that's how you effec to get to your application object which was there right when your",
    "start": "4307159",
    "end": "4312199"
  },
  {
    "text": "application was initiated you then try to acquire the way clock and if you're",
    "start": "4312199",
    "end": "4317239"
  },
  {
    "text": "able to get it you then create an intent which is now going to go and start a",
    "start": "4317239",
    "end": "4324560"
  },
  {
    "text": "separate service which is going to hopefully react to this message because our broadcast receiver is just being",
    "start": "4324560",
    "end": "4330760"
  },
  {
    "text": "notified we don't want to do anything expensive in a broadcast Receiver right we are being we now are notified but we",
    "start": "4330760",
    "end": "4337120"
  },
  {
    "text": "want to do something in response to this notification let's assume that it means go back to our server and download some",
    "start": "4337120",
    "end": "4342679"
  },
  {
    "text": "data from our server like chat history so since we don't want to do it here I'm going back to the idea of using intent",
    "start": "4342679",
    "end": "4349280"
  },
  {
    "text": "services so basically what I do is I create some kind of an intent for some kind of service I put that relevant data",
    "start": "4349280",
    "end": "4357560"
  },
  {
    "text": "into that intent okay and then basically I go and start that",
    "start": "4357560",
    "end": "4363080"
  },
  {
    "text": "service now having acquired the weight clock now in that service this is what",
    "start": "4363080",
    "end": "4368560"
  },
  {
    "text": "my service would look like right if now my service runs it goes and grabs the data that it's interested in maybe does",
    "start": "4368560",
    "end": "4375239"
  },
  {
    "text": "some kind of an HTTP get or HTP post or whatever you know synchronization routine it wishes to trigger in response",
    "start": "4375239",
    "end": "4382440"
  },
  {
    "text": "to that notification and at some point in the future well when it's done it releases the weight clock and now the",
    "start": "4382440",
    "end": "4389320"
  },
  {
    "text": "device can go back to sleep and now we're done that's it the last step we don't",
    "start": "4389320",
    "end": "4396199"
  },
  {
    "text": "see step 10 is that now the Google goes and removes this from the queue so I",
    "start": "4396199",
    "end": "4401639"
  },
  {
    "text": "know there's quite a few components involved here but again the the template is fairly similar I mean you do this",
    "start": "4401639",
    "end": "4407199"
  },
  {
    "text": "once you can replicate a million times it's fairly straightforward in how you go about doing it so the the trick is",
    "start": "4407199",
    "end": "4413400"
  },
  {
    "text": "here there's broadcast receivers that that handle registration there's a broadcast receiver which is actually the",
    "start": "4413400",
    "end": "4419000"
  },
  {
    "text": "same that handles the notification the message itself there's a you know intent service that helps us register with our",
    "start": "4419000",
    "end": "4425800"
  },
  {
    "text": "server and there's an intent service that hopefully does you know does the long work of synchronizing with our data",
    "start": "4425800",
    "end": "4433120"
  },
  {
    "text": "whichever whatever they may be for you that's part is very specific to what you guys care about this is just reaction to",
    "start": "4433120",
    "end": "4439320"
  },
  {
    "text": "the notification part okay so step 10 is you know again Google goes in you know",
    "start": "4439320",
    "end": "4445800"
  },
  {
    "text": "successfully you you know knows that this is been done and removes it from the queue and we're done you know I say",
    "start": "4445800",
    "end": "4452639"
  },
  {
    "text": "here it's as easy as 1 2 3 4 5 6 7 8 9 10 and which seems a lot but like I said",
    "start": "4452639",
    "end": "4457840"
  },
  {
    "text": "it's mostly boiler plate okay um so that's that's basically the the the",
    "start": "4457840",
    "end": "4465159"
  },
  {
    "text": "these are the steps so as far as sending more messages we just go back to step five we now have the off token we have",
    "start": "4465159",
    "end": "4471360"
  },
  {
    "text": "the registration ID we have the the data or the the user identifier for the registration ID we have some more more",
    "start": "4471360",
    "end": "4477760"
  },
  {
    "text": "interesting data for the user we just repeat the steps and that's it that's it",
    "start": "4477760",
    "end": "4483159"
  },
  {
    "text": "the only other little bit is that at any time the Google may decide to re recreate a registration ID for whatever",
    "start": "4483159",
    "end": "4490199"
  },
  {
    "text": "reason so we need to be able to re handle that and then reinform our server that that change but that's not a big",
    "start": "4490199",
    "end": "4496239"
  },
  {
    "text": "deal because our existing infrastructure is going to handle that automatically okay um and then of course we need to",
    "start": "4496239",
    "end": "4502679"
  },
  {
    "text": "worry about what if the client login refuses your login we need to then reauthenticate um there's there there's",
    "start": "4502679",
    "end": "4508920"
  },
  {
    "text": "other problem in that client login can actually if you do too many logins it",
    "start": "4508920",
    "end": "4514440"
  },
  {
    "text": "can actually then try or it can assume that account is being hacked and then it",
    "start": "4514440",
    "end": "4519520"
  },
  {
    "text": "may require that you prove that you're human which would then suck because then you have to have someone actually prove",
    "start": "4519520",
    "end": "4525440"
  },
  {
    "text": "they're human like you know do one of those ctes um so you want to cash this",
    "start": "4525440",
    "end": "4530840"
  },
  {
    "text": "okay um and then you always also have to worry about qua being exceeded and doing",
    "start": "4530840",
    "end": "4536120"
  },
  {
    "text": "this kind of you know exponential backup so now on your on your server side the step that is missing is what if you're",
    "start": "4536120",
    "end": "4542400"
  },
  {
    "text": "unsuccessful in communicating to the c2dm service maybe you got rejected so now you're on your server side you want",
    "start": "4542400",
    "end": "4548600"
  },
  {
    "text": "to cash that message that you were going to send to c2dm so you want to build",
    "start": "4548600",
    "end": "4553960"
  },
  {
    "text": "some kind of a message Q on your server side and that will potentially complicates things depending on how",
    "start": "4553960",
    "end": "4560239"
  },
  {
    "text": "important it is for your clients to receive these messages you may need to do this part it's not that big of a deal",
    "start": "4560239",
    "end": "4565520"
  },
  {
    "text": "you just use a simple database and you you know periodically cycle through it but again then you're doing a cycling",
    "start": "4565520",
    "end": "4570560"
  },
  {
    "text": "but who cares because it's happening on the server side which is not expensive right you're not you have to worry about",
    "start": "4570560",
    "end": "4575600"
  },
  {
    "text": "B battery unregistering is easy if you're if you're your you know client is no longer interested in this they just",
    "start": "4575600",
    "end": "4581560"
  },
  {
    "text": "basically unregistered so they fire and you know effectively start a service with some kind of a special unregister",
    "start": "4581560",
    "end": "4588040"
  },
  {
    "text": "information and again you get back some kind of a on Reed intent through your broadcast receiver that you're",
    "start": "4588040",
    "end": "4593880"
  },
  {
    "text": "unregistered and now what you should do is tell your server that you unregistered so now your server can stop",
    "start": "4593880",
    "end": "4600040"
  },
  {
    "text": "sending messages through c2dm because it's just going to run into errors okay so effectively to summarize",
    "start": "4600040",
    "end": "4606560"
  },
  {
    "text": "it what we want to do is you know we keep the data on our devices fresh right so we want to keep it sync to the world",
    "start": "4606560",
    "end": "4613360"
  },
  {
    "text": "we know that polling sucks because it drains the battery and it affects the",
    "start": "4613360",
    "end": "4618440"
  },
  {
    "text": "the the data like you know in the future we may have these data you know tier data plans so our users are going to be",
    "start": "4618440",
    "end": "4623800"
  },
  {
    "text": "sensitive to how much data we're using maybe you know that kind of data is not as big of a deal but nevertheless if",
    "start": "4623800",
    "end": "4629320"
  },
  {
    "text": "they're roaming it it is a big deal uh we want to use push there are different push meth mechanisms some of which are",
    "start": "4629320",
    "end": "4636800"
  },
  {
    "text": "like SMS you know maybe simpler quick and dirty but you know potentially",
    "start": "4636800",
    "end": "4641920"
  },
  {
    "text": "expensive um we could use our own persistent connection which is kind of what Google does but we",
    "start": "4641920",
    "end": "4647880"
  },
  {
    "text": "can't share it and basically it's not trivial to implement both on the client side as well on the server side it's",
    "start": "4647880",
    "end": "4653639"
  },
  {
    "text": "extremely expensive to scale and so given that Google already does c2dm",
    "start": "4653639",
    "end": "4659199"
  },
  {
    "text": "whether we like it or not it's already there we might as well leverage it you know amortise the cost of that",
    "start": "4659199",
    "end": "4665120"
  },
  {
    "text": "connection across all the different applications so leverage that connection and basically just you know go and use",
    "start": "4665120",
    "end": "4671000"
  },
  {
    "text": "it and we get all these Advanced features like you know the the queuing so it tries you know there there's this",
    "start": "4671000",
    "end": "4677000"
  },
  {
    "text": "best effort delivery uh we have the collapse Keys delay while while while idle the atation uh and so forth and so",
    "start": "4677000",
    "end": "4684360"
  },
  {
    "text": "forth the only the only big negative I would say is that it's still in the labs so it's still not 100% clear as to how",
    "start": "4684360",
    "end": "4692120"
  },
  {
    "text": "exactly you can use it in production and not run into quot problems that's what some of the you know you guys can talk",
    "start": "4692120",
    "end": "4698199"
  },
  {
    "text": "more about so um that's basically my my summar uh let's uh let's just quickly go",
    "start": "4698199",
    "end": "4704440"
  },
  {
    "text": "over some uh some code just for you to kind of get a sense for how this all works",
    "start": "4704440",
    "end": "4710920"
  },
  {
    "text": "um again there there are number of number of steps along the way so first of all let me show you the Manifest file",
    "start": "4710920",
    "end": "4718719"
  },
  {
    "text": "and I'm going to open it up hopefully this is big enough you guys can see so this application again it's you know",
    "start": "4718719",
    "end": "4724080"
  },
  {
    "text": "here I actually have something called yam application that I use for for implementing a lot of sharable business",
    "start": "4724080",
    "end": "4730120"
  },
  {
    "text": "logic if you will although they shouldn't really be here but that's one one simple way to share it um I have",
    "start": "4730120",
    "end": "4736880"
  },
  {
    "text": "something called uh Timeline Activity actually it's not even that's this is a timeline activi is really really what",
    "start": "4736880",
    "end": "4743000"
  },
  {
    "text": "displays my messages I have something called the fetch service which fetches the data or the or the the timeline",
    "start": "4743000",
    "end": "4750120"
  },
  {
    "text": "which is basically my my tweets for my friends tweets right it fetches it from",
    "start": "4750120",
    "end": "4755280"
  },
  {
    "text": "the from my server and the c2dm registration service which effectively",
    "start": "4755280",
    "end": "4760440"
  },
  {
    "text": "handles the registrations um and handles the the the",
    "start": "4760440",
    "end": "4765719"
  },
  {
    "text": "on registrations now it seems kind of weird why the heck do I have a service that handle handles the registrations",
    "start": "4765719",
    "end": "4771760"
  },
  {
    "text": "and you'll see in a moment that there these can also be long running operations and then I have the receiver",
    "start": "4771760",
    "end": "4777600"
  },
  {
    "text": "this is what we talked about this is basically the c2dm component specifically the c2dm this is requires",
    "start": "4777600",
    "end": "4784080"
  },
  {
    "text": "that the c2dm be the one that sends the sends basically these uh these intents",
    "start": "4784080",
    "end": "4790480"
  },
  {
    "text": "and it filters It Out by basically using my own package name okay um and finally",
    "start": "4790480",
    "end": "4797520"
  },
  {
    "text": "over here I Define my own permission right it's comm. marakana android. whatever this is my package name and",
    "start": "4797520",
    "end": "4804440"
  },
  {
    "text": "then this part is required by c2dm they construct this permission string you",
    "start": "4804440",
    "end": "4811159"
  },
  {
    "text": "know at some point in the future when they send a message okay so let me let me hold on",
    "start": "4811159",
    "end": "4816480"
  },
  {
    "text": "let's see if I can scroll this up I can't well here now you can see it okay",
    "start": "4816480",
    "end": "4822679"
  },
  {
    "text": "does that make sense cool and then you also see that I have these uh I have a couple of things like",
    "start": "4822679",
    "end": "4828480"
  },
  {
    "text": "internet uh we clock and the receive permission and I happen to also have the",
    "start": "4828480",
    "end": "4833600"
  },
  {
    "text": "vibrate for whatever reason okay my phone vibrates I guess when it receives new messages so now that I have this",
    "start": "4833600",
    "end": "4839000"
  },
  {
    "text": "done let me show you my uh this particular c2dm receiver which is kind",
    "start": "4839000",
    "end": "4844199"
  },
  {
    "text": "of the core of c2dm uh well I guess just before we get there um first of all",
    "start": "4844199",
    "end": "4849840"
  },
  {
    "text": "let's come back to how the user triggers the registration right so the user what I do is they let me go and remind you",
    "start": "4849840",
    "end": "4856159"
  },
  {
    "text": "they go over here they open up the menu they launch the preferences and in the preferences they check this off or on",
    "start": "4856159",
    "end": "4863120"
  },
  {
    "text": "let's assume it was off okay so now actually what's going to happen is that this is going to get unregistered okay",
    "start": "4863120",
    "end": "4869679"
  },
  {
    "text": "so I'm now actually no longer registered on server so let's now actually trigger the registration so I click on this",
    "start": "4869679",
    "end": "4874840"
  },
  {
    "text": "little button clicking on that button notice involve you know there's a bunch of things that happen in the background",
    "start": "4874840",
    "end": "4881120"
  },
  {
    "text": "okay so let's see what are those things that happen in the background the first thing that well is basically is this on",
    "start": "4881120",
    "end": "4887400"
  },
  {
    "text": "shared preference changed fires this is just how Android handles preference and",
    "start": "4887400",
    "end": "4892560"
  },
  {
    "text": "changes to preferences this is just has nothing to do with c2dm it's just a mechanism that I use okay and what I do",
    "start": "4892560",
    "end": "4898880"
  },
  {
    "text": "is I say okay we did the preference that change equal to the whatever preference",
    "start": "4898880",
    "end": "4904960"
  },
  {
    "text": "my in my case it's like enable push and if the push is in fact enabled I'm going",
    "start": "4904960",
    "end": "4910040"
  },
  {
    "text": "to actually go and start a service which I call doesn't it's kind of seems Anonymous but it's register action and",
    "start": "4910040",
    "end": "4917960"
  },
  {
    "text": "then also have something called start service unregister action if they need to register or unregister um I should have really do",
    "start": "4917960",
    "end": "4924920"
  },
  {
    "text": "done this as an explicit intent rather than an implicit one because this opens it up for security issues but you know",
    "start": "4924920",
    "end": "4932600"
  },
  {
    "text": "given that really that's not the focus I guess you know at some point I'll I'll improve this let me show you this registration service okay this",
    "start": "4932600",
    "end": "4939480"
  },
  {
    "text": "registration service basically there's the register action",
    "start": "4939480",
    "end": "4944960"
  },
  {
    "text": "now the register action basically goes and calls this method register for c2dm",
    "start": "4944960",
    "end": "4950679"
  },
  {
    "text": "now this method is down below and it basically goes and grabs this Twitter",
    "start": "4950679",
    "end": "4956520"
  },
  {
    "text": "client um from the app doesn't even matter it's some client that's already authenticated and now the problem is I",
    "start": "4956520",
    "end": "4963639"
  },
  {
    "text": "want to make this app open source and I want to make this app available to you guys if you want to use it with your own",
    "start": "4963639",
    "end": "4969719"
  },
  {
    "text": "status.net implementation so and I don't want you to be to use my hard coded",
    "start": "4969719",
    "end": "4974920"
  },
  {
    "text": "email address that I use to register for this right so what I made what I one of the features of the plugin is that I",
    "start": "4974920",
    "end": "4981679"
  },
  {
    "text": "made it possible for the app to get the actual email address that it will use to",
    "start": "4981679",
    "end": "4988239"
  },
  {
    "text": "register with to DM from the server itself so this is one extra step that normally it's not necessary if you're",
    "start": "4988239",
    "end": "4994480"
  },
  {
    "text": "building your own app you're not going to you know make flexible you can hard code email address right into the app",
    "start": "4994480",
    "end": "5000600"
  },
  {
    "text": "okay so my first step is I use basically the Twitter to grab its own HTTP client",
    "start": "5000600",
    "end": "5006400"
  },
  {
    "text": "and then I effectively do a simple HTTP get which goes to the Twitter route which is some URL that somehow somewhere",
    "start": "5006400",
    "end": "5013520"
  },
  {
    "text": "configured and it goes and says c2dm get email and what this does it returns an",
    "start": "5013520",
    "end": "5019600"
  },
  {
    "text": "email address that's it so effectively what I can do is show you what this",
    "start": "5019600",
    "end": "5025120"
  },
  {
    "text": "would do is I can come over here and type API SL get email it going to it's",
    "start": "5025120",
    "end": "5030719"
  },
  {
    "text": "going to Pro require their login um and I log in and basically sure remember",
    "start": "5030719",
    "end": "5037880"
  },
  {
    "text": "the password and here's the email that happens to be the email address that I will use in some point in the future for",
    "start": "5037880",
    "end": "5043760"
  },
  {
    "text": "these messages okay again not a required step then what I do since this is a long",
    "start": "5043760",
    "end": "5050800"
  },
  {
    "text": "running operation by the way notice that all of this happens in an on handle intent within an intent service meaning",
    "start": "5050800",
    "end": "5057320"
  },
  {
    "text": "this runs in a separate thread so it's not affecting the UI okay and so what I",
    "start": "5057320",
    "end": "5063320"
  },
  {
    "text": "do then is I go down here blah blah blah blah blah and I say okay now that I have the response I can basically go over",
    "start": "5063320",
    "end": "5070679"
  },
  {
    "text": "here and request my c2dm registration this is the part it's like I said boiler",
    "start": "5070679",
    "end": "5076800"
  },
  {
    "text": "plate I literally go and stick the sender which is that response whatever",
    "start": "5076800",
    "end": "5082600"
  },
  {
    "text": "you know that email I stick it basically in this thing called you know sender I put this pending intent which is",
    "start": "5082600",
    "end": "5088000"
  },
  {
    "text": "basically the identifier of my application and then I start a service for this registration intent and then",
    "start": "5088000",
    "end": "5094040"
  },
  {
    "text": "I'm done I return now at some point in the future okay the c2dm registration",
    "start": "5094040",
    "end": "5100800"
  },
  {
    "text": "will actually kick in what that will what will then happen is the c2dm is",
    "start": "5100800",
    "end": "5105880"
  },
  {
    "text": "going to over here let me show you effectively trigger one of these",
    "start": "5105880",
    "end": "5112480"
  },
  {
    "text": "registration intents and that's going to go to my c2dm receiver so now let's see",
    "start": "5112480",
    "end": "5118080"
  },
  {
    "text": "what my c2dm receiver does so the c2dm receiver basically handles that that",
    "start": "5118080",
    "end": "5124679"
  },
  {
    "text": "broadcast message in its on receive and it's kind of simple well kind of simple",
    "start": "5124679",
    "end": "5129719"
  },
  {
    "text": "it goes and says okay is the action the registration action if so let's go and",
    "start": "5129719",
    "end": "5134960"
  },
  {
    "text": "handle it okay so how do I handle it and the way I handle it is I grab the registration ID I grab error I grab",
    "start": "5134960",
    "end": "5141800"
  },
  {
    "text": "unregistered if it's Error I know that it's an error I disable push somehow I disable the checkbox which actually is",
    "start": "5141800",
    "end": "5147520"
  },
  {
    "text": "broken right now I need to fix it then if it's unregistered I handle the unregistration which I'll explain later",
    "start": "5147520",
    "end": "5154840"
  },
  {
    "text": "if I if my registration ID is not null that means that it's exceeded I'm registered and now I need to tell my",
    "start": "5154840",
    "end": "5160480"
  },
  {
    "text": "server server that I registered and so what I do here is I basically and I",
    "start": "5160480",
    "end": "5166000"
  },
  {
    "text": "should really grab a way clock I'm assuming that the user is still interacting with the device and this is very you know the device is not sleeping",
    "start": "5166000",
    "end": "5173560"
  },
  {
    "text": "which is not a good assumption but nevertheless you know it's one a little limitation so what I do is I basically",
    "start": "5173560",
    "end": "5180159"
  },
  {
    "text": "create another intent called complete registration which basically puts this reg this this",
    "start": "5180159",
    "end": "5188280"
  },
  {
    "text": "whatever registration ID into this into the service intent and starts a",
    "start": "5188280",
    "end": "5193480"
  },
  {
    "text": "service so now from the broadcast receiver where I can't do anything expensive I go back to this registration",
    "start": "5193480",
    "end": "5201119"
  },
  {
    "text": "service now what it's going on is that this uh complete register action is",
    "start": "5201119",
    "end": "5207239"
  },
  {
    "text": "being triggered right and know it's kind of weird because we're going back and forth from the broadcast receiver to",
    "start": "5207239",
    "end": "5212880"
  },
  {
    "text": "service back to broadcast receiver back to service and so the complete registration action goes over here it's",
    "start": "5212880",
    "end": "5219080"
  },
  {
    "text": "called complete c2dm registration and what that does in my case okay it goes",
    "start": "5219080",
    "end": "5224639"
  },
  {
    "text": "and puts in some kind of a whatever map registration ID it implicitly knows on",
    "start": "5224639",
    "end": "5232639"
  },
  {
    "text": "the server side what my user ID is because this is going to be an authenticated request and here's what I",
    "start": "5232639",
    "end": "5238320"
  },
  {
    "text": "do I simply go and to the Twitter I say Twitter please post to the server side a",
    "start": "5238320",
    "end": "5244600"
  },
  {
    "text": "message called c2dm register with effectively ID equals the registration",
    "start": "5244600",
    "end": "5251639"
  },
  {
    "text": "ID I'm not explicitly passing the user ID nor the device ID because this is an",
    "start": "5251639",
    "end": "5258639"
  },
  {
    "text": "authenticated request so implicitly my user ID is being fed into this",
    "start": "5258639",
    "end": "5266000"
  },
  {
    "text": "message okay now let me show you what happens on the server side this is now",
    "start": "5266000",
    "end": "5272119"
  },
  {
    "text": "where I jump to a little bit of PHP code again I know may some of you may not be PHP developers but that's how it is so",
    "start": "5272119",
    "end": "5277880"
  },
  {
    "text": "the PHP code looks like this okay whoops that's not what I meant to do um this is",
    "start": "5277880",
    "end": "5284199"
  },
  {
    "text": "what happens when you resize so it basically goes and there's some",
    "start": "5284199",
    "end": "5290760"
  },
  {
    "text": "plugin that I created and this plugin basically defines a whole bunch of you know what this is way too big sorry let",
    "start": "5290760",
    "end": "5297119"
  },
  {
    "text": "me just change this to 14 so I can actually or 12 is this can you guys see",
    "start": "5297119",
    "end": "5302920"
  },
  {
    "text": "this big enough the text yeah okay I'll",
    "start": "5302920",
    "end": "5308159"
  },
  {
    "text": "assume it is um and so basically what happens is that um this plug-in runs",
    "start": "5308159",
    "end": "5315639"
  },
  {
    "text": "somehow the you know this register action converts into some register",
    "start": "5315639",
    "end": "5320880"
  },
  {
    "text": "action which runs in some other PHP class called a action and basically it",
    "start": "5320880",
    "end": "5326639"
  },
  {
    "text": "this method or you know method runs called handle and it figures out that",
    "start": "5326639",
    "end": "5332040"
  },
  {
    "text": "their action is called register and and basically what it does it says whoops um",
    "start": "5332040",
    "end": "5338400"
  },
  {
    "text": "it says user c2dm register which passes the user ID and the registration ID and",
    "start": "5338400",
    "end": "5344480"
  },
  {
    "text": "so now this user c2dm registration basically what it does it goes and says",
    "start": "5344480",
    "end": "5349560"
  },
  {
    "text": "register and it first checks for whether whether this registration already exists",
    "start": "5349560",
    "end": "5355119"
  },
  {
    "text": "okay I'll explain where this is checked and if it does if it does you know if it",
    "start": "5355119",
    "end": "5360480"
  },
  {
    "text": "you know uses it if it doesn't it creates a new registration it sets up the the user ID sets up the registration",
    "start": "5360480",
    "end": "5367440"
  },
  {
    "text": "ID and then inserts it into the database and that's it so basically on the server",
    "start": "5367440",
    "end": "5372840"
  },
  {
    "text": "side completing the registration just means save the user ID and the registration",
    "start": "5372840",
    "end": "5378360"
  },
  {
    "text": "ID okay that's it now as far as the table on the server side that actually hand",
    "start": "5378360",
    "end": "5385040"
  },
  {
    "text": "handles this it looks like this so in fact this is on my server site itself so",
    "start": "5385040",
    "end": "5391239"
  },
  {
    "text": "if I log in okay so let me actually show you what",
    "start": "5391239",
    "end": "5397520"
  },
  {
    "text": "the table looks like um whoops",
    "start": "5397520",
    "end": "5403000"
  },
  {
    "text": "um sorry so um that",
    "start": "5403000",
    "end": "5410119"
  },
  {
    "text": "select star from user c2dm okay and in fact you can see in",
    "start": "5410119",
    "end": "5419000"
  },
  {
    "text": "fact like this desk user c2dm this is just a table so it takes two Fields a",
    "start": "5419000",
    "end": "5424560"
  },
  {
    "text": "user ID and registration ID I mean there could be other state in there but this is it okay that's that's on the server",
    "start": "5424560",
    "end": "5431400"
  },
  {
    "text": "side you don't need to know my SQL to hopefully understand that you know how relational databases work with respect",
    "start": "5431400",
    "end": "5437800"
  },
  {
    "text": "to saving some data okay now the currently I have just one little thing",
    "start": "5437800",
    "end": "5443360"
  },
  {
    "text": "called user ID 3 and this registration ID okay uh in fact what I'm going to do is I'm going to delete from uh from user",
    "start": "5443360",
    "end": "5451880"
  },
  {
    "text": "c2dm okay done I don't I don't have anything right now and so now what I'm",
    "start": "5451880",
    "end": "5457000"
  },
  {
    "text": "going to do is on the on the client actually I already registered unregistered so now I'm going to on the",
    "start": "5457000",
    "end": "5462440"
  },
  {
    "text": "client going to register again so you can you'll see hopefully that this is going to be inserted so I'm going to click on this guy okay that should then",
    "start": "5462440",
    "end": "5471000"
  },
  {
    "text": "complete the registration take the registration ID from C to DM and tell my server of this",
    "start": "5471000",
    "end": "5477159"
  },
  {
    "text": "registration ID and now my server should remember the ID of my user as well as registration ID so if I go back here and",
    "start": "5477159",
    "end": "5483360"
  },
  {
    "text": "select stuff are here it is okay so that's all that happens on the server",
    "start": "5483360",
    "end": "5488800"
  },
  {
    "text": "side now at some point in the future somebody goes over here and says Okay I",
    "start": "5488800",
    "end": "5495760"
  },
  {
    "text": "want to post a new message and I say you know does it work you know will it push",
    "start": "5495760",
    "end": "5503239"
  },
  {
    "text": "and you click on send and basically what this should do I guess there someone",
    "start": "5503239",
    "end": "5508400"
  },
  {
    "text": "called Charlie Sheen um or at some point it should um sometimes it's it's a little",
    "start": "5508400",
    "end": "5514159"
  },
  {
    "text": "slow to show up uh but basically gets posted so now one of the things that my c2dm plugin does is that it reacts to",
    "start": "5514159",
    "end": "5522080"
  },
  {
    "text": "these sorts of posts and the way it does so is in this in this action I have have this little Handler or sorry in this",
    "start": "5522080",
    "end": "5528080"
  },
  {
    "text": "plugin I have this little handle called on and notice save web it doesn't really matter basically this fires whenever a",
    "start": "5528080",
    "end": "5535760"
  },
  {
    "text": "new notice is posted by anyone on the world on the site and so what this does it goes and says okay for this notice",
    "start": "5535760",
    "end": "5544600"
  },
  {
    "text": "figure out who are all the users who are subscribed basically on this notice that should be notified of this notice and",
    "start": "5544600",
    "end": "5551639"
  },
  {
    "text": "this is effectively doing a long select statement against my database okay so",
    "start": "5551639",
    "end": "5557400"
  },
  {
    "text": "it's effectively doing this select user blah blah blah you know figure it out and it gets the the registration IDs of",
    "start": "5557400",
    "end": "5565600"
  },
  {
    "text": "all those users okay and then what it does it",
    "start": "5565600",
    "end": "5570679"
  },
  {
    "text": "literally Loops through the registration IDs oops actually it grabs the token",
    "start": "5570679",
    "end": "5576360"
  },
  {
    "text": "from Lo from Google and the way that does it's just a HTTP post it does an HTTP post using basically my email and",
    "start": "5576360",
    "end": "5584440"
  },
  {
    "text": "my password these come from some configured location and basically you know parses out the Au part and Returns",
    "start": "5584440",
    "end": "5593719"
  },
  {
    "text": "the Au part so now over here I have the token I do a loop for all the",
    "start": "5593719",
    "end": "5599400"
  },
  {
    "text": "registration IDs of all the users that may be interested in this and I send each one of them a c2dm",
    "start": "5599400",
    "end": "5606320"
  },
  {
    "text": "notification okay now the sending of the c2dm notification is basically implemented over here again it's an HTTP",
    "start": "5606320",
    "end": "5613840"
  },
  {
    "text": "post to this URL I'm passing the registration ID the collapse key which in my case is always called notification",
    "start": "5613840",
    "end": "5620199"
  },
  {
    "text": "and the data access is called Fetch timeline some arbitrary name value field and I basically and oh by the way I also",
    "start": "5620199",
    "end": "5626440"
  },
  {
    "text": "put in the authorization hether right again I know this is PHP code don't worry about that you know as long as you",
    "start": "5626440",
    "end": "5632440"
  },
  {
    "text": "understand this is an HTTP post and at some point I just check for that there are no errors if there are no",
    "start": "5632440",
    "end": "5638880"
  },
  {
    "text": "errors I and I get 200 I know I'm good again I should be handling you know",
    "start": "5638880",
    "end": "5644159"
  },
  {
    "text": "those retries and this and that but this is just to show you what happens and so now that a message was",
    "start": "5644159",
    "end": "5651040"
  },
  {
    "text": "sent through c2dm how do I actually receive it on my side okay so on my side",
    "start": "5651040",
    "end": "5656639"
  },
  {
    "text": "in Java so on my application okay so what happens again coming back to the Manifest is that this",
    "start": "5656639",
    "end": "5665000"
  },
  {
    "text": "event fires receive again to the same receiver the receiver now gets that",
    "start": "5665000",
    "end": "5672400"
  },
  {
    "text": "message so here's basic whoops c2dm receiver um which is over here it gets",
    "start": "5672400",
    "end": "5679440"
  },
  {
    "text": "the message and the message is you got a receive you got mail right and I do have",
    "start": "5679440",
    "end": "5685199"
  },
  {
    "text": "something called handle message so my handle message is extremely kind of small what it does this is assume that",
    "start": "5685199",
    "end": "5692600"
  },
  {
    "text": "basically I got my message it goes and fetches that little thing that I call you know whatever I call it this data",
    "start": "5692600",
    "end": "5699360"
  },
  {
    "text": "action basically means action and I check that it equals to fetch timeline and this is basically what was put in",
    "start": "5699360",
    "end": "5706520"
  },
  {
    "text": "here data action equals fetch timeline I just a little arbitrary check it's not even necessary and what I do is if",
    "start": "5706520",
    "end": "5713840"
  },
  {
    "text": "that's equal I grab a away clock or try to grab a away clock and I start a",
    "start": "5713840",
    "end": "5719080"
  },
  {
    "text": "service which fetches the timeline this is the service that goes back to my server and does an HTTP get to pull down",
    "start": "5719080",
    "end": "5727040"
  },
  {
    "text": "all my friends posts that that I have never seen before right that part is up",
    "start": "5727040",
    "end": "5732560"
  },
  {
    "text": "to you that's where you actually hand notification and of course the only catch is that in this fetch timeline",
    "start": "5732560",
    "end": "5738920"
  },
  {
    "text": "service the one thing I do is after I've done my fetching of the timeline and",
    "start": "5738920",
    "end": "5745320"
  },
  {
    "text": "after I've sent all notifications and this is by the way notification inside of the app like the the status bar",
    "start": "5745320",
    "end": "5751760"
  },
  {
    "text": "notification what I do is I released the we clock so now the device can go back to sleep in the meantime I posted a low",
    "start": "5751760",
    "end": "5759679"
  },
  {
    "text": "notification into the status bar of the phone and to this notification I also",
    "start": "5759679",
    "end": "5765679"
  },
  {
    "text": "you know attached like a little you know lights and vibrates so like if the user really cared about it their phone would",
    "start": "5765679",
    "end": "5772159"
  },
  {
    "text": "vibrate so they would know not to unlock it and go and see you know that they have new tweets okay but that completes",
    "start": "5772159",
    "end": "5778320"
  },
  {
    "text": "the picture of course their unregistration process is just as similar unregistration process literally goes and basically grabs the the the",
    "start": "5778320",
    "end": "5786199"
  },
  {
    "text": "message or sorry takes the the goes to you know c2dm service un registers",
    "start": "5786199",
    "end": "5791880"
  },
  {
    "text": "handles the unregistration event goes back to my server and tells my server unregister and my server goes and deletes the ID from the server from the",
    "start": "5791880",
    "end": "5799000"
  },
  {
    "text": "server side and that's it so I know there's a lot of code I",
    "start": "5799000",
    "end": "5805199"
  },
  {
    "text": "know I jumped around a lot uh but this is why it's so you know it's yours to download you can kind of it's open",
    "start": "5805199",
    "end": "5810840"
  },
  {
    "text": "source so download it check it out now I guess what we should do is um let's see",
    "start": "5810840",
    "end": "5816159"
  },
  {
    "text": "if there are any questions specific to what I covered that are kind of just at a high level um and then what we're",
    "start": "5816159",
    "end": "5822360"
  },
  {
    "text": "going to do is we're going to uh basically invite um folks from well I guess David from uh Lookout to share",
    "start": "5822360",
    "end": "5829320"
  },
  {
    "text": "some of his thoughts or his experiences with using c2dm with their application",
    "start": "5829320",
    "end": "5835320"
  },
  {
    "text": "and then we're going to answer more questions like more broader questions just want to see if there are any more",
    "start": "5835320",
    "end": "5840719"
  },
  {
    "text": "like framework questions that are that you know you guys you have regarding",
    "start": "5840719",
    "end": "5846000"
  },
  {
    "text": "this um that's a great question are there any testing Frameworks unfortunately I've only been able to you",
    "start": "5846000",
    "end": "5852239"
  },
  {
    "text": "know test this because it requires quite a elaborate infrastructure on the on the on the server side uh with basically a",
    "start": "5852239",
    "end": "5859000"
  },
  {
    "text": "emulator connected to the to the to the you know ethernet to the you know outside world so you can still use the",
    "start": "5859000",
    "end": "5865080"
  },
  {
    "text": "same Android testing framework based on junit which effectivly drives your UI and drives your application and drives",
    "start": "5865080",
    "end": "5871159"
  },
  {
    "text": "all of this but the ulator itself needs have access to access to the to the c2dm",
    "start": "5871159",
    "end": "5876360"
  },
  {
    "text": "infrastructure um but it can be done through the emulator you don't need to do it on the device right you could go and say you",
    "start": "5876360",
    "end": "5883320"
  },
  {
    "text": "know c2dm you you can say Target version you know Target SDK version 8 minimum",
    "start": "5883320",
    "end": "5889639"
  },
  {
    "text": "SDK version five or and then you know and then test for it and then if it's not supported it's not supported then",
    "start": "5889639",
    "end": "5895960"
  },
  {
    "text": "maybe you can resort to some other mechanism certainly sorry po um yes you could do",
    "start": "5895960",
    "end": "5902599"
  },
  {
    "text": "that uh ultimately because you're not referencing AP any apis directly rather",
    "start": "5902599",
    "end": "5908560"
  },
  {
    "text": "you're doing it effectively in in you know symbolically it's not it should",
    "start": "5908560",
    "end": "5914000"
  },
  {
    "text": "work I've never tried it but I'm assuming it would work that said Google has said that they will not backport",
    "start": "5914000",
    "end": "5919239"
  },
  {
    "text": "this to previous versions of the Android platform other",
    "start": "5919239",
    "end": "5924360"
  },
  {
    "text": "questions okay so fair enough so thank you for um you know hopefully you'll",
    "start": "5926080",
    "end": "5931760"
  },
  {
    "text": "learned something we're going to invite uh David and uh then we're going to go over some you know some some some more",
    "start": "5931760",
    "end": "5937199"
  },
  {
    "text": "of his U experiences so I'm Dave gbec um",
    "start": "5937199",
    "end": "5942400"
  },
  {
    "text": "a principal software engineer at local Lookout Mobile Security what we're doing is antivirus and security for",
    "start": "5942400",
    "end": "5950280"
  },
  {
    "text": "smartphones so uh why do we care about C2 c2dm well we want to be able to get",
    "start": "5950280",
    "end": "5959040"
  },
  {
    "text": "in contact with devices very rapidly say users lost their phone we want to be able to lock that phone we want to be",
    "start": "5959040",
    "end": "5965639"
  },
  {
    "text": "able to wipe it we want to be able to scream relocate uh in a very fast manner",
    "start": "5965639",
    "end": "5971880"
  },
  {
    "text": "you know if somebody potentially has stolen it the delay of waiting for the",
    "start": "5971880",
    "end": "5977960"
  },
  {
    "text": "phone to randomly check in would be far too long also like if we have a new",
    "start": "5977960",
    "end": "5983440"
  },
  {
    "text": "antivirus definition that we need to get out to phones rapidly you want to get",
    "start": "5983440",
    "end": "5988840"
  },
  {
    "text": "tell them okay come and check in and finally hey user",
    "start": "5988840",
    "end": "5995280"
  },
  {
    "text": "wants to back up or restore let's do it right now uh in",
    "start": "5995280",
    "end": "6000920"
  },
  {
    "text": "general everything Sasa said absolutely amazing it was a great talk and all the",
    "start": "6000920",
    "end": "6006639"
  },
  {
    "text": "design decisions that he talked about were ones that we went through as well uh we too use c2m just as a signaling",
    "start": "6006639",
    "end": "6015280"
  },
  {
    "text": "service we it's basically one bit protocol for us connect and that's it uh",
    "start": "6015280",
    "end": "6022360"
  },
  {
    "text": "you can use up to to a k of payload in there but then you have to build in security you have to build in a lot of",
    "start": "6022360",
    "end": "6028920"
  },
  {
    "text": "other stuff and it's simpler uh just to",
    "start": "6028920",
    "end": "6034760"
  },
  {
    "text": "say connect and then handle all of your authentication and messaging at that",
    "start": "6034760",
    "end": "6042000"
  },
  {
    "text": "point okay so I'll first talk a little bit about our server side architecture",
    "start": "6042000",
    "end": "6047480"
  },
  {
    "text": "so uh our servers are a rupon rails stack we are",
    "start": "6047480",
    "end": "6053760"
  },
  {
    "text": "we currently have 5 million customers each um we have about a million to two",
    "start": "6053760",
    "end": "6059920"
  },
  {
    "text": "million devices connecting to our server every day we are doing tens of thousands",
    "start": "6059920",
    "end": "6066159"
  },
  {
    "text": "of locates Screams wipes each day so we have a lot of",
    "start": "6066159",
    "end": "6072040"
  },
  {
    "text": "traffic going in out of this what we do have done is we have a service oriented",
    "start": "6072040",
    "end": "6077560"
  },
  {
    "text": "architecture on the server side uh and we've built this around something called redis and rescue uh redus is a memory",
    "start": "6077560",
    "end": "6085840"
  },
  {
    "text": "store uh it sort of combines the best th parts of",
    "start": "6085840",
    "end": "6091199"
  },
  {
    "text": "mcash and a nosql uh solution where it's very fast you can get hundreds and",
    "start": "6091199",
    "end": "6098080"
  },
  {
    "text": "hundreds of thousands of transactions per second um very lightweight um but it",
    "start": "6098080",
    "end": "6103639"
  },
  {
    "text": "also gives you uh some structured data sets and rescue is a delayed job system",
    "start": "6103639",
    "end": "6112560"
  },
  {
    "text": "built on top of of it and the reason we have this is it answers a lot of the uh",
    "start": "6112560",
    "end": "6118360"
  },
  {
    "text": "questions that Sasa mentioned about uh doing back offs you can send something",
    "start": "6118360",
    "end": "6124719"
  },
  {
    "text": "out the worker goes to sleep whenever you get a response back if you have a",
    "start": "6124719",
    "end": "6130239"
  },
  {
    "text": "success okay that worker is done if it says back off oh I'll just reschedule",
    "start": "6130239",
    "end": "6135639"
  },
  {
    "text": "myself for next back off um period if it fails um you can say oh",
    "start": "6135639",
    "end": "6143679"
  },
  {
    "text": "okay I better switch to another signaling mechanism um and so this gives us a very",
    "start": "6143679",
    "end": "6149800"
  },
  {
    "text": "simple architecture for handling all these things and it means that we can",
    "start": "6149800",
    "end": "6155880"
  },
  {
    "text": "handle you know you throw um 10,000 outgoing requests and redis is like oh",
    "start": "6155880",
    "end": "6163440"
  },
  {
    "text": "yeah no problem 10,000 um I'm still",
    "start": "6163440",
    "end": "6169199"
  },
  {
    "text": "sleepy okay everything here is is you need to",
    "start": "6169199",
    "end": "6174679"
  },
  {
    "text": "build failover into um your design expect ctdm to fail expect the client um",
    "start": "6174679",
    "end": "6184080"
  },
  {
    "text": "to be unhappy just expect to get errors back from um",
    "start": "6184080",
    "end": "6189599"
  },
  {
    "text": "Google we have a very robust failover system and it gets used very often so uh",
    "start": "6189599",
    "end": "6198239"
  },
  {
    "text": "first level is ctdm as also mentioned when it's available it's it's great it",
    "start": "6198239",
    "end": "6204639"
  },
  {
    "text": "tends to be very fast it tends to be uh reliable but a it's not going to be there all the",
    "start": "6204639",
    "end": "6212480"
  },
  {
    "text": "time and B it is going to fail sometimes so going on to those other mechanisms",
    "start": "6212480",
    "end": "6218920"
  },
  {
    "text": "they talked about we built that uh pers persistent connection mechanism and we",
    "start": "6218920",
    "end": "6225360"
  },
  {
    "text": "use that where uh ctdm is not available and I'll talk about when that happens",
    "start": "6225360",
    "end": "6230679"
  },
  {
    "text": "and then we fall back on SMS we use folio and click tell to send out smss",
    "start": "6230679",
    "end": "6236440"
  },
  {
    "text": "yes it's expensive yes it's slow yes it has its own share of reliability",
    "start": "6236440",
    "end": "6242280"
  },
  {
    "text": "problems especially when you go International but you're going to fall back there because everything else is",
    "start": "6242280",
    "end": "6248639"
  },
  {
    "text": "going to fail and then you better have your clients check in periodically to the server on their own um regard",
    "start": "6248639",
    "end": "6256560"
  },
  {
    "text": "because sometimes your clients are just not going to um respond to anything else and",
    "start": "6256560",
    "end": "6265360"
  },
  {
    "text": "it's it's unfortunate but that's the way it is okay so first when can you use",
    "start": "6265360",
    "end": "6272159"
  },
  {
    "text": "ctdm so we as I said 5 million users Android 2.2 and above is only",
    "start": "6272159",
    "end": "6279480"
  },
  {
    "text": "61% of the devices out there so you have 40% of your phones that just can't use",
    "start": "6279480",
    "end": "6287599"
  },
  {
    "text": "ctdm then you have um some per of your devices that are aren't Google",
    "start": "6287599",
    "end": "6293639"
  },
  {
    "text": "experienced devices or the user never created never um put in a real uh",
    "start": "6293639",
    "end": "6300440"
  },
  {
    "text": "account and so what we found is down at the bottom here uh 2.2 deves about 91%",
    "start": "6300440",
    "end": "6307880"
  },
  {
    "text": "of them actually got uh ctdm tokens um 2.2x 93 92 and a halfish percent there's",
    "start": "6307880",
    "end": "6317360"
  },
  {
    "text": "still you know a decent Chunk in there that uh don't ever have CDM tokens and",
    "start": "6317360",
    "end": "6324320"
  },
  {
    "text": "we don't really know why um we've sort of investigated a bit about this",
    "start": "6324320",
    "end": "6329960"
  },
  {
    "text": "but just be prepared that it's not always going to be there don't if um",
    "start": "6329960",
    "end": "6335800"
  },
  {
    "text": "unless you're going to build that into your Market requirements and uh be prepared to accept the feedback when",
    "start": "6335800",
    "end": "6342920"
  },
  {
    "text": "this doesn't work just expect in advance that you're going to have to build in other mechanisms as",
    "start": "6342920",
    "end": "6349639"
  },
  {
    "text": "well okay uh get and C to tokens",
    "start": "6349639",
    "end": "6355280"
  },
  {
    "text": "so when you're registering on the device expect it to fail so uh down here",
    "start": "6355280",
    "end": "6363400"
  },
  {
    "text": "at the bottom you can see oh shoot this is a little bit small and not um basically",
    "start": "6363400",
    "end": "6371199"
  },
  {
    "text": "about 50% of the time the registration succeeds about 40% of the time service",
    "start": "6371199",
    "end": "6378599"
  },
  {
    "text": "not available about 11% of the time authentication failed",
    "start": "6378599",
    "end": "6383880"
  },
  {
    "text": "uh and this is just part of what happens and you're going to have to uh retry it",
    "start": "6383880",
    "end": "6390960"
  },
  {
    "text": "other things when you first try and get your tokens on the device they may not",
    "start": "6390960",
    "end": "6396679"
  },
  {
    "text": "be there when your app starts up and it uh asks for the",
    "start": "6396679",
    "end": "6401960"
  },
  {
    "text": "tokens sometimes it's going to say no and they're going to show up at a later date and again we don't really know why",
    "start": "6401960",
    "end": "6409679"
  },
  {
    "text": "but uh each time you launch you should look for those tokens and be prepared to",
    "start": "6409679",
    "end": "6416480"
  },
  {
    "text": "send them to the server um sometimes you know when they first start up your app",
    "start": "6416480",
    "end": "6422679"
  },
  {
    "text": "they're going to be running say 21 and then at a later date they're going to get an automatic update from their",
    "start": "6422679",
    "end": "6430480"
  },
  {
    "text": "carrier they'll be on two two finally they start gain tokens be prepared to accept it at a later date other than",
    "start": "6430480",
    "end": "6436719"
  },
  {
    "text": "when your app starts the first time or something like that um",
    "start": "6436719",
    "end": "6443280"
  },
  {
    "text": "and then um you can see here we've been graphing when we get these tokens over time you know when a major device is",
    "start": "6443280",
    "end": "6451920"
  },
  {
    "text": "updated um to froo you suddenly get this whole surge of devices saying hey here's",
    "start": "6451920",
    "end": "6457119"
  },
  {
    "text": "some tokens here's some tokens um we are still in the process of rolling this out um as s said there's a",
    "start": "6457119",
    "end": "6466360"
  },
  {
    "text": "lot of questions about uh what Google is going to say for um",
    "start": "6466360",
    "end": "6471840"
  },
  {
    "text": "services start talking to them early if you plan on using this at scale you know",
    "start": "6471840",
    "end": "6477239"
  },
  {
    "text": "um we've started months ago talking about",
    "start": "6477239",
    "end": "6482280"
  },
  {
    "text": "okay let's talk about quotas is this feasible and they're um they will be",
    "start": "6482280",
    "end": "6487960"
  },
  {
    "text": "responsive but the answers may not be as entirely complete and um built out as",
    "start": "6487960",
    "end": "6495639"
  },
  {
    "text": "they will be in another year um I unfortunately don't have the stats on",
    "start": "6495639",
    "end": "6501000"
  },
  {
    "text": "what the request time or average response times are right now um in",
    "start": "6501000",
    "end": "6508119"
  },
  {
    "text": "probably another two weeks we'll have better stats this is something that we're actually in the process uh we're",
    "start": "6508119",
    "end": "6514320"
  },
  {
    "text": "doing a phase roll out um and switching over some of our services to this from",
    "start": "6514320",
    "end": "6520199"
  },
  {
    "text": "the lookout um persistent connection and SMS services that we've talked about",
    "start": "6520199",
    "end": "6525880"
  },
  {
    "text": "this talk came sort of a little bit earlier than we were expecting to be talking about this but that's the way",
    "start": "6525880",
    "end": "6531880"
  },
  {
    "text": "these things go so um hopefully in a couple weeks we'll be able to send out",
    "start": "6531880",
    "end": "6536960"
  },
  {
    "text": "some data about what the average response times are um we have a lot of",
    "start": "6536960",
    "end": "6542880"
  },
  {
    "text": "stats and analytics around that um but everything we've seen thus far says that",
    "start": "6542880",
    "end": "6551119"
  },
  {
    "text": "um at small scales you get very prompt responses and um but you are going to",
    "start": "6551119",
    "end": "6558239"
  },
  {
    "text": "see a lot of errors and so just build that error handling in uh and then Kevin",
    "start": "6558239",
    "end": "6563920"
  },
  {
    "text": "had uh some of the tools Kevin is our C CTO and he um has some tools he used",
    "start": "6563920",
    "end": "6572239"
  },
  {
    "text": "When developing this uh so what you're seeing right here is uh the c2dm uh",
    "start": "6572239",
    "end": "6577840"
  },
  {
    "text": "debugger web app that uh uh we built in order to test our c2dm deployment",
    "start": "6577840",
    "end": "6582960"
  },
  {
    "text": "because when you're developing this it's really easy to be able to throw a token in a web app uh type in your message and",
    "start": "6582960",
    "end": "6589199"
  },
  {
    "text": "uh play with parameters instead of having to write some software uh this is available",
    "start": "6589199",
    "end": "6595119"
  },
  {
    "text": "at uh c2dm order terms.com so anyone can use this uh the caveats are that you do",
    "start": "6595119",
    "end": "6601560"
  },
  {
    "text": "need to uh register to receive c2dm events from c2dm higherorder terms.com",
    "start": "6601560",
    "end": "6607159"
  },
  {
    "text": "it's an email address so please please please please don't put this in a production app because anybody who",
    "start": "6607159",
    "end": "6613440"
  },
  {
    "text": "visits this website can send uh pushes to your device but um if you want to try",
    "start": "6613440",
    "end": "6619639"
  },
  {
    "text": "this while you're developing a c2d map um everyone is welcome to do it and it's online so um this is you know very very",
    "start": "6619639",
    "end": "6627480"
  },
  {
    "text": "very Alpha so if you encounter bugs send me an email and I'll try to fix them but um don't expect this to be production",
    "start": "6627480",
    "end": "6634320"
  },
  {
    "text": "ready but if you're just playing around with c2dm and want to get something running really really easily without having to write the whole server side",
    "start": "6634320",
    "end": "6639760"
  },
  {
    "text": "yourself and this is a really easy way to get started thank you uh thanks guys appreciate",
    "start": "6639760",
    "end": "6646239"
  },
  {
    "text": "it so [Music]",
    "start": "6646880",
    "end": "6654050"
  }
]