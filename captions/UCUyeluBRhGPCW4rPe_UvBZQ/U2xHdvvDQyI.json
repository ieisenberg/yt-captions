[
  {
    "text": "uh how Discord stores trillions of",
    "start": "799",
    "end": "4759"
  },
  {
    "text": "messages this is actually pretty",
    "start": "4759",
    "end": "6120"
  },
  {
    "text": "exciting let's see let's find out I'm",
    "start": "6120",
    "end": "7960"
  },
  {
    "text": "actually curious about that I I have not",
    "start": "7960",
    "end": "9400"
  },
  {
    "text": "read this this seems exciting can we all",
    "start": "9400",
    "end": "12200"
  },
  {
    "text": "agree this could be exciting in 2017 we",
    "start": "12200",
    "end": "14440"
  },
  {
    "text": "wrote a bro post about how we store",
    "start": "14440",
    "end": "15839"
  },
  {
    "text": "billions of messages check made atheist",
    "start": "15839",
    "end": "18640"
  },
  {
    "text": "we shared of our journey and how we",
    "start": "18640",
    "end": "20199"
  },
  {
    "text": "let's he started out using mongod DB oh",
    "start": "20199",
    "end": "23840"
  },
  {
    "text": "and then migrated to Cassandra because",
    "start": "23840",
    "end": "25439"
  },
  {
    "text": "we were looking for databases that were",
    "start": "25439",
    "end": "26920"
  },
  {
    "text": "scalable fault tolerant and relatively",
    "start": "26920",
    "end": "28640"
  },
  {
    "text": "low maintenance we knew we'd be growing",
    "start": "28640",
    "end": "31000"
  },
  {
    "text": "and we did okay good I like it we wanted",
    "start": "31000",
    "end": "34640"
  },
  {
    "text": "a database That Grew alongside us but",
    "start": "34640",
    "end": "36440"
  },
  {
    "text": "hopefully its maintenance wouldn't grow",
    "start": "36440",
    "end": "38079"
  },
  {
    "text": "alongside our storage needs",
    "start": "38079",
    "end": "39360"
  },
  {
    "text": "unfortunately we found that not to be",
    "start": "39360",
    "end": "40559"
  },
  {
    "text": "our case our Cassandra clusters",
    "start": "40559",
    "end": "42039"
  },
  {
    "text": "exhibited serious performance issues",
    "start": "42039",
    "end": "43480"
  },
  {
    "text": "that required increasing amounts of",
    "start": "43480",
    "end": "44760"
  },
  {
    "text": "efforts just to maintain not and proof I",
    "start": "44760",
    "end": "46920"
  },
  {
    "text": "I would love to hear more about that cuz",
    "start": "46920",
    "end": "48840"
  },
  {
    "text": "you know I don't know a lot about",
    "start": "48840",
    "end": "50079"
  },
  {
    "text": "Cassandra other than it's like that",
    "start": "50079",
    "end": "51440"
  },
  {
    "text": "eyeball with like a little ching for its",
    "start": "51440",
    "end": "54359"
  },
  {
    "text": "logo but that's all I know about",
    "start": "54359",
    "end": "58039"
  },
  {
    "text": "it Netflix uses Cass ra for some stuff",
    "start": "58039",
    "end": "62120"
  },
  {
    "text": "or did maybe they've changed I have no",
    "start": "62120",
    "end": "64119"
  },
  {
    "text": "idea I've never actually used",
    "start": "64119",
    "end": "66400"
  },
  {
    "text": "Cassandra it could be fun though",
    "start": "66400",
    "end": "68720"
  },
  {
    "text": "eventually consistent I feel like you",
    "start": "68720",
    "end": "70920"
  },
  {
    "text": "know that programmers are humans 2",
    "start": "70920",
    "end": "72720"
  },
  {
    "text": "Channel where they do like interview",
    "start": "72720",
    "end": "74280"
  },
  {
    "text": "with the senior JS person be great to",
    "start": "74280",
    "end": "76240"
  },
  {
    "text": "have a database guy on there and he just",
    "start": "76240",
    "end": "77880"
  },
  {
    "text": "says the term eventually consistent like",
    "start": "77880",
    "end": "79560"
  },
  {
    "text": "17 times great almost six years later",
    "start": "79560",
    "end": "82240"
  },
  {
    "text": "we've changed a lot and how we store",
    "start": "82240",
    "end": "84240"
  },
  {
    "text": "messages as well okay AR Cassandra",
    "start": "84240",
    "end": "85920"
  },
  {
    "text": "troubles well look at that looks like he",
    "start": "85920",
    "end": "87759"
  },
  {
    "text": "looks like it was right there the whole",
    "start": "87759",
    "end": "89079"
  },
  {
    "text": "time I should have just read forward a",
    "start": "89079",
    "end": "90320"
  },
  {
    "text": "little bit all right we store messages",
    "start": "90320",
    "end": "92399"
  },
  {
    "text": "in a database called Cassandra messages",
    "start": "92399",
    "end": "95000"
  },
  {
    "text": "as its name suggest it ran Cassandra and",
    "start": "95000",
    "end": "97280"
  },
  {
    "text": "stored",
    "start": "97280",
    "end": "99560"
  },
  {
    "text": "messages thank you for thank you for",
    "start": "111320",
    "end": "113600"
  },
  {
    "text": "saying that to me I'm just happy I read",
    "start": "113600",
    "end": "115399"
  },
  {
    "text": "that out loud in 2017 we ran 12",
    "start": "115399",
    "end": "117680"
  },
  {
    "text": "Cassandra noes storing billions of",
    "start": "117680",
    "end": "119000"
  },
  {
    "text": "messages at the beginning of 2022 we had",
    "start": "119000",
    "end": "121719"
  },
  {
    "text": "177 nodes with trillions of messages to",
    "start": "121719",
    "end": "124520"
  },
  {
    "text": "our",
    "start": "124520",
    "end": "126399"
  },
  {
    "text": "shagrin it was a high toil",
    "start": "126399",
    "end": "130679"
  },
  {
    "text": "system you know what never thought in 10",
    "start": "132800",
    "end": "136560"
  },
  {
    "text": "years I'd re I had read this sentence",
    "start": "136560",
    "end": "138959"
  },
  {
    "text": "honestly if you asked chat GPT to say",
    "start": "138959",
    "end": "141959"
  },
  {
    "text": "what what sentence would Prime not think",
    "start": "141959",
    "end": "144480"
  },
  {
    "text": "of it wouldn't even come up with this to",
    "start": "144480",
    "end": "146680"
  },
  {
    "text": "our s grin it was a h toil system this",
    "start": "146680",
    "end": "149040"
  },
  {
    "text": "sounds like something somebody would",
    "start": "149040",
    "end": "150800"
  },
  {
    "text": "write in like the 1700s or on call team",
    "start": "150800",
    "end": "154160"
  },
  {
    "text": "was frequently paged for issues with the",
    "start": "154160",
    "end": "155879"
  },
  {
    "text": "database latency was unpredictable and",
    "start": "155879",
    "end": "157800"
  },
  {
    "text": "we were having to cut down on",
    "start": "157800",
    "end": "159200"
  },
  {
    "text": "maintenance operations that became too",
    "start": "159200",
    "end": "160959"
  },
  {
    "text": "expensive to run all right what was",
    "start": "160959",
    "end": "163840"
  },
  {
    "text": "causing these issues first let's take a",
    "start": "163840",
    "end": "165519"
  },
  {
    "text": "look at our messages all right oh this",
    "start": "165519",
    "end": "167480"
  },
  {
    "text": "is",
    "start": "167480",
    "end": "168400"
  },
  {
    "text": "exciting uh the cql statement above is a",
    "start": "168400",
    "end": "171280"
  },
  {
    "text": "minimal version of our message schema",
    "start": "171280",
    "end": "173120"
  },
  {
    "text": "every ID we use is a snowflake oh gosh",
    "start": "173120",
    "end": "176120"
  },
  {
    "text": "we all know no one likes snowflakes okay",
    "start": "176120",
    "end": "179159"
  },
  {
    "text": "nobody likes snow snowflakes they're",
    "start": "179159",
    "end": "180440"
  },
  {
    "text": "always",
    "start": "180440",
    "end": "181640"
  },
  {
    "text": "complaining always making it Chron",
    "start": "181640",
    "end": "184920"
  },
  {
    "text": "chronologically",
    "start": "184920",
    "end": "187599"
  },
  {
    "text": "sortable we partitioned our messages by",
    "start": "188120",
    "end": "190599"
  },
  {
    "text": "the channel they're sent in along with a",
    "start": "190599",
    "end": "192640"
  },
  {
    "text": "bucket which is a static time window",
    "start": "192640",
    "end": "195360"
  },
  {
    "text": "this partitioning means that in",
    "start": "195360",
    "end": "197040"
  },
  {
    "text": "Cassandra all messages for a given",
    "start": "197040",
    "end": "198599"
  },
  {
    "text": "Channel and bucket will be stored",
    "start": "198599",
    "end": "200360"
  },
  {
    "text": "together and replicated across three",
    "start": "200360",
    "end": "202040"
  },
  {
    "text": "nodes or whatever you've replic uh set",
    "start": "202040",
    "end": "204120"
  },
  {
    "text": "the replication Factor okay within this",
    "start": "204120",
    "end": "207000"
  },
  {
    "text": "partitioning lies the potential",
    "start": "207000",
    "end": "208280"
  },
  {
    "text": "performance Pitfall a with just a small",
    "start": "208280",
    "end": "210760"
  },
  {
    "text": "group of friends tends to send uh orders",
    "start": "210760",
    "end": "213120"
  },
  {
    "text": "of magnitude fewer messages than a",
    "start": "213120",
    "end": "214720"
  },
  {
    "text": "server with hundreds of thousands of",
    "start": "214720",
    "end": "218159"
  },
  {
    "text": "people it's true it's true statement",
    "start": "219720",
    "end": "222040"
  },
  {
    "text": "can't argue it honestly uh in Cassandra",
    "start": "222040",
    "end": "224680"
  },
  {
    "text": "reads are more expensive than",
    "start": "224680",
    "end": "228280"
  },
  {
    "text": "rights I didn't know",
    "start": "234360",
    "end": "237920"
  },
  {
    "text": "that it can't seem like this would have",
    "start": "238200",
    "end": "240360"
  },
  {
    "text": "been an obvious issue going on here wrs",
    "start": "240360",
    "end": "243319"
  },
  {
    "text": "are appended to a commit log and written",
    "start": "243319",
    "end": "245959"
  },
  {
    "text": "uh to an inmemory structure called a mem",
    "start": "245959",
    "end": "248200"
  },
  {
    "text": "table that is eventually flushed to dis",
    "start": "248200",
    "end": "249799"
  },
  {
    "text": "reads however need to query the M table",
    "start": "249799",
    "end": "252040"
  },
  {
    "text": "in potentially multiple SS SS tables on",
    "start": "252040",
    "end": "255439"
  },
  {
    "text": "disk files a more expensive operation",
    "start": "255439",
    "end": "258440"
  },
  {
    "text": "lots of concurrent reads as a user",
    "start": "258440",
    "end": "260160"
  },
  {
    "text": "interacts with servers can hotspot a",
    "start": "260160",
    "end": "262079"
  },
  {
    "text": "partition which is referred to",
    "start": "262079",
    "end": "264520"
  },
  {
    "text": "imaginatively as a hot",
    "start": "264520",
    "end": "266960"
  },
  {
    "text": "partition okay personal pet peeve I",
    "start": "266960",
    "end": "269440"
  },
  {
    "text": "never ever correct somebody on English",
    "start": "269440",
    "end": "271240"
  },
  {
    "text": "but I'm not going to lie to you the",
    "start": "271240",
    "end": "273160"
  },
  {
    "text": "period outside the quotation marks",
    "start": "273160",
    "end": "275160"
  },
  {
    "text": "drives me nuts okay I am like the worst",
    "start": "275160",
    "end": "278400"
  },
  {
    "text": "at English and writing but when I know",
    "start": "278400",
    "end": "281880"
  },
  {
    "text": "something like that should happen you",
    "start": "281880",
    "end": "284039"
  },
  {
    "text": "should be in you should feel bad about",
    "start": "284039",
    "end": "286120"
  },
  {
    "text": "yourself uh the size of our data set",
    "start": "286120",
    "end": "288680"
  },
  {
    "text": "when combined with the access patterns",
    "start": "288680",
    "end": "290120"
  },
  {
    "text": "led to struggles for our",
    "start": "290120",
    "end": "291680"
  },
  {
    "text": "clusters um it is the worst English rule",
    "start": "291680",
    "end": "294400"
  },
  {
    "text": "it is it pains me every time but I do it",
    "start": "294400",
    "end": "297280"
  },
  {
    "text": "I do it every time and I hate it all",
    "start": "297280",
    "end": "299240"
  },
  {
    "text": "right when we encounter a hot partition",
    "start": "299240",
    "end": "301840"
  },
  {
    "text": "Oh Daddy Daddy loves hot",
    "start": "301840",
    "end": "305840"
  },
  {
    "text": "partition [ __ ] uh it frequently affected",
    "start": "305840",
    "end": "309360"
  },
  {
    "text": "latency across our entire database",
    "start": "309360",
    "end": "311120"
  },
  {
    "text": "cluster one channel and bucket pair",
    "start": "311120",
    "end": "313320"
  },
  {
    "text": "received a large amount of traffic and",
    "start": "313320",
    "end": "314800"
  },
  {
    "text": "latency in the node would increase as",
    "start": "314800",
    "end": "316440"
  },
  {
    "text": "the node tried harder and harder to",
    "start": "316440",
    "end": "317960"
  },
  {
    "text": "serve traffic and fell further and",
    "start": "317960",
    "end": "319520"
  },
  {
    "text": "further behind what a tryhard don't be a",
    "start": "319520",
    "end": "321919"
  },
  {
    "text": "tryhard everyone knows not to be a",
    "start": "321919",
    "end": "325160"
  },
  {
    "text": "tryhard other queries to this node were",
    "start": "325240",
    "end": "327400"
  },
  {
    "text": "affected as the node couldn't keep up",
    "start": "327400",
    "end": "329400"
  },
  {
    "text": "say we perform reads and writs with",
    "start": "329400",
    "end": "332199"
  },
  {
    "text": "Quorum consistency levels all queries to",
    "start": "332199",
    "end": "335319"
  },
  {
    "text": "the node that serve the hot partition",
    "start": "335319",
    "end": "337400"
  },
  {
    "text": "suffer latency increases resulting in",
    "start": "337400",
    "end": "339560"
  },
  {
    "text": "bro broader end user",
    "start": "339560",
    "end": "343240"
  },
  {
    "text": "impact I feel like they've already said",
    "start": "343600",
    "end": "346080"
  },
  {
    "text": "this are we rehearing the same thing",
    "start": "346080",
    "end": "347800"
  },
  {
    "text": "again is that what was happening here",
    "start": "347800",
    "end": "350039"
  },
  {
    "text": "what's going on here cluster maintenance",
    "start": "350039",
    "end": "351759"
  },
  {
    "text": "tasks also frequently cause troubles we",
    "start": "351759",
    "end": "353840"
  },
  {
    "text": "were prone to falling behind on",
    "start": "353840",
    "end": "355400"
  },
  {
    "text": "compactions where Cassandra would",
    "start": "355400",
    "end": "356880"
  },
  {
    "text": "compact compact compact I think you can",
    "start": "356880",
    "end": "359800"
  },
  {
    "text": "called compact I somehow tried to make",
    "start": "359800",
    "end": "361400"
  },
  {
    "text": "it into some sort of like",
    "start": "361400",
    "end": "363199"
  },
  {
    "text": "action incorrectly I put the wrong",
    "start": "363199",
    "end": "366240"
  },
  {
    "text": "emphasis on the wrong salel um for more",
    "start": "366240",
    "end": "369280"
  },
  {
    "text": "performant reads not only are reads then",
    "start": "369280",
    "end": "371400"
  },
  {
    "text": "more expensive but we'd also be seeing",
    "start": "371400",
    "end": "373400"
  },
  {
    "text": "Cass or cascading latency as the node",
    "start": "373400",
    "end": "376319"
  },
  {
    "text": "tries to",
    "start": "376319",
    "end": "378080"
  },
  {
    "text": "compact wait compact",
    "start": "378080",
    "end": "381440"
  },
  {
    "text": "compact I am reading this I have just",
    "start": "381440",
    "end": "383880"
  },
  {
    "text": "I've reached like visual satiation on",
    "start": "383880",
    "end": "386440"
  },
  {
    "text": "the word compact uh we frequently",
    "start": "386440",
    "end": "388800"
  },
  {
    "text": "performed an oper we called the gossip",
    "start": "388800",
    "end": "390919"
  },
  {
    "text": "dance ooh where we take a node out of",
    "start": "390919",
    "end": "393520"
  },
  {
    "text": "the rotation to let it compact compact",
    "start": "393520",
    "end": "395919"
  },
  {
    "text": "compact without taking traffic bring it",
    "start": "395919",
    "end": "398560"
  },
  {
    "text": "back in pick up the hints from",
    "start": "398560",
    "end": "400199"
  },
  {
    "text": "Cassandra's hinted handoff and then",
    "start": "400199",
    "end": "401680"
  },
  {
    "text": "repeat until the compaction backlog was",
    "start": "401680",
    "end": "404280"
  },
  {
    "text": "emptied we also spent a large amount of",
    "start": "404280",
    "end": "406800"
  },
  {
    "text": "time tuning the jvm's garbage collector",
    "start": "406800",
    "end": "408639"
  },
  {
    "text": "in Heap settings because GC pauses would",
    "start": "408639",
    "end": "411319"
  },
  {
    "text": "significantly or would cause significant",
    "start": "411319",
    "end": "413720"
  },
  {
    "text": "latency Spikes all right come on I hope",
    "start": "413720",
    "end": "415800"
  },
  {
    "text": "it's rust is it rust our message cluster",
    "start": "415800",
    "end": "419280"
  },
  {
    "text": "was our only Cassandra databases we had",
    "start": "419280",
    "end": "421599"
  },
  {
    "text": "several other clusters uh and exhibited",
    "start": "421599",
    "end": "424240"
  },
  {
    "text": "similar uh though perhaps not as severe",
    "start": "424240",
    "end": "426759"
  },
  {
    "text": "false okay okay this is getting exciting",
    "start": "426759",
    "end": "430120"
  },
  {
    "text": "people here we go this is where we're",
    "start": "430120",
    "end": "431960"
  },
  {
    "text": "going to mention rust here we go I'm",
    "start": "431960",
    "end": "433560"
  },
  {
    "text": "ready for some Rust in our previous",
    "start": "433560",
    "end": "435479"
  },
  {
    "text": "iteration of this post we mentioned",
    "start": "435479",
    "end": "437919"
  },
  {
    "text": "being intrigued by Sila is that",
    "start": "437919",
    "end": "440680"
  },
  {
    "text": "pronounced Sila or skila skila or is it",
    "start": "440680",
    "end": "444360"
  },
  {
    "text": "Sila uh DB a Cassandra compatible",
    "start": "444360",
    "end": "447000"
  },
  {
    "text": "database written in",
    "start": "447000",
    "end": "450680"
  },
  {
    "text": "C++ I am visibly agitated right",
    "start": "459280",
    "end": "464800"
  },
  {
    "text": "now this is a plot twist no one wanted",
    "start": "465560",
    "end": "468479"
  },
  {
    "text": "okay no one wanted this plot twist all",
    "start": "468479",
    "end": "471199"
  },
  {
    "text": "right it's it's promise of a better",
    "start": "471199",
    "end": "472599"
  },
  {
    "text": "performance faster repair stronger",
    "start": "472599",
    "end": "474479"
  },
  {
    "text": "workload of isolation via its Shard per",
    "start": "474479",
    "end": "478120"
  },
  {
    "text": "core AR architecture you know when I",
    "start": "478120",
    "end": "479960"
  },
  {
    "text": "first heard the term Shard I thought the",
    "start": "479960",
    "end": "481319"
  },
  {
    "text": "person said shart and I just felt a lot",
    "start": "481319",
    "end": "484800"
  },
  {
    "text": "of feelings and I was trying not to",
    "start": "484800",
    "end": "486639"
  },
  {
    "text": "laugh and I was in a meeting and you",
    "start": "486639",
    "end": "490440"
  },
  {
    "text": "know but somehow I'm more Disturbed at",
    "start": "490440",
    "end": "492759"
  },
  {
    "text": "the fact that I just heard C++ okay I",
    "start": "492759",
    "end": "494680"
  },
  {
    "text": "just",
    "start": "494680",
    "end": "495720"
  },
  {
    "text": "heard C+ gosh a garbage collection free",
    "start": "495720",
    "end": "499800"
  },
  {
    "text": "life sounds quite appealing although",
    "start": "499800",
    "end": "502919"
  },
  {
    "text": "syla is the definitely not void of",
    "start": "502919",
    "end": "505800"
  },
  {
    "text": "issues it is void of garbage collector",
    "start": "505800",
    "end": "508120"
  },
  {
    "text": "since it's written in rust minus minus",
    "start": "508120",
    "end": "510759"
  },
  {
    "text": "rather than Java historically our team",
    "start": "510759",
    "end": "512599"
  },
  {
    "text": "has many issues with the garbage",
    "start": "512599",
    "end": "514039"
  },
  {
    "text": "collection on Cassandra from GC pauses",
    "start": "514039",
    "end": "516440"
  },
  {
    "text": "affecting latency all the way to super",
    "start": "516440",
    "end": "518039"
  },
  {
    "text": "long consecutive GC pauses that got so",
    "start": "518039",
    "end": "520279"
  },
  {
    "text": "bad that on an that an operator would",
    "start": "520279",
    "end": "522719"
  },
  {
    "text": "have to manually reboot and babysit the",
    "start": "522719",
    "end": "524800"
  },
  {
    "text": "node in question back to",
    "start": "524800",
    "end": "528080"
  },
  {
    "text": "health damn imagine being on call at 1:",
    "start": "529320",
    "end": "532800"
  },
  {
    "text": "in the morning and you are restarting a",
    "start": "532800",
    "end": "535080"
  },
  {
    "text": "Cassandra node in",
    "start": "535080",
    "end": "538440"
  },
  {
    "text": "production oh imagine how bad that would",
    "start": "538440",
    "end": "541920"
  },
  {
    "text": "be waiting for it to start back up do",
    "start": "541920",
    "end": "545279"
  },
  {
    "text": "all the sinking oh my goodness these",
    "start": "545279",
    "end": "549240"
  },
  {
    "text": "issues were a huge source of on call",
    "start": "549240",
    "end": "551279"
  },
  {
    "text": "toil there's that toil word",
    "start": "551279",
    "end": "553399"
  },
  {
    "text": "again uh and the root of many stability",
    "start": "553399",
    "end": "556040"
  },
  {
    "text": "issues within our message cluster after",
    "start": "556040",
    "end": "558200"
  },
  {
    "text": "experimenting with Sila DB and observing",
    "start": "558200",
    "end": "560640"
  },
  {
    "text": "improvements and testing we made a",
    "start": "560640",
    "end": "562079"
  },
  {
    "text": "decision to migrate all of our D all of",
    "start": "562079",
    "end": "564079"
  },
  {
    "text": "our databases while the decision could",
    "start": "564079",
    "end": "566320"
  },
  {
    "text": "be a blog post in of itself the short",
    "start": "566320",
    "end": "568320"
  },
  {
    "text": "version of that by 2020 we had migrated",
    "start": "568320",
    "end": "571040"
  },
  {
    "text": "every database but one to silid DB the",
    "start": "571040",
    "end": "573560"
  },
  {
    "text": "last one our friend Cassandra",
    "start": "573560",
    "end": "578279"
  },
  {
    "text": "messages that [ __ ] how how dare you",
    "start": "582200",
    "end": "585640"
  },
  {
    "text": "Cassandra messages uh why hadn't we",
    "start": "585640",
    "end": "587959"
  },
  {
    "text": "migrated yet well to start with it's a",
    "start": "587959",
    "end": "590160"
  },
  {
    "text": "big ass cluster would some people call",
    "start": "590160",
    "end": "592680"
  },
  {
    "text": "that a",
    "start": "592680",
    "end": "595720"
  },
  {
    "text": "cluster that's what I would have said",
    "start": "596160",
    "end": "598040"
  },
  {
    "text": "right there okay",
    "start": "598040",
    "end": "600000"
  },
  {
    "text": "uh with trillions of messages and nearly",
    "start": "600000",
    "end": "602839"
  },
  {
    "text": "200 nodes any migration was going to be",
    "start": "602839",
    "end": "605160"
  },
  {
    "text": "an involved effort additionally we",
    "start": "605160",
    "end": "607560"
  },
  {
    "text": "wanted to make sure our new database",
    "start": "607560",
    "end": "609160"
  },
  {
    "text": "could be the best it could be with uh as",
    "start": "609160",
    "end": "611480"
  },
  {
    "text": "we worked to tune its performance we",
    "start": "611480",
    "end": "613600"
  },
  {
    "text": "also wanted to gain more experience with",
    "start": "613600",
    "end": "615079"
  },
  {
    "text": "silb in production using it in anger and",
    "start": "615079",
    "end": "617920"
  },
  {
    "text": "learning its",
    "start": "617920",
    "end": "620519"
  },
  {
    "text": "pitfalls",
    "start": "622240",
    "end": "624800"
  },
  {
    "text": "what what the hell did I just read",
    "start": "624800",
    "end": "629720"
  },
  {
    "text": "what's using something in Anger can",
    "start": "633200",
    "end": "635000"
  },
  {
    "text": "someone just tell me like normally I use",
    "start": "635000",
    "end": "638160"
  },
  {
    "text": "cobal as like my thing I use in Anger",
    "start": "638160",
    "end": "641880"
  },
  {
    "text": "um I can't say is",
    "start": "641880",
    "end": "645240"
  },
  {
    "text": "this what is",
    "start": "645240",
    "end": "647880"
  },
  {
    "text": "this any we wanted to to gain more",
    "start": "647880",
    "end": "650320"
  },
  {
    "text": "experience with silent DB in production",
    "start": "650320",
    "end": "651880"
  },
  {
    "text": "using it in anger and learning its",
    "start": "651880",
    "end": "653800"
  },
  {
    "text": "pitfalls",
    "start": "653800",
    "end": "656800"
  },
  {
    "text": "oh my goodness we were suspicious that",
    "start": "660480",
    "end": "662839"
  },
  {
    "text": "slapping a new database on our system",
    "start": "662839",
    "end": "664600"
  },
  {
    "text": "wasn't going to make everything",
    "start": "664600",
    "end": "665720"
  },
  {
    "text": "magically better hot partitions can",
    "start": "665720",
    "end": "667720"
  },
  {
    "text": "still be a thing in silb and so we also",
    "start": "667720",
    "end": "669600"
  },
  {
    "text": "wanted to invest improving our systems",
    "start": "669600",
    "end": "671160"
  },
  {
    "text": "Upstream of the database to help shield",
    "start": "671160",
    "end": "672920"
  },
  {
    "text": "and facilitate better database",
    "start": "672920",
    "end": "674240"
  },
  {
    "text": "performance okay okay with Cassandra we",
    "start": "674240",
    "end": "677720"
  },
  {
    "text": "struggled on hot partitions high traffic",
    "start": "677720",
    "end": "679720"
  },
  {
    "text": "to a given partition resulted in",
    "start": "679720",
    "end": "681200"
  },
  {
    "text": "unbounded concurrency leading to",
    "start": "681200",
    "end": "682680"
  },
  {
    "text": "cascading latency in which subsequent",
    "start": "682680",
    "end": "684440"
  },
  {
    "text": "queries would continue to grow in",
    "start": "684440",
    "end": "686040"
  },
  {
    "text": "latency if we could control the amount",
    "start": "686040",
    "end": "687920"
  },
  {
    "text": "of concurrent traffic to partitions we",
    "start": "687920",
    "end": "690240"
  },
  {
    "text": "could protect the database from being",
    "start": "690240",
    "end": "693800"
  },
  {
    "text": "overwhelmed I have no idea what they're",
    "start": "696200",
    "end": "698160"
  },
  {
    "text": "even trying to say right now all I know",
    "start": "698160",
    "end": "699519"
  },
  {
    "text": "is I'm getting hot and bothered by it uh",
    "start": "699519",
    "end": "701720"
  },
  {
    "text": "let's see to accomplish this task we",
    "start": "701720",
    "end": "703040"
  },
  {
    "text": "wrote what we refer to as data services",
    "start": "703040",
    "end": "705399"
  },
  {
    "text": "intermediary services that sit between",
    "start": "705399",
    "end": "707200"
  },
  {
    "text": "our API monolith and our database",
    "start": "707200",
    "end": "709040"
  },
  {
    "text": "clusters please tell me you called it",
    "start": "709040",
    "end": "711360"
  },
  {
    "text": "cluster when writing our data services",
    "start": "711360",
    "end": "713760"
  },
  {
    "text": "we chose languages that we've been using",
    "start": "713760",
    "end": "715320"
  },
  {
    "text": "more and more at Discord rust let's go",
    "start": "715320",
    "end": "718600"
  },
  {
    "text": "doy",
    "start": "718600",
    "end": "721160"
  },
  {
    "text": "all right we knew we knew it we knew we",
    "start": "721160",
    "end": "724279"
  },
  {
    "text": "were going to get rust we knew it we",
    "start": "724279",
    "end": "725920"
  },
  {
    "text": "could feel it everybody come on clappy",
    "start": "725920",
    "end": "728880"
  },
  {
    "text": "let's go clappy clappy for the",
    "start": "728880",
    "end": "731680"
  },
  {
    "text": "rust we've used it for a few projects",
    "start": "731680",
    "end": "734199"
  },
  {
    "text": "previously and it lived up for the hype",
    "start": "734199",
    "end": "735959"
  },
  {
    "text": "for us it gave us as fast C",
    "start": "735959",
    "end": "738079"
  },
  {
    "text": "plus speeds without having to sacrifice",
    "start": "738079",
    "end": "742959"
  },
  {
    "text": "safety or say mental happiness of your",
    "start": "743199",
    "end": "746320"
  },
  {
    "text": "employees hey kids you're going to go",
    "start": "746320",
    "end": "749440"
  },
  {
    "text": "from java what to C++ they're like what",
    "start": "749440",
    "end": "753560"
  },
  {
    "text": "what I don't feel I'm not sure things",
    "start": "753560",
    "end": "756360"
  },
  {
    "text": "are getting better here at Discord at",
    "start": "756360",
    "end": "759040"
  },
  {
    "text": "the current moment I'm glad at least",
    "start": "759040",
    "end": "761160"
  },
  {
    "text": "there's rust in",
    "start": "761160",
    "end": "763920"
  },
  {
    "text": "here at least there's rust for a little",
    "start": "764760",
    "end": "767000"
  },
  {
    "text": "bit but literally they're going for",
    "start": "767000",
    "end": "768399"
  },
  {
    "text": "Cassandra to a C++ okay rust help's",
    "start": "768399",
    "end": "770320"
  },
  {
    "text": "Fearless concurrency I when I hear the",
    "start": "770320",
    "end": "774160"
  },
  {
    "text": "term Fearless concurrency I just want to",
    "start": "774160",
    "end": "776240"
  },
  {
    "text": "just like Drop Kick you know you can",
    "start": "776240",
    "end": "778839"
  },
  {
    "text": "still screw it up I had so many times I",
    "start": "778839",
    "end": "782079"
  },
  {
    "text": "deadlocked myself in Tokyo cuz I didn't",
    "start": "782079",
    "end": "784920"
  },
  {
    "text": "know what I was doing okay it's not",
    "start": "784920",
    "end": "786320"
  },
  {
    "text": "Fearless you still have to know",
    "start": "786320",
    "end": "790000"
  },
  {
    "text": "things right uh the first language",
    "start": "790040",
    "end": "792279"
  },
  {
    "text": "should make it easy to write safe",
    "start": "792279",
    "end": "793639"
  },
  {
    "text": "concurrent code its Library also a great",
    "start": "793639",
    "end": "795760"
  },
  {
    "text": "match for what we are intending to",
    "start": "795760",
    "end": "797199"
  },
  {
    "text": "accomplish",
    "start": "797199",
    "end": "799040"
  },
  {
    "text": "Tokyo I love Tokyo is a tremendous",
    "start": "799040",
    "end": "801680"
  },
  {
    "text": "foundation for building a system on",
    "start": "801680",
    "end": "803240"
  },
  {
    "text": "asynchronous iio hey by the way can",
    "start": "803240",
    "end": "804800"
  },
  {
    "text": "everybody in here I saw that flip edits",
    "start": "804800",
    "end": "806399"
  },
  {
    "text": "was in here flip could you say something",
    "start": "806399",
    "end": "808079"
  },
  {
    "text": "for a quick second flip flip edits flip",
    "start": "808079",
    "end": "810160"
  },
  {
    "text": "edits could you say something for a",
    "start": "810160",
    "end": "811519"
  },
  {
    "text": "quick second flip hey flip hey flippity",
    "start": "811519",
    "end": "815199"
  },
  {
    "text": "flip could you speak up for a quick",
    "start": "815199",
    "end": "818160"
  },
  {
    "text": "moment okay hey flip now that I have you",
    "start": "818160",
    "end": "820680"
  },
  {
    "text": "here hey flip remember that one time we",
    "start": "820680",
    "end": "822320"
  },
  {
    "text": "had this idea for a t-shirt that said",
    "start": "822320",
    "end": "825120"
  },
  {
    "text": "Tokyo what happened flip where did it go",
    "start": "825120",
    "end": "829560"
  },
  {
    "text": "did you drop the ball",
    "start": "829560",
    "end": "833680"
  },
  {
    "text": "everyone's disappointed right now flip",
    "start": "847920",
    "end": "850079"
  },
  {
    "text": "okay we could have all had Tokyo",
    "start": "850079",
    "end": "852519"
  },
  {
    "text": "t-shirts on we could have had to Tokyo",
    "start": "852519",
    "end": "856600"
  },
  {
    "text": "we could have been screaming Tokyo",
    "start": "856600",
    "end": "858240"
  },
  {
    "text": "together instead look at",
    "start": "858240",
    "end": "860480"
  },
  {
    "text": "us look at us",
    "start": "860480",
    "end": "864959"
  },
  {
    "text": "additionally found out a joy a code in",
    "start": "870680",
    "end": "873160"
  },
  {
    "text": "with the help of a compiler gives you",
    "start": "873160",
    "end": "874959"
  },
  {
    "text": "the CL dude I love this we have got we",
    "start": "874959",
    "end": "877320"
  },
  {
    "text": "have gone from a database problem into",
    "start": "877320",
    "end": "879519"
  },
  {
    "text": "the joys of rust I kid you not people",
    "start": "879519",
    "end": "882160"
  },
  {
    "text": "who like rust I just every single time",
    "start": "882160",
    "end": "885079"
  },
  {
    "text": "no matter what you're talking about",
    "start": "885079",
    "end": "887000"
  },
  {
    "text": "we've managed to take the conversation",
    "start": "887000",
    "end": "889639"
  },
  {
    "text": "that is about databases and the problem",
    "start": "889639",
    "end": "891759"
  },
  {
    "text": "with the C++ datab base and gone from",
    "start": "891759",
    "end": "894800"
  },
  {
    "text": "that into rust the greatest programming",
    "start": "894800",
    "end": "898519"
  },
  {
    "text": "language of of all time oh what are you",
    "start": "898519",
    "end": "900720"
  },
  {
    "text": "doing over there oh you're using",
    "start": "900720",
    "end": "902000"
  },
  {
    "text": "JavaScript have you thought about rust",
    "start": "902000",
    "end": "905079"
  },
  {
    "text": "let's see anyways um the language",
    "start": "905079",
    "end": "907199"
  },
  {
    "text": "constructs and its emphasis on safety we",
    "start": "907199",
    "end": "909120"
  },
  {
    "text": "became quite fond of uh of once let's",
    "start": "909120",
    "end": "911759"
  },
  {
    "text": "see of how once it compiled It generally",
    "start": "911759",
    "end": "913920"
  },
  {
    "text": "works most importantly however it lets",
    "start": "913920",
    "end": "915680"
  },
  {
    "text": "us say we rewrote it in",
    "start": "915680",
    "end": "919079"
  },
  {
    "text": "Rust",
    "start": "919079",
    "end": "922079"
  },
  {
    "text": "yes",
    "start": "924240",
    "end": "925959"
  },
  {
    "text": "yes yes",
    "start": "925959",
    "end": "929880"
  },
  {
    "text": "yes let's go oh this is so good this is",
    "start": "929880",
    "end": "933720"
  },
  {
    "text": "everything I've ever wanted in an",
    "start": "933720",
    "end": "935519"
  },
  {
    "text": "article our data services sit between",
    "start": "935519",
    "end": "938000"
  },
  {
    "text": "the API and our Sila clusters they",
    "start": "938000",
    "end": "940480"
  },
  {
    "text": "contain roughly one grpc endpoint which",
    "start": "940480",
    "end": "942880"
  },
  {
    "text": "grpc is historically one of the worst",
    "start": "942880",
    "end": "944600"
  },
  {
    "text": "performing ways to communicate with a",
    "start": "944600",
    "end": "946040"
  },
  {
    "text": "rust thing right doesn't satday Saturday",
    "start": "946040",
    "end": "948839"
  },
  {
    "text": "have some sort of problem with grpc and",
    "start": "948839",
    "end": "950600"
  },
  {
    "text": "all that isn't it like really",
    "start": "950600",
    "end": "953720"
  },
  {
    "text": "poor it's because you have to have a an",
    "start": "955000",
    "end": "957319"
  },
  {
    "text": "underlying source",
    "start": "957319",
    "end": "959839"
  },
  {
    "text": "if I remember",
    "start": "959839",
    "end": "961440"
  },
  {
    "text": "correctly",
    "start": "961440",
    "end": "963000"
  },
  {
    "text": "uh it is yeah if I remember correctly I",
    "start": "963000",
    "end": "965440"
  },
  {
    "text": "can't I don't know why but I know it's",
    "start": "965440",
    "end": "967120"
  },
  {
    "text": "like really bad uh endpoint per database",
    "start": "967120",
    "end": "969880"
  },
  {
    "text": "query and intentionally contains no",
    "start": "969880",
    "end": "971440"
  },
  {
    "text": "business Logic the big features our data",
    "start": "971440",
    "end": "973399"
  },
  {
    "text": "services provide is requesting",
    "start": "973399",
    "end": "974959"
  },
  {
    "text": "coalescing if multiple users are",
    "start": "974959",
    "end": "976839"
  },
  {
    "text": "requesting the same row at the same time",
    "start": "976839",
    "end": "978519"
  },
  {
    "text": "we only quer the database once the first",
    "start": "978519",
    "end": "980319"
  },
  {
    "text": "user that makes a request causes a",
    "start": "980319",
    "end": "982319"
  },
  {
    "text": "worker test to spin up at the service",
    "start": "982319",
    "end": "984319"
  },
  {
    "text": "subsequent requests will check for the",
    "start": "984319",
    "end": "985920"
  },
  {
    "text": "existence of that task And subscribe to",
    "start": "985920",
    "end": "987639"
  },
  {
    "text": "it that worker task will query the",
    "start": "987639",
    "end": "990000"
  },
  {
    "text": "database okay this makes perfect sense",
    "start": "990000",
    "end": "991800"
  },
  {
    "text": "do you know why this makes sense it",
    "start": "991800",
    "end": "993399"
  },
  {
    "text": "makes such good sense because you can",
    "start": "993399",
    "end": "994920"
  },
  {
    "text": "imagine that if we were to jump right",
    "start": "994920",
    "end": "996560"
  },
  {
    "text": "now into Discord right last time I did",
    "start": "996560",
    "end": "998680"
  },
  {
    "text": "this someone posted a pen so we're going",
    "start": "998680",
    "end": "1000199"
  },
  {
    "text": "to be quick here and we say something hi",
    "start": "1000199",
    "end": "1002839"
  },
  {
    "text": "Mom so many people at the exact same",
    "start": "1002839",
    "end": "1005399"
  },
  {
    "text": "time are going to see this thing from",
    "start": "1005399",
    "end": "1007160"
  },
  {
    "text": "happening and so many people going there",
    "start": "1007160",
    "end": "1008639"
  },
  {
    "text": "right now are going to see this thing",
    "start": "1008639",
    "end": "1010000"
  },
  {
    "text": "happening so therefore what",
    "start": "1010000",
    "end": "1013240"
  },
  {
    "text": "happens when we do this right which is",
    "start": "1013240",
    "end": "1016759"
  },
  {
    "text": "well a lot of people are causing reads",
    "start": "1016759",
    "end": "1018600"
  },
  {
    "text": "if a lot of people cause",
    "start": "1018600",
    "end": "1021360"
  },
  {
    "text": "reads why query the database 900 times",
    "start": "1021360",
    "end": "1024480"
  },
  {
    "text": "right it makes perfect sense this is",
    "start": "1024480",
    "end": "1025918"
  },
  {
    "text": "great this is a great great thing right",
    "start": "1025919",
    "end": "1027520"
  },
  {
    "text": "here this is the power of rust in action",
    "start": "1027520",
    "end": "1030520"
  },
  {
    "text": "it made it easy to write safe concurrent",
    "start": "1030520",
    "end": "1032319"
  },
  {
    "text": "code let's go rust oh it feels good to",
    "start": "1032319",
    "end": "1035079"
  },
  {
    "text": "be a rust station doesn't it oh man you",
    "start": "1035079",
    "end": "1037160"
  },
  {
    "text": "and your pathetic C+ Plus or rust minus",
    "start": "1037160",
    "end": "1039798"
  },
  {
    "text": "minus or whatever we call it in",
    "start": "1039799",
    "end": "1042240"
  },
  {
    "text": "Java right seriously I'd rather write",
    "start": "1042240",
    "end": "1046160"
  },
  {
    "text": "JavaScript than",
    "start": "1046160",
    "end": "1047720"
  },
  {
    "text": "Java uh let's imagine a big announcement",
    "start": "1047720",
    "end": "1050280"
  },
  {
    "text": "on a large server that notifies at",
    "start": "1050280",
    "end": "1052160"
  },
  {
    "text": "everyone users are going to open the app",
    "start": "1052160",
    "end": "1053919"
  },
  {
    "text": "and read the messages sending tons of",
    "start": "1053919",
    "end": "1055520"
  },
  {
    "text": "traffic to the database boom I called it",
    "start": "1055520",
    "end": "1058640"
  },
  {
    "text": "called it at everybody called it",
    "start": "1058640",
    "end": "1062280"
  },
  {
    "text": "previously this might lead to a hot",
    "start": "1062280",
    "end": "1064120"
  },
  {
    "text": "partition and on call would potentially",
    "start": "1064120",
    "end": "1065799"
  },
  {
    "text": "need to be paged to help the system",
    "start": "1065799",
    "end": "1067360"
  },
  {
    "text": "recover with our data services we're",
    "start": "1067360",
    "end": "1068799"
  },
  {
    "text": "able to significantly reduce traffic",
    "start": "1068799",
    "end": "1070200"
  },
  {
    "text": "spikes against the database the second",
    "start": "1070200",
    "end": "1072160"
  },
  {
    "text": "part of the magic here is the Upstream",
    "start": "1072160",
    "end": "1073600"
  },
  {
    "text": "of our data services we Implement a",
    "start": "1073600",
    "end": "1075080"
  },
  {
    "text": "consistent hashing based routing to our",
    "start": "1075080",
    "end": "1077280"
  },
  {
    "text": "yes yes dude I love this okay this is so",
    "start": "1077280",
    "end": "1081000"
  },
  {
    "text": "good consistent hashing for routing is",
    "start": "1081000",
    "end": "1083559"
  },
  {
    "text": "so beautiful we don't use it at Netflix",
    "start": "1083559",
    "end": "1085520"
  },
  {
    "text": "which I I honestly think that if we",
    "start": "1085520",
    "end": "1087240"
  },
  {
    "text": "started using this we could save a",
    "start": "1087240",
    "end": "1090000"
  },
  {
    "text": "bajillion dollars hash routing is",
    "start": "1090000",
    "end": "1093000"
  },
  {
    "text": "amazing I think uh at one point it was",
    "start": "1093000",
    "end": "1094960"
  },
  {
    "text": "called Ring Pop I don't know what they",
    "start": "1094960",
    "end": "1096240"
  },
  {
    "text": "call it now but that's effectively the",
    "start": "1096240",
    "end": "1098039"
  },
  {
    "text": "same idea for each message uh request to",
    "start": "1098039",
    "end": "1100600"
  },
  {
    "text": "our data services we' provide a routing",
    "start": "1100600",
    "end": "1102200"
  },
  {
    "text": "key for messages this was a channel ID",
    "start": "1102200",
    "end": "1104039"
  },
  {
    "text": "so all the requests uh for the same",
    "start": "1104039",
    "end": "1105760"
  },
  {
    "text": "channel go through the same instance of",
    "start": "1105760",
    "end": "1107080"
  },
  {
    "text": "the server yes yes this routing further",
    "start": "1107080",
    "end": "1108919"
  },
  {
    "text": "helps reduce the load yes yes these",
    "start": "1108919",
    "end": "1112200"
  },
  {
    "text": "improvements help a lot but they don't",
    "start": "1112200",
    "end": "1113440"
  },
  {
    "text": "solve all of our problems we're still",
    "start": "1113440",
    "end": "1114559"
  },
  {
    "text": "seeing hot partitions and increased",
    "start": "1114559",
    "end": "1116000"
  },
  {
    "text": "latency on our Cassandra clusters just",
    "start": "1116000",
    "end": "1118120"
  },
  {
    "text": "not quite as frequently it buys us some",
    "start": "1118120",
    "end": "1120559"
  },
  {
    "text": "time that we can prepare our new optimal",
    "start": "1120559",
    "end": "1122440"
  },
  {
    "text": "Silo cluster and execute the",
    "start": "1122440",
    "end": "1126639"
  },
  {
    "text": "migration Let's go people are you ready",
    "start": "1126720",
    "end": "1128840"
  },
  {
    "text": "for it our requirements for our",
    "start": "1128840",
    "end": "1130559"
  },
  {
    "text": "migration are quite straightforward we",
    "start": "1130559",
    "end": "1131960"
  },
  {
    "text": "need to migrate trillions of messages",
    "start": "1131960",
    "end": "1133640"
  },
  {
    "text": "with no downtime and we need to do it",
    "start": "1133640",
    "end": "1135080"
  },
  {
    "text": "quickly because while the Cassandra",
    "start": "1135080",
    "end": "1136520"
  },
  {
    "text": "situation has somewhat improved we're",
    "start": "1136520",
    "end": "1137760"
  },
  {
    "text": "frequently firefighting Step One is easy",
    "start": "1137760",
    "end": "1140000"
  },
  {
    "text": "we provision a new silid cluster using",
    "start": "1140000",
    "end": "1142320"
  },
  {
    "text": "our super disk storage topology by using",
    "start": "1142320",
    "end": "1145520"
  },
  {
    "text": "local ssds for Speed and leveraging raid",
    "start": "1145520",
    "end": "1147720"
  },
  {
    "text": "to mirror our data to persistent uh to",
    "start": "1147720",
    "end": "1149919"
  },
  {
    "text": "persistent disc we get the speed of",
    "start": "1149919",
    "end": "1152559"
  },
  {
    "text": "attached local disc with the durability",
    "start": "1152559",
    "end": "1154159"
  },
  {
    "text": "of persistent dis with our cluster stood",
    "start": "1154159",
    "end": "1156400"
  },
  {
    "text": "up we can begin Migra gosh that step one",
    "start": "1156400",
    "end": "1158679"
  },
  {
    "text": "does not sound",
    "start": "1158679",
    "end": "1161360"
  },
  {
    "text": "easy that sounds like a lot of effort",
    "start": "1161400",
    "end": "1163960"
  },
  {
    "text": "that sounds like years of engineering",
    "start": "1163960",
    "end": "1165600"
  },
  {
    "text": "went into that step one simple we're",
    "start": "1165600",
    "end": "1167360"
  },
  {
    "text": "just going to do magic",
    "start": "1167360",
    "end": "1169400"
  },
  {
    "text": "okay sure 10 years ago people would have",
    "start": "1169400",
    "end": "1171840"
  },
  {
    "text": "never thought to do such a thing but",
    "start": "1171840",
    "end": "1173480"
  },
  {
    "text": "today easy magic step one make it magic",
    "start": "1173480",
    "end": "1178799"
  },
  {
    "text": "local speed persistent data storage raid",
    "start": "1178799",
    "end": "1183559"
  },
  {
    "text": "right",
    "start": "1183559",
    "end": "1185960"
  },
  {
    "text": "okay",
    "start": "1187200",
    "end": "1190200"
  },
  {
    "text": "okay our first draft of our migration",
    "start": "1192280",
    "end": "1194640"
  },
  {
    "text": "plan was designed uh designed to get",
    "start": "1194640",
    "end": "1196559"
  },
  {
    "text": "value quickly we started using our shiny",
    "start": "1196559",
    "end": "1198400"
  },
  {
    "text": "new Sil DB cluster for new data using",
    "start": "1198400",
    "end": "1201240"
  },
  {
    "text": "cut over time then migrated historical",
    "start": "1201240",
    "end": "1203480"
  },
  {
    "text": "data behind it okay this that seems like",
    "start": "1203480",
    "end": "1205200"
  },
  {
    "text": "the right move though honestly that",
    "start": "1205200",
    "end": "1206799"
  },
  {
    "text": "seems like the right move and you're",
    "start": "1206799",
    "end": "1207760"
  },
  {
    "text": "fine doing slower requests because",
    "start": "1207760",
    "end": "1209200"
  },
  {
    "text": "within a small period of time people",
    "start": "1209200",
    "end": "1210400"
  },
  {
    "text": "don't I assume the amount of messages",
    "start": "1210400",
    "end": "1212720"
  },
  {
    "text": "being viewed Beyond it like a certain",
    "start": "1212720",
    "end": "1215520"
  },
  {
    "text": "time frame gets really small",
    "start": "1215520",
    "end": "1218159"
  },
  {
    "text": "right uh it adds more complexity but",
    "start": "1218159",
    "end": "1220600"
  },
  {
    "text": "what every large project needs is an",
    "start": "1220600",
    "end": "1222120"
  },
  {
    "text": "additional complexity right absolutely",
    "start": "1222120",
    "end": "1224240"
  },
  {
    "text": "but that's why you use rust uh we begin",
    "start": "1224240",
    "end": "1226799"
  },
  {
    "text": "dual writing new data to Cassandra and",
    "start": "1226799",
    "end": "1228799"
  },
  {
    "text": "Silo DB and concurrently begin",
    "start": "1228799",
    "end": "1230200"
  },
  {
    "text": "provisioning Sila DB spark migrator uh",
    "start": "1230200",
    "end": "1233120"
  },
  {
    "text": "it requires a lot of tuning and once we",
    "start": "1233120",
    "end": "1234559"
  },
  {
    "text": "get it set up we have estimated time to",
    "start": "1234559",
    "end": "1236240"
  },
  {
    "text": "completion three",
    "start": "1236240",
    "end": "1237680"
  },
  {
    "text": "[Laughter]",
    "start": "1237680",
    "end": "1243699"
  },
  {
    "text": "months yeah a trillion is a lot you",
    "start": "1245880",
    "end": "1249360"
  },
  {
    "text": "forget how much a trillion is right",
    "start": "1249360",
    "end": "1251760"
  },
  {
    "text": "people forget that if you're doing a",
    "start": "1251760",
    "end": "1253039"
  },
  {
    "text": "trillion from one large D DB service to",
    "start": "1253039",
    "end": "1255799"
  },
  {
    "text": "another it is like insane the amount of",
    "start": "1255799",
    "end": "1258120"
  },
  {
    "text": "time that time frame doesn't make us",
    "start": "1258120",
    "end": "1260120"
  },
  {
    "text": "feel warm and fuzzy inside and we'd",
    "start": "1260120",
    "end": "1261480"
  },
  {
    "text": "prefer to get value faster we'd sit down",
    "start": "1261480",
    "end": "1263400"
  },
  {
    "text": "as a team and brainstorm ways we can",
    "start": "1263400",
    "end": "1264880"
  },
  {
    "text": "speed things up until we remember that",
    "start": "1264880",
    "end": "1266320"
  },
  {
    "text": "we've written as fast and performant",
    "start": "1266320",
    "end": "1268039"
  },
  {
    "text": "database Library as we could uh",
    "start": "1268039",
    "end": "1269720"
  },
  {
    "text": "potentially extend we neglect to engage",
    "start": "1269720",
    "end": "1272039"
  },
  {
    "text": "in some meme driven engineering and",
    "start": "1272039",
    "end": "1273679"
  },
  {
    "text": "rewrite the data migrator in Rust no",
    "start": "1273679",
    "end": "1275559"
  },
  {
    "text": "shut shut the door no way are we doing",
    "start": "1275559",
    "end": "1279159"
  },
  {
    "text": "it in an afternoon we extend our data",
    "start": "1279159",
    "end": "1281520"
  },
  {
    "text": "service library to perform large scale",
    "start": "1281520",
    "end": "1283120"
  },
  {
    "text": "data migrations it reads token ranges",
    "start": "1283120",
    "end": "1285080"
  },
  {
    "text": "from the database checkpoints them",
    "start": "1285080",
    "end": "1286440"
  },
  {
    "text": "locally via squeal light and and then",
    "start": "1286440",
    "end": "1288840"
  },
  {
    "text": "fire hose them into Sila DB we hook up",
    "start": "1288840",
    "end": "1292279"
  },
  {
    "text": "our new and improved migrator and get",
    "start": "1292279",
    "end": "1294000"
  },
  {
    "text": "new estimate 9 days let's go oh my",
    "start": "1294000",
    "end": "1298120"
  },
  {
    "text": "goodness rust is coming in again oh this",
    "start": "1298120",
    "end": "1300200"
  },
  {
    "text": "is too good it's too good it's too good",
    "start": "1300200",
    "end": "1303960"
  },
  {
    "text": "if we can migr data this quickly then we",
    "start": "1303960",
    "end": "1305919"
  },
  {
    "text": "can forget our complicated time BR time",
    "start": "1305919",
    "end": "1308760"
  },
  {
    "text": "based approach instead flip the switch",
    "start": "1308760",
    "end": "1310480"
  },
  {
    "text": "for everything at once we turn it on and",
    "start": "1310480",
    "end": "1313559"
  },
  {
    "text": "leave it running migrating messages at",
    "start": "1313559",
    "end": "1315200"
  },
  {
    "text": "the speed of 3.2 million per second",
    "start": "1315200",
    "end": "1318039"
  },
  {
    "text": "several Days Later We Gather to watch it",
    "start": "1318039",
    "end": "1320480"
  },
  {
    "text": "hit 100% And then we realize it's stuck",
    "start": "1320480",
    "end": "1322400"
  },
  {
    "text": "at 99 and a bunch of other nines",
    "start": "1322400",
    "end": "1325320"
  },
  {
    "text": "complete no",
    "start": "1325320",
    "end": "1326679"
  },
  {
    "text": "really our migrator is timing out",
    "start": "1326679",
    "end": "1329240"
  },
  {
    "text": "reading the last few token ranges of",
    "start": "1329240",
    "end": "1331279"
  },
  {
    "text": "data because they contain gigantic",
    "start": "1331279",
    "end": "1332919"
  },
  {
    "text": "ranges of tombstones that were never",
    "start": "1332919",
    "end": "1334960"
  },
  {
    "text": "compacted away in",
    "start": "1334960",
    "end": "1337670"
  },
  {
    "text": "[Laughter]",
    "start": "1337670",
    "end": "1343480"
  },
  {
    "text": "Cassandra Oh no when you don't me when",
    "start": "1344480",
    "end": "1347240"
  },
  {
    "text": "oh no oh oh no when you don't measure",
    "start": "1347240",
    "end": "1350080"
  },
  {
    "text": "things by the space they take but by",
    "start": "1350080",
    "end": "1352039"
  },
  {
    "text": "like how many have you ever done that",
    "start": "1352039",
    "end": "1353320"
  },
  {
    "text": "with Git You download something it's",
    "start": "1353320",
    "end": "1355559"
  },
  {
    "text": "like 20% 40% 60%",
    "start": "1355559",
    "end": "1358640"
  },
  {
    "text": "80% 81% and you're like dude I only have",
    "start": "1358640",
    "end": "1361520"
  },
  {
    "text": "five left 85% you're like what the hell",
    "start": "1361520",
    "end": "1364240"
  },
  {
    "text": "is happening and then it just like just",
    "start": "1364240",
    "end": "1366559"
  },
  {
    "text": "stops because it can't count the size it",
    "start": "1366559",
    "end": "1369000"
  },
  {
    "text": "can only count like how many units there",
    "start": "1369000",
    "end": "1370799"
  },
  {
    "text": "are oh this is a beautiful problem our",
    "start": "1370799",
    "end": "1374720"
  },
  {
    "text": "migrator is timing out reading the last",
    "start": "1374720",
    "end": "1376720"
  },
  {
    "text": "few token ranges of data because they",
    "start": "1376720",
    "end": "1378520"
  },
  {
    "text": "contain gigantic ranges of tombstones",
    "start": "1378520",
    "end": "1380320"
  },
  {
    "text": "that were never compacted away in",
    "start": "1380320",
    "end": "1381240"
  },
  {
    "text": "Cassandra we compact the token range and",
    "start": "1381240",
    "end": "1382960"
  },
  {
    "text": "seconds later the migration is completed",
    "start": "1382960",
    "end": "1385240"
  },
  {
    "text": "we performed automated data validation",
    "start": "1385240",
    "end": "1387080"
  },
  {
    "text": "by sending a small percentage of reads",
    "start": "1387080",
    "end": "1388440"
  },
  {
    "text": "to both databases comparing results and",
    "start": "1388440",
    "end": "1390080"
  },
  {
    "text": "everything looked great the Clusters",
    "start": "1390080",
    "end": "1391679"
  },
  {
    "text": "held up as well with full production",
    "start": "1391679",
    "end": "1393840"
  },
  {
    "text": "traffic whereas Cassandra was suffering",
    "start": "1393840",
    "end": "1395480"
  },
  {
    "text": "increasingly frequent latency issues we",
    "start": "1395480",
    "end": "1397960"
  },
  {
    "text": "gathered together as a team onsite",
    "start": "1397960",
    "end": "1399559"
  },
  {
    "text": "flipped the switch to make Sil DB the",
    "start": "1399559",
    "end": "1401520"
  },
  {
    "text": "primary database and eight celebratory",
    "start": "1401520",
    "end": "1404159"
  },
  {
    "text": "cake I hear Cake's a lie okay personally",
    "start": "1404159",
    "end": "1407320"
  },
  {
    "text": "I've heard that",
    "start": "1407320",
    "end": "1408960"
  },
  {
    "text": "I've heard",
    "start": "1408960",
    "end": "1409919"
  },
  {
    "text": "this several months",
    "start": "1409919",
    "end": "1412480"
  },
  {
    "text": "later let's he this is where everything",
    "start": "1412480",
    "end": "1414840"
  },
  {
    "text": "went bad because they're going to",
    "start": "1414840",
    "end": "1416039"
  },
  {
    "text": "rewrite come on they're going to rewrite",
    "start": "1416039",
    "end": "1417520"
  },
  {
    "text": "it they're rewriting it rust here we go",
    "start": "1417520",
    "end": "1419559"
  },
  {
    "text": "we switched our message messages",
    "start": "1419559",
    "end": "1421240"
  },
  {
    "text": "database over in May 2022 but how's it",
    "start": "1421240",
    "end": "1424080"
  },
  {
    "text": "held up since then it's been quite well",
    "start": "1424080",
    "end": "1425919"
  },
  {
    "text": "behaved database it's okay to say this",
    "start": "1425919",
    "end": "1427880"
  },
  {
    "text": "because I'm not on call this",
    "start": "1427880",
    "end": "1429840"
  },
  {
    "text": "week we're not having weak and long",
    "start": "1429840",
    "end": "1432520"
  },
  {
    "text": "firefights nor are we juggling nodes in",
    "start": "1432520",
    "end": "1434559"
  },
  {
    "text": "a cluster to attempt uh to preserve",
    "start": "1434559",
    "end": "1436480"
  },
  {
    "text": "uptime it's much more efficient data",
    "start": "1436480",
    "end": "1438440"
  },
  {
    "text": "datase we're going from running 177 CL",
    "start": "1438440",
    "end": "1441080"
  },
  {
    "text": "Cassandra notes to just 72 silid DB",
    "start": "1441080",
    "end": "1443400"
  },
  {
    "text": "notes man the power of garbage",
    "start": "1443400",
    "end": "1445720"
  },
  {
    "text": "collection this is actually super cool",
    "start": "1445720",
    "end": "1448039"
  },
  {
    "text": "the power of garbage collection is out",
    "start": "1448039",
    "end": "1449520"
  },
  {
    "text": "of this world each silid DB note has 9",
    "start": "1449520",
    "end": "1451880"
  },
  {
    "text": "tbte of dis space up from the average of",
    "start": "1451880",
    "end": "1454640"
  },
  {
    "text": "4 terab on Cassandra node",
    "start": "1454640",
    "end": "1457679"
  },
  {
    "text": "wow our tail latencies have improved",
    "start": "1457679",
    "end": "1460400"
  },
  {
    "text": "drastically for example fetching",
    "start": "1460400",
    "end": "1461840"
  },
  {
    "text": "historic messages had a P99 of somewhere",
    "start": "1461840",
    "end": "1464520"
  },
  {
    "text": "between 40 to 125 milliseconds on",
    "start": "1464520",
    "end": "1466679"
  },
  {
    "text": "Cassandra with Sila having a nice and",
    "start": "1466679",
    "end": "1468880"
  },
  {
    "text": "chill 15 millisecond",
    "start": "1468880",
    "end": "1472240"
  },
  {
    "text": "P99 sh that is out of",
    "start": "1472240",
    "end": "1476720"
  },
  {
    "text": "control and message insert performance",
    "start": "1476720",
    "end": "1479440"
  },
  {
    "text": "has gone from 5 to 70 milliseconds P99",
    "start": "1479440",
    "end": "1482039"
  },
  {
    "text": "on Cassandra to a steady 5 milliseconds",
    "start": "1482039",
    "end": "1484159"
  },
  {
    "text": "on P",
    "start": "1484159",
    "end": "1485840"
  },
  {
    "text": "wow dude that is",
    "start": "1485840",
    "end": "1488600"
  },
  {
    "text": "insane thanks to the aformentioned",
    "start": "1488600",
    "end": "1490840"
  },
  {
    "text": "performance improvements we've unlocked",
    "start": "1490840",
    "end": "1492720"
  },
  {
    "text": "new products use cases now that we have",
    "start": "1492720",
    "end": "1494320"
  },
  {
    "text": "confidence in our message database wow",
    "start": "1494320",
    "end": "1497120"
  },
  {
    "text": "at the end of 2022 people all over the",
    "start": "1497120",
    "end": "1498840"
  },
  {
    "text": "world tuned in to watch the World Cup",
    "start": "1498840",
    "end": "1500640"
  },
  {
    "text": "one thing we discovered very quickly was",
    "start": "1500640",
    "end": "1502279"
  },
  {
    "text": "our goals scored showed up in our",
    "start": "1502279",
    "end": "1504880"
  },
  {
    "text": "monitoring uh graphs this was very cool",
    "start": "1504880",
    "end": "1507679"
  },
  {
    "text": "because not only is it neat to see real",
    "start": "1507679",
    "end": "1510240"
  },
  {
    "text": "world events show up in your systems but",
    "start": "1510240",
    "end": "1512240"
  },
  {
    "text": "this gave our team an excuse to watch",
    "start": "1512240",
    "end": "1514360"
  },
  {
    "text": "soccer during the meetings we weren't",
    "start": "1514360",
    "end": "1516159"
  },
  {
    "text": "watching soccer during meetings we were",
    "start": "1516159",
    "end": "1518000"
  },
  {
    "text": "proactively monitoring our systems",
    "start": "1518000",
    "end": "1521799"
  },
  {
    "text": "performance that period made it inside",
    "start": "1522720",
    "end": "1524760"
  },
  {
    "text": "the quotes people you see that that one",
    "start": "1524760",
    "end": "1526640"
  },
  {
    "text": "made it inside well look at that that's",
    "start": "1526640",
    "end": "1528039"
  },
  {
    "text": "actually that's super cool you can see",
    "start": "1528039",
    "end": "1530799"
  },
  {
    "text": "the goals being scored oh I love it we",
    "start": "1530799",
    "end": "1532919"
  },
  {
    "text": "actually tell the story of the World Cup",
    "start": "1532919",
    "end": "1534480"
  },
  {
    "text": "final via our message uh send graph the",
    "start": "1534480",
    "end": "1537360"
  },
  {
    "text": "match was tremendous uh Lionel Messi I",
    "start": "1537360",
    "end": "1541080"
  },
  {
    "text": "was uh let's see was trying to check off",
    "start": "1541080",
    "end": "1542679"
  },
  {
    "text": "the last message accomplishment or the",
    "start": "1542679",
    "end": "1544559"
  },
  {
    "text": "last accomplishment in his career and",
    "start": "1544559",
    "end": "1546000"
  },
  {
    "text": "cement his claim to being the greatest",
    "start": "1546000",
    "end": "1547600"
  },
  {
    "text": "of all time and Lead Argentina to the",
    "start": "1547600",
    "end": "1550080"
  },
  {
    "text": "championship but in his way to the",
    "start": "1550080",
    "end": "1552279"
  },
  {
    "text": "massively talented is it klian Kyan",
    "start": "1552279",
    "end": "1555480"
  },
  {
    "text": "kylian I don't know how to say this uh",
    "start": "1555480",
    "end": "1558799"
  },
  {
    "text": "and parl Von I don't watch soccer so I",
    "start": "1558799",
    "end": "1561360"
  },
  {
    "text": "don't know any of the soccer names it's",
    "start": "1561360",
    "end": "1562520"
  },
  {
    "text": "football I don't watch football okay I",
    "start": "1562520",
    "end": "1564440"
  },
  {
    "text": "don't uh each of the nine spikes in this",
    "start": "1564440",
    "end": "1566919"
  },
  {
    "text": "graph represents an event in the match",
    "start": "1566919",
    "end": "1569200"
  },
  {
    "text": "Messi hits a penalty Argentina goes one",
    "start": "1569200",
    "end": "1571799"
  },
  {
    "text": "one zero let's go Argentina anytime",
    "start": "1571799",
    "end": "1573799"
  },
  {
    "text": "Argentina can beat France I'm I'm I'm in",
    "start": "1573799",
    "end": "1575840"
  },
  {
    "text": "for it uh Argentina scores again let's",
    "start": "1575840",
    "end": "1578240"
  },
  {
    "text": "go it's halftime there's sustained",
    "start": "1578240",
    "end": "1580200"
  },
  {
    "text": "15minute Plateau as users chat about the",
    "start": "1580200",
    "end": "1582799"
  },
  {
    "text": "match okay yeah I can see that the big",
    "start": "1582799",
    "end": "1585919"
  },
  {
    "text": "spike occurs when I'll just call bappy",
    "start": "1585919",
    "end": "1589120"
  },
  {
    "text": "when bappy scores for parlay vuon and",
    "start": "1589120",
    "end": "1591279"
  },
  {
    "text": "scores again in 90 seconds later to tie",
    "start": "1591279",
    "end": "1593320"
  },
  {
    "text": "it up damn the back to",
    "start": "1593320",
    "end": "1595600"
  },
  {
    "text": "back it's the end of regulation this is",
    "start": "1595600",
    "end": "1597880"
  },
  {
    "text": "a huge map is or match is going to extra",
    "start": "1597880",
    "end": "1600480"
  },
  {
    "text": "time not much happens for the first half",
    "start": "1600480",
    "end": "1601919"
  },
  {
    "text": "of the time but we reach the end users",
    "start": "1601919",
    "end": "1603200"
  },
  {
    "text": "chatting Messi scores again and",
    "start": "1603200",
    "end": "1604799"
  },
  {
    "text": "argentinia takes the lead bappy Stripes",
    "start": "1604799",
    "end": "1606919"
  },
  {
    "text": "again ties it up it's the end of the",
    "start": "1606919",
    "end": "1608640"
  },
  {
    "text": "extra time we're heading to penalty",
    "start": "1608640",
    "end": "1609919"
  },
  {
    "text": "kicks excitement and stress grows",
    "start": "1609919",
    "end": "1611200"
  },
  {
    "text": "throughout the shout out until France",
    "start": "1611200",
    "end": "1612559"
  },
  {
    "text": "misses and Argentina",
    "start": "1612559",
    "end": "1614320"
  },
  {
    "text": "doesn't",
    "start": "1614320",
    "end": "1615840"
  },
  {
    "text": "Argentina let's go I never even watched",
    "start": "1615840",
    "end": "1619159"
  },
  {
    "text": "this this was fantastic this probably",
    "start": "1619159",
    "end": "1620840"
  },
  {
    "text": "was a lot of fun to",
    "start": "1620840",
    "end": "1622120"
  },
  {
    "text": "watch that was cool people all over the",
    "start": "1622120",
    "end": "1624559"
  },
  {
    "text": "world stressed watching this incredible",
    "start": "1624559",
    "end": "1625960"
  },
  {
    "text": "match but meanwhile Discord and the",
    "start": "1625960",
    "end": "1627360"
  },
  {
    "text": "message database aren't breaking a sweat",
    "start": "1627360",
    "end": "1629720"
  },
  {
    "text": "we're way up on messages send and",
    "start": "1629720",
    "end": "1631320"
  },
  {
    "text": "handling it perfectly with our rust",
    "start": "1631320",
    "end": "1632840"
  },
  {
    "text": "based data services let's go rust and",
    "start": "1632840",
    "end": "1635840"
  },
  {
    "text": "Sil DB we able to shoulder this traffic",
    "start": "1635840",
    "end": "1638200"
  },
  {
    "text": "and provide platform for our users to",
    "start": "1638200",
    "end": "1639840"
  },
  {
    "text": "communicate we've built a system that",
    "start": "1639840",
    "end": "1641600"
  },
  {
    "text": "can handle trillions of messages and if",
    "start": "1641600",
    "end": "1643039"
  },
  {
    "text": "it works and if this work is something",
    "start": "1643039",
    "end": "1645320"
  },
  {
    "text": "that excites you check out our career",
    "start": "1645320",
    "end": "1648240"
  },
  {
    "text": "your",
    "start": "1648240",
    "end": "1650440"
  },
  {
    "text": "page check it out if you like rust okay",
    "start": "1652039",
    "end": "1656360"
  },
  {
    "text": "uh by the way this this bow fella right",
    "start": "1656360",
    "end": "1659000"
  },
  {
    "text": "here hey bow I would just like to let",
    "start": "1659000",
    "end": "1661399"
  },
  {
    "text": "you know personally that I genuinely",
    "start": "1661399",
    "end": "1663960"
  },
  {
    "text": "enjoyed reading this article it was",
    "start": "1663960",
    "end": "1666399"
  },
  {
    "text": "great and I'm very happy that you",
    "start": "1666399",
    "end": "1669279"
  },
  {
    "text": "rewrote it in",
    "start": "1669279",
    "end": "1671960"
  },
  {
    "text": "Rust Honestly made me happy everyone",
    "start": "1673080",
    "end": "1675519"
  },
  {
    "text": "give them a clap give them a clap give B",
    "start": "1675519",
    "end": "1677080"
  },
  {
    "text": "A clap say nice job B W for B",
    "start": "1677080",
    "end": "1682000"
  }
]