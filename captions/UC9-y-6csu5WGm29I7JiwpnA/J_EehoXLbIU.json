[
  {
    "start": "0",
    "end": "20000"
  },
  {
    "text": "okay so today we're going to talk about",
    "start": "0",
    "end": "4560"
  },
  {
    "text": "something with not a very exciting name",
    "start": "4560",
    "end": "6799"
  },
  {
    "text": "but basically the way I would I would uh",
    "start": "6799",
    "end": "11580"
  },
  {
    "text": "make your viewers interested is it's a",
    "start": "11580",
    "end": "13320"
  },
  {
    "text": "way of programming the kernel without",
    "start": "13320",
    "end": "16440"
  },
  {
    "text": "programming the kernel",
    "start": "16440",
    "end": "19940"
  },
  {
    "start": "20000",
    "end": "452000"
  },
  {
    "text": "I've heard some people say what",
    "start": "21119",
    "end": "24420"
  },
  {
    "text": "JavaScript is to the web",
    "start": "24420",
    "end": "27260"
  },
  {
    "text": "uh ebpf is to the operating system so",
    "start": "27260",
    "end": "32640"
  },
  {
    "text": "there's a big important distinction in",
    "start": "32640",
    "end": "35460"
  },
  {
    "text": "most modern computers between user space",
    "start": "35460",
    "end": "39360"
  },
  {
    "text": "down here and it's where we spend most",
    "start": "39360",
    "end": "42180"
  },
  {
    "text": "of our prayer time programming and",
    "start": "42180",
    "end": "43500"
  },
  {
    "text": "running applications",
    "start": "43500",
    "end": "45420"
  },
  {
    "text": "and the kernel which is dealt with by",
    "start": "45420",
    "end": "48239"
  },
  {
    "text": "the operating system",
    "start": "48239",
    "end": "50280"
  },
  {
    "text": "and the kernel is doing things like",
    "start": "50280",
    "end": "52320"
  },
  {
    "text": "taking care of the lower level details",
    "start": "52320",
    "end": "54600"
  },
  {
    "text": "of files and",
    "start": "54600",
    "end": "58199"
  },
  {
    "text": "um",
    "start": "58199",
    "end": "58860"
  },
  {
    "text": "making sure that display drivers and",
    "start": "58860",
    "end": "61980"
  },
  {
    "text": "everything run properly one issue comes",
    "start": "61980",
    "end": "65460"
  },
  {
    "text": "if you want to ask questions about say",
    "start": "65460",
    "end": "70500"
  },
  {
    "text": "file access or TCP transfers or things",
    "start": "70500",
    "end": "74760"
  },
  {
    "text": "like that so you want to ask questions",
    "start": "74760",
    "end": "76320"
  },
  {
    "text": "that are",
    "start": "76320",
    "end": "78360"
  },
  {
    "text": "you're interrogating the operating",
    "start": "78360",
    "end": "80700"
  },
  {
    "text": "system to understand you're monitoring",
    "start": "80700",
    "end": "82560"
  },
  {
    "text": "your system",
    "start": "82560",
    "end": "84420"
  },
  {
    "text": "and if you want to ask the question",
    "start": "84420",
    "end": "87619"
  },
  {
    "text": "about say TCP connections or say file IO",
    "start": "87619",
    "end": "94560"
  },
  {
    "text": "and you're writing your monitoring",
    "start": "94560",
    "end": "96119"
  },
  {
    "text": "program you have this great new idea for",
    "start": "96119",
    "end": "98579"
  },
  {
    "text": "how you're going to",
    "start": "98579",
    "end": "100140"
  },
  {
    "text": "stop a distributed denial of service or",
    "start": "100140",
    "end": "103200"
  },
  {
    "text": "something like this but you're writing",
    "start": "103200",
    "end": "105420"
  },
  {
    "text": "it in user space",
    "start": "105420",
    "end": "107340"
  },
  {
    "text": "so you need to ask these questions via",
    "start": "107340",
    "end": "111119"
  },
  {
    "text": "an a p i application program interface",
    "start": "111119",
    "end": "116600"
  },
  {
    "text": "and that limits what you can do and it",
    "start": "116600",
    "end": "122460"
  },
  {
    "text": "puts a bit of a drag on how quickly you",
    "start": "122460",
    "end": "125939"
  },
  {
    "text": "can do it",
    "start": "125939",
    "end": "127020"
  },
  {
    "text": "so if you really",
    "start": "127020",
    "end": "129060"
  },
  {
    "text": "want to know you want to monitor file",
    "start": "129060",
    "end": "131819"
  },
  {
    "text": "access real quickly you want to monitor",
    "start": "131819",
    "end": "135000"
  },
  {
    "text": "TCP connections input output things",
    "start": "135000",
    "end": "139020"
  },
  {
    "text": "using memory or whatever ideally you",
    "start": "139020",
    "end": "142260"
  },
  {
    "text": "want something running up here in the",
    "start": "142260",
    "end": "144420"
  },
  {
    "text": "kernel so ideally",
    "start": "144420",
    "end": "146580"
  },
  {
    "text": "you want your program up here I should",
    "start": "146580",
    "end": "149220"
  },
  {
    "text": "emphasize the kernel isn't magically",
    "start": "149220",
    "end": "151080"
  },
  {
    "text": "faster but for doing accesses on whether",
    "start": "151080",
    "end": "154560"
  },
  {
    "text": "a file is uh being accessed for looking",
    "start": "154560",
    "end": "157379"
  },
  {
    "text": "at things like file read rights TCP in",
    "start": "157379",
    "end": "160379"
  },
  {
    "text": "outs the kernel is much quicker you",
    "start": "160379",
    "end": "162239"
  },
  {
    "text": "don't have to go through this API and",
    "start": "162239",
    "end": "165300"
  },
  {
    "text": "make calls upwards into the kernel",
    "start": "165300",
    "end": "167340"
  },
  {
    "text": "you're already there there's a lot of",
    "start": "167340",
    "end": "169379"
  },
  {
    "text": "problems with that though if you want",
    "start": "169379",
    "end": "170700"
  },
  {
    "text": "that program to reside in the kernel",
    "start": "170700",
    "end": "173760"
  },
  {
    "text": "kernel programming is pretty tricky",
    "start": "173760",
    "end": "177540"
  },
  {
    "text": "and then you say to somebody hey oh I've",
    "start": "177540",
    "end": "180959"
  },
  {
    "text": "written this great new monitoring tool",
    "start": "180959",
    "end": "182760"
  },
  {
    "text": "oh great so what do I do to run your",
    "start": "182760",
    "end": "185099"
  },
  {
    "text": "application",
    "start": "185099",
    "end": "186180"
  },
  {
    "text": "well step one rebuild the kernel of your",
    "start": "186180",
    "end": "189180"
  },
  {
    "text": "computer",
    "start": "189180",
    "end": "190680"
  },
  {
    "text": "so you've already got a big kind of",
    "start": "190680",
    "end": "192420"
  },
  {
    "text": "barrier to entry or let's imagine you're",
    "start": "192420",
    "end": "194879"
  },
  {
    "text": "working on Linux which everybody should",
    "start": "194879",
    "end": "198060"
  },
  {
    "text": "be uh then you'll say uh",
    "start": "198060",
    "end": "201060"
  },
  {
    "text": "dead Airlines 12 hours could you put my",
    "start": "201060",
    "end": "204720"
  },
  {
    "text": "program in your kernel I have been very",
    "start": "204720",
    "end": "206280"
  },
  {
    "text": "good Richard Clegg and hope that he's",
    "start": "206280",
    "end": "208560"
  },
  {
    "text": "going to include it and that maybe takes",
    "start": "208560",
    "end": "210780"
  },
  {
    "text": "a few years",
    "start": "210780",
    "end": "212760"
  },
  {
    "text": "so is there some way we can get little",
    "start": "212760",
    "end": "215879"
  },
  {
    "text": "hooks into the kernel",
    "start": "215879",
    "end": "219599"
  },
  {
    "text": "um and it turns out there's a little",
    "start": "219599",
    "end": "222000"
  },
  {
    "text": "virtual machine in a way I think it's",
    "start": "222000",
    "end": "225180"
  },
  {
    "text": "really badly misnamed now e b p f",
    "start": "225180",
    "end": "230420"
  },
  {
    "text": "extended Berkeley packet filter which is",
    "start": "230420",
    "end": "233400"
  },
  {
    "text": "a really weird name because its Origins",
    "start": "233400",
    "end": "235440"
  },
  {
    "text": "are really strange around about the 90s",
    "start": "235440",
    "end": "238799"
  },
  {
    "text": "early 90s some researchers in Berkeley",
    "start": "238799",
    "end": "241140"
  },
  {
    "text": "about what they call a packet filter",
    "start": "241140",
    "end": "242519"
  },
  {
    "text": "they were networking people",
    "start": "242519",
    "end": "244980"
  },
  {
    "text": "and they were looking at Network traces",
    "start": "244980",
    "end": "246720"
  },
  {
    "text": "and I want some simple way to say",
    "start": "246720",
    "end": "249599"
  },
  {
    "text": "give me all TCP connections to Port 80",
    "start": "249599",
    "end": "252900"
  },
  {
    "text": "or give me all UDP packets please so",
    "start": "252900",
    "end": "256919"
  },
  {
    "text": "they wrote kind of a a regex regular",
    "start": "256919",
    "end": "260040"
  },
  {
    "text": "expression match for Packers right",
    "start": "260040",
    "end": "263759"
  },
  {
    "text": "and I've been aware of this for years",
    "start": "263759",
    "end": "266639"
  },
  {
    "text": "but then a few years ago I started",
    "start": "266639",
    "end": "268080"
  },
  {
    "text": "noticing lots of my networking friends",
    "start": "268080",
    "end": "269580"
  },
  {
    "text": "in conferences they were presenting all",
    "start": "269580",
    "end": "271800"
  },
  {
    "text": "this stuff on Berkeley packet filter I",
    "start": "271800",
    "end": "274080"
  },
  {
    "text": "was like",
    "start": "274080",
    "end": "274919"
  },
  {
    "text": "what's going on here packet filter can't",
    "start": "274919",
    "end": "277199"
  },
  {
    "text": "do that",
    "start": "277199",
    "end": "278580"
  },
  {
    "text": "sometime around about 2014",
    "start": "278580",
    "end": "283020"
  },
  {
    "text": "people came up with an idea though this",
    "start": "283380",
    "end": "285000"
  },
  {
    "text": "packet filter can run in the kernel",
    "start": "285000",
    "end": "287280"
  },
  {
    "text": "maybe you can do clever things in the",
    "start": "287280",
    "end": "289199"
  },
  {
    "text": "kernel and then they started to extend",
    "start": "289199",
    "end": "292500"
  },
  {
    "text": "it and extend it and give it more and",
    "start": "292500",
    "end": "294120"
  },
  {
    "text": "more abilities",
    "start": "294120",
    "end": "296460"
  },
  {
    "text": "um and now it's gone so far away from",
    "start": "296460",
    "end": "299340"
  },
  {
    "text": "being this thing that filters packets",
    "start": "299340",
    "end": "302460"
  },
  {
    "text": "and tells you which packets which match",
    "start": "302460",
    "end": "304139"
  },
  {
    "text": "expression",
    "start": "304139",
    "end": "305400"
  },
  {
    "text": "so now in",
    "start": "305400",
    "end": "308100"
  },
  {
    "text": "um Linux and sort of working in Windows",
    "start": "308100",
    "end": "312180"
  },
  {
    "text": "and I believe a Mac versus on the way",
    "start": "312180",
    "end": "313979"
  },
  {
    "text": "we've got this little virtual machine",
    "start": "313979",
    "end": "318120"
  },
  {
    "text": "sitting in the kernel and do you use a",
    "start": "318120",
    "end": "321360"
  },
  {
    "text": "space can write some code and if it",
    "start": "321360",
    "end": "324979"
  },
  {
    "text": "matches what the virtual machine wants",
    "start": "324979",
    "end": "329160"
  },
  {
    "text": "you can be running little code hooks up",
    "start": "329160",
    "end": "331620"
  },
  {
    "text": "in the kernel",
    "start": "331620",
    "end": "333419"
  },
  {
    "text": "now what's the use of that it means you",
    "start": "333419",
    "end": "336419"
  },
  {
    "text": "can do incredibly quick monitoring or",
    "start": "336419",
    "end": "340500"
  },
  {
    "text": "outputting any kind of drag on the CPU",
    "start": "340500",
    "end": "343620"
  },
  {
    "text": "this thing has even been taken a little",
    "start": "343620",
    "end": "345900"
  },
  {
    "text": "bit further so there is something called",
    "start": "345900",
    "end": "349740"
  },
  {
    "text": "xdf so we have if we have our network",
    "start": "349740",
    "end": "352280"
  },
  {
    "text": "interface card so their packets are",
    "start": "352280",
    "end": "354780"
  },
  {
    "text": "coming in here to be passed up to the",
    "start": "354780",
    "end": "356699"
  },
  {
    "text": "kernel",
    "start": "356699",
    "end": "357780"
  },
  {
    "text": "there's even something called X",
    "start": "357780",
    "end": "362180"
  },
  {
    "text": "d f which will allow these bits of these",
    "start": "362180",
    "end": "365460"
  },
  {
    "text": "BPF programs draw on the interface card",
    "start": "365460",
    "end": "367800"
  },
  {
    "text": "so you're not even taking the burden on",
    "start": "367800",
    "end": "370680"
  },
  {
    "text": "the main parts of your computer now the",
    "start": "370680",
    "end": "372960"
  },
  {
    "text": "burden of computation might be going on",
    "start": "372960",
    "end": "374639"
  },
  {
    "text": "the network interface card",
    "start": "374639",
    "end": "377639"
  },
  {
    "text": "so we've got a way of writing programs",
    "start": "377639",
    "end": "381000"
  },
  {
    "text": "in user space",
    "start": "381000",
    "end": "382500"
  },
  {
    "text": "having parts of the logic the parts of",
    "start": "382500",
    "end": "385319"
  },
  {
    "text": "logic that need to be fast",
    "start": "385319",
    "end": "387300"
  },
  {
    "text": "run on the Kernel or even on the neck",
    "start": "387300",
    "end": "390840"
  },
  {
    "text": "and it's it's just there's an explosion",
    "start": "390840",
    "end": "394560"
  },
  {
    "text": "of monitoring tools so for example one",
    "start": "394560",
    "end": "399419"
  },
  {
    "text": "that loads of you probably use your",
    "start": "399419",
    "end": "401940"
  },
  {
    "text": "Android battery monitoring tool if",
    "start": "401940",
    "end": "404039"
  },
  {
    "text": "you've got a modern version of Android",
    "start": "404039",
    "end": "405380"
  },
  {
    "text": "it's probably running ebpf somewhere in",
    "start": "405380",
    "end": "409020"
  },
  {
    "text": "the mix to look at powered events and",
    "start": "409020",
    "end": "411720"
  },
  {
    "text": "Battery events and stop stop starts with",
    "start": "411720",
    "end": "414419"
  },
  {
    "text": "bits of software and you know sometimes",
    "start": "414419",
    "end": "416940"
  },
  {
    "text": "if you've got an Android phone you'll",
    "start": "416940",
    "end": "418020"
  },
  {
    "text": "get that thing saying application",
    "start": "418020",
    "end": "420720"
  },
  {
    "text": "Facebook is using lots of battery do you",
    "start": "420720",
    "end": "422880"
  },
  {
    "text": "want to stop it that is probably using",
    "start": "422880",
    "end": "425340"
  },
  {
    "text": "ebpf somewhere in the mix on a modern",
    "start": "425340",
    "end": "427259"
  },
  {
    "text": "Android phone I've only just been",
    "start": "427259",
    "end": "429600"
  },
  {
    "text": "learning this so I'm going to show you",
    "start": "429600",
    "end": "431479"
  },
  {
    "text": "the world's worst demo of this because",
    "start": "431479",
    "end": "435300"
  },
  {
    "text": "um I'm I'm not a skilled programmer on",
    "start": "435300",
    "end": "439440"
  },
  {
    "text": "ebpf but what I wanted to do was create",
    "start": "439440",
    "end": "441720"
  },
  {
    "text": "a kind of minimum application for",
    "start": "441720",
    "end": "444240"
  },
  {
    "text": "viewers to see the kind of things that",
    "start": "444240",
    "end": "446940"
  },
  {
    "text": "this can do",
    "start": "446940",
    "end": "448560"
  },
  {
    "text": "but absolutely don't copy what I've done",
    "start": "448560",
    "end": "450720"
  },
  {
    "text": "because it's really bad what I've done",
    "start": "450720",
    "end": "453539"
  },
  {
    "start": "452000",
    "end": "689000"
  },
  {
    "text": "is a little python demo here",
    "start": "453539",
    "end": "457139"
  },
  {
    "text": "um",
    "start": "457139",
    "end": "458520"
  },
  {
    "text": "and",
    "start": "458520",
    "end": "459900"
  },
  {
    "text": "I will say this this is uh this is very",
    "start": "459900",
    "end": "462539"
  },
  {
    "text": "kind of bodged together and the first",
    "start": "462539",
    "end": "464639"
  },
  {
    "text": "thing you'll notice is that this doesn't",
    "start": "464639",
    "end": "466800"
  },
  {
    "text": "look like python because",
    "start": "466800",
    "end": "469740"
  },
  {
    "text": "at the top of the screen here you can",
    "start": "469740",
    "end": "471780"
  },
  {
    "text": "see it defining",
    "start": "471780",
    "end": "473780"
  },
  {
    "text": "BPF Berkeley packet filter text and then",
    "start": "473780",
    "end": "477539"
  },
  {
    "text": "we've got a C program hiding",
    "start": "477539",
    "end": "480120"
  },
  {
    "text": "as a matter of text in our Python",
    "start": "480120",
    "end": "483539"
  },
  {
    "text": "program",
    "start": "483539",
    "end": "484380"
  },
  {
    "text": "so we've got a program here called Don't",
    "start": "484380",
    "end": "486419"
  },
  {
    "text": "Touch dot py it's looking like a c",
    "start": "486419",
    "end": "490259"
  },
  {
    "text": "program at the top here we can see a",
    "start": "490259",
    "end": "494039"
  },
  {
    "text": "little structure that's going to store a",
    "start": "494039",
    "end": "495599"
  },
  {
    "text": "name and the length of it because we're",
    "start": "495599",
    "end": "497280"
  },
  {
    "text": "doing old school C now so we need to say",
    "start": "497280",
    "end": "499860"
  },
  {
    "text": "when we've got a string we need to say",
    "start": "499860",
    "end": "501180"
  },
  {
    "text": "not only the characters but the length",
    "start": "501180",
    "end": "503759"
  },
  {
    "text": "so that's because it's running on the",
    "start": "503759",
    "end": "505500"
  },
  {
    "text": "Kernel it's quite a low level yeah yeah",
    "start": "505500",
    "end": "507539"
  },
  {
    "text": "so these these BPF programs need to be",
    "start": "507539",
    "end": "510599"
  },
  {
    "text": "really low level it's a virtual machine",
    "start": "510599",
    "end": "512700"
  },
  {
    "text": "that's pretty much assembler as I",
    "start": "512700",
    "end": "515760"
  },
  {
    "text": "understand it the EPF hash is a",
    "start": "515760",
    "end": "519000"
  },
  {
    "text": "structure and this line is giving it a",
    "start": "519000",
    "end": "520979"
  },
  {
    "text": "name access it's telling us it's going",
    "start": "520979",
    "end": "523680"
  },
  {
    "text": "to map",
    "start": "523680",
    "end": "525140"
  },
  {
    "text": "this info about names to an integer this",
    "start": "525140",
    "end": "530220"
  },
  {
    "text": "is not the way I should have done it I",
    "start": "530220",
    "end": "532560"
  },
  {
    "text": "have copied this code for a man called",
    "start": "532560",
    "end": "534060"
  },
  {
    "text": "Brendan Greg who's literally written a",
    "start": "534060",
    "end": "536279"
  },
  {
    "text": "book on BPF don't worry too much about",
    "start": "536279",
    "end": "538320"
  },
  {
    "text": "this bit of the code this is just",
    "start": "538320",
    "end": "540120"
  },
  {
    "text": "grabbing the name of a fail being",
    "start": "540120",
    "end": "543839"
  },
  {
    "text": "accessed",
    "start": "543839",
    "end": "545640"
  },
  {
    "text": "so some file is being accessed and here",
    "start": "545640",
    "end": "549420"
  },
  {
    "text": "I'm storing the name of that file",
    "start": "549420",
    "end": "553260"
  },
  {
    "text": "and then",
    "start": "553260",
    "end": "555420"
  },
  {
    "text": "I am storing the name itself so I'm",
    "start": "555420",
    "end": "558120"
  },
  {
    "text": "showing the length of the name and then",
    "start": "558120",
    "end": "559980"
  },
  {
    "text": "the name pushing into my hash",
    "start": "559980",
    "end": "563339"
  },
  {
    "text": "the number one why am I pushing in the",
    "start": "563339",
    "end": "565560"
  },
  {
    "text": "number one because I shouldn't be using",
    "start": "565560",
    "end": "567480"
  },
  {
    "text": "a hash at all to do this I'm just",
    "start": "567480",
    "end": "569399"
  },
  {
    "text": "adapting somebody else's code so I'm",
    "start": "569399",
    "end": "570899"
  },
  {
    "text": "creating a hash map where I should",
    "start": "570899",
    "end": "572820"
  },
  {
    "text": "really do something else but I'm",
    "start": "572820",
    "end": "574620"
  },
  {
    "text": "creating a hash map between the name of",
    "start": "574620",
    "end": "577680"
  },
  {
    "text": "a file that has been accessed and the",
    "start": "577680",
    "end": "580860"
  },
  {
    "text": "number one so every time a file is",
    "start": "580860",
    "end": "582300"
  },
  {
    "text": "accessed this is going to happen",
    "start": "582300",
    "end": "585000"
  },
  {
    "text": "he is the python so here now we're back",
    "start": "585000",
    "end": "587640"
  },
  {
    "text": "in Python land a little bit more",
    "start": "587640",
    "end": "589260"
  },
  {
    "text": "comfortable and this special line says",
    "start": "589260",
    "end": "593339"
  },
  {
    "text": "uh compile me up that text that I was",
    "start": "593339",
    "end": "597540"
  },
  {
    "text": "looking at that BPF program compile it",
    "start": "597540",
    "end": "599459"
  },
  {
    "text": "up and these flags are just going to",
    "start": "599459",
    "end": "601920"
  },
  {
    "text": "stop it spitting a lot of warnings to",
    "start": "601920",
    "end": "604380"
  },
  {
    "text": "the screen",
    "start": "604380",
    "end": "605519"
  },
  {
    "text": "and here's a crucial bit we're going to",
    "start": "605519",
    "end": "608040"
  },
  {
    "text": "attach a kernel level probe to the event",
    "start": "608040",
    "end": "612860"
  },
  {
    "text": "VFS read a read in the file system so",
    "start": "612860",
    "end": "616320"
  },
  {
    "text": "every time a file is read in the file",
    "start": "616320",
    "end": "618899"
  },
  {
    "text": "system we're going to call our little",
    "start": "618899",
    "end": "620880"
  },
  {
    "text": "BPS program and our little BPS program",
    "start": "620880",
    "end": "624120"
  },
  {
    "text": "is going to read and put a name and the",
    "start": "624120",
    "end": "628860"
  },
  {
    "text": "number one into this little hash map",
    "start": "628860",
    "end": "631440"
  },
  {
    "text": "so now whenever a file is read it goes",
    "start": "631440",
    "end": "635519"
  },
  {
    "text": "to flash mapping is associated with the",
    "start": "635519",
    "end": "636959"
  },
  {
    "text": "number one",
    "start": "636959",
    "end": "638040"
  },
  {
    "text": "and yes that is a terribly inefficient",
    "start": "638040",
    "end": "640080"
  },
  {
    "text": "way to do it now we're in proper python",
    "start": "640080",
    "end": "642420"
  },
  {
    "text": "mode and",
    "start": "642420",
    "end": "645240"
  },
  {
    "text": "we're entering a loop",
    "start": "645240",
    "end": "647459"
  },
  {
    "text": "sleeping for a second looking for a",
    "start": "647459",
    "end": "650160"
  },
  {
    "text": "keyboard interfa interrupting casual",
    "start": "650160",
    "end": "651959"
  },
  {
    "text": "Board of the program",
    "start": "651959",
    "end": "653640"
  },
  {
    "text": "and grabbing that table access and that",
    "start": "653640",
    "end": "656760"
  },
  {
    "text": "table is a table of the name of every",
    "start": "656760",
    "end": "660480"
  },
  {
    "text": "file that has been accessed we're going",
    "start": "660480",
    "end": "663300"
  },
  {
    "text": "to look through that table and see if we",
    "start": "663300",
    "end": "666779"
  },
  {
    "text": "can find a file called hands off dot",
    "start": "666779",
    "end": "670200"
  },
  {
    "text": "text",
    "start": "670200",
    "end": "671279"
  },
  {
    "text": "so that's what we're looking for if we",
    "start": "671279",
    "end": "673140"
  },
  {
    "text": "find that file called hands off.txt",
    "start": "673140",
    "end": "675240"
  },
  {
    "text": "we're going to play an alert",
    "start": "675240",
    "end": "679260"
  },
  {
    "text": "and if we've alerted too many times",
    "start": "679260",
    "end": "681420"
  },
  {
    "text": "we're going to exit and that's all we're",
    "start": "681420",
    "end": "683279"
  },
  {
    "text": "going to do and then here while that's",
    "start": "683279",
    "end": "685320"
  },
  {
    "text": "all happened we're going to clear our",
    "start": "685320",
    "end": "686820"
  },
  {
    "text": "list of access to files",
    "start": "686820",
    "end": "688860"
  },
  {
    "text": "so let's see what happens when we run",
    "start": "688860",
    "end": "691680"
  },
  {
    "start": "689000",
    "end": "1134000"
  },
  {
    "text": "this program so I'm going to run don't",
    "start": "691680",
    "end": "694920"
  },
  {
    "text": "touch",
    "start": "694920",
    "end": "696300"
  },
  {
    "text": "needs to be run as a root in this case",
    "start": "696300",
    "end": "699120"
  },
  {
    "text": "okay so now the program's running",
    "start": "699120",
    "end": "702079"
  },
  {
    "text": "everyone's second it's looking down the",
    "start": "702079",
    "end": "706260"
  },
  {
    "text": "um list of files accessed and it's",
    "start": "706260",
    "end": "710700"
  },
  {
    "text": "checking whether any of them are called",
    "start": "710700",
    "end": "712740"
  },
  {
    "text": "hands off.txt",
    "start": "712740",
    "end": "714839"
  },
  {
    "text": "now when I access the file hands off.txt",
    "start": "714839",
    "end": "720000"
  },
  {
    "text": "you say oh",
    "start": "720000",
    "end": "722040"
  },
  {
    "text": "it's spotted that I've done that and",
    "start": "722040",
    "end": "723779"
  },
  {
    "text": "it's saying do not look at the file",
    "start": "723779",
    "end": "726120"
  },
  {
    "text": "try again",
    "start": "726120",
    "end": "727980"
  },
  {
    "text": "and it's given me another warning I",
    "start": "727980",
    "end": "730320"
  },
  {
    "text": "asked you not to look at the file and we",
    "start": "730320",
    "end": "732240"
  },
  {
    "text": "can keep on messing about with that and",
    "start": "732240",
    "end": "735000"
  },
  {
    "text": "it will keep on doing that now okay",
    "start": "735000",
    "end": "736620"
  },
  {
    "text": "that's a really really silly silly",
    "start": "736620",
    "end": "738899"
  },
  {
    "text": "example but the original plan I've",
    "start": "738899",
    "end": "741420"
  },
  {
    "text": "adapted that from was looking at the",
    "start": "741420",
    "end": "743700"
  },
  {
    "text": "most accessed files on the system so",
    "start": "743700",
    "end": "746100"
  },
  {
    "text": "instead of just saying is it hands-off",
    "start": "746100",
    "end": "749040"
  },
  {
    "text": "dot text it was",
    "start": "749040",
    "end": "751980"
  },
  {
    "text": "um sorting them all in Python sort them",
    "start": "751980",
    "end": "754620"
  },
  {
    "text": "all out printing them in the table and",
    "start": "754620",
    "end": "756600"
  },
  {
    "text": "showing you a useful monitoring system",
    "start": "756600",
    "end": "758220"
  },
  {
    "text": "with the most accessed files on the",
    "start": "758220",
    "end": "760200"
  },
  {
    "text": "system",
    "start": "760200",
    "end": "762120"
  },
  {
    "text": "now here's the thing if you're going to",
    "start": "762120",
    "end": "764220"
  },
  {
    "text": "run code in the kernel",
    "start": "764220",
    "end": "766800"
  },
  {
    "text": "you have to be pretty sure",
    "start": "766800",
    "end": "770579"
  },
  {
    "text": "that",
    "start": "770579",
    "end": "772079"
  },
  {
    "text": "it's not going to disrupt your machine",
    "start": "772079",
    "end": "774240"
  },
  {
    "text": "running stuff in a kernel is inherently",
    "start": "774240",
    "end": "776339"
  },
  {
    "text": "a little dangerous",
    "start": "776339",
    "end": "778079"
  },
  {
    "text": "so let's try something else let's try",
    "start": "778079",
    "end": "779820"
  },
  {
    "text": "something a bit dumb let's calculate",
    "start": "779820",
    "end": "782220"
  },
  {
    "text": "some Fibonacci numbers so everybody",
    "start": "782220",
    "end": "783959"
  },
  {
    "text": "loves Fibonacci numbers so my kernel",
    "start": "783959",
    "end": "787380"
  },
  {
    "text": "program now is going to calculate some",
    "start": "787380",
    "end": "789740"
  },
  {
    "text": "Fibonacci numbers so I've got a new file",
    "start": "789740",
    "end": "792720"
  },
  {
    "text": "it's almost exactly the same but I'm",
    "start": "792720",
    "end": "795899"
  },
  {
    "text": "going to add in something new into our",
    "start": "795899",
    "end": "797220"
  },
  {
    "text": "structure we're going to add in a 64-bit",
    "start": "797220",
    "end": "801320"
  },
  {
    "text": "Fibonacci number call uh that I'm",
    "start": "801320",
    "end": "803760"
  },
  {
    "text": "calling fib and",
    "start": "803760",
    "end": "806760"
  },
  {
    "text": "I'm doing an iterative calculation of",
    "start": "806760",
    "end": "809220"
  },
  {
    "text": "Fibonacci",
    "start": "809220",
    "end": "810540"
  },
  {
    "text": "now you'll be saying oh hold on Richard",
    "start": "810540",
    "end": "812880"
  },
  {
    "text": "why are you doing that iteratively it's",
    "start": "812880",
    "end": "814320"
  },
  {
    "text": "the classic recursive program I'll come",
    "start": "814320",
    "end": "816360"
  },
  {
    "text": "to that in a minute but iteratively",
    "start": "816360",
    "end": "818760"
  },
  {
    "text": "we're going to go around and we're going",
    "start": "818760",
    "end": "821279"
  },
  {
    "text": "to add together these Fibonacci numbers",
    "start": "821279",
    "end": "824040"
  },
  {
    "text": "first or second the usual way we do it",
    "start": "824040",
    "end": "827040"
  },
  {
    "text": "and return the results so Fibonacci and",
    "start": "827040",
    "end": "829740"
  },
  {
    "text": "and I've got n is 40 which is about what",
    "start": "829740",
    "end": "832680"
  },
  {
    "text": "I can do without an overflow so let me",
    "start": "832680",
    "end": "835560"
  },
  {
    "text": "run that",
    "start": "835560",
    "end": "836820"
  },
  {
    "text": "and we're doing exactly the same thing",
    "start": "836820",
    "end": "838680"
  },
  {
    "text": "for no reason whatsoever we're looking",
    "start": "838680",
    "end": "840660"
  },
  {
    "text": "at the file system we're waiting for the",
    "start": "840660",
    "end": "843180"
  },
  {
    "text": "don't touch this file",
    "start": "843180",
    "end": "845060"
  },
  {
    "text": "and when I press it",
    "start": "845060",
    "end": "847680"
  },
  {
    "text": "instead of just giving me a warning it's",
    "start": "847680",
    "end": "849540"
  },
  {
    "text": "calculated the 40th Fibonacci number",
    "start": "849540",
    "end": "852240"
  },
  {
    "text": "which I can look across and see that",
    "start": "852240",
    "end": "854519"
  },
  {
    "text": "I've got the correct one if I've made it",
    "start": "854519",
    "end": "856920"
  },
  {
    "text": "much higher it would have overflowed",
    "start": "856920",
    "end": "859220"
  },
  {
    "text": "why am I doing this stupid thing because",
    "start": "859220",
    "end": "862560"
  },
  {
    "text": "it is a really Daft thing to do",
    "start": "862560",
    "end": "866540"
  },
  {
    "text": "one one thing is you're putting this",
    "start": "866540",
    "end": "869880"
  },
  {
    "text": "thing into the kernel",
    "start": "869880",
    "end": "871860"
  },
  {
    "text": "what if it stopped running what if it it",
    "start": "871860",
    "end": "874860"
  },
  {
    "text": "didn't come back now you've got a kind",
    "start": "874860",
    "end": "877200"
  },
  {
    "text": "of a rogue process in your kernel uh",
    "start": "877200",
    "end": "880079"
  },
  {
    "text": "that's not great so let's see what",
    "start": "880079",
    "end": "882120"
  },
  {
    "text": "happens if I remove the increment from",
    "start": "882120",
    "end": "885180"
  },
  {
    "text": "that Loop so I've removed the I plus",
    "start": "885180",
    "end": "886860"
  },
  {
    "text": "plus let's imagine I've just messed up",
    "start": "886860",
    "end": "889320"
  },
  {
    "text": "in my programming as happens so often so",
    "start": "889320",
    "end": "892260"
  },
  {
    "text": "now this is not going to terminate I've",
    "start": "892260",
    "end": "893940"
  },
  {
    "text": "written a an unterminating Loop",
    "start": "893940",
    "end": "896880"
  },
  {
    "text": "and now I try and run this",
    "start": "896880",
    "end": "900240"
  },
  {
    "text": "and what is it done we can see",
    "start": "900240",
    "end": "904440"
  },
  {
    "text": "when it's tried to compile the C code",
    "start": "904440",
    "end": "907980"
  },
  {
    "text": "the ebpf compiler has said",
    "start": "907980",
    "end": "912899"
  },
  {
    "text": "um infinite Loop detected",
    "start": "912899",
    "end": "916199"
  },
  {
    "text": "so it's spotted that I'm trying to do",
    "start": "916199",
    "end": "919920"
  },
  {
    "text": "something sneaky I'm trying to get this",
    "start": "919920",
    "end": "921839"
  },
  {
    "text": "to run forever or or I've messed up or",
    "start": "921839",
    "end": "924660"
  },
  {
    "text": "whatever I've done something that's",
    "start": "924660",
    "end": "926579"
  },
  {
    "text": "going to",
    "start": "926579",
    "end": "927779"
  },
  {
    "text": "not fit within the safety parameters of",
    "start": "927779",
    "end": "930060"
  },
  {
    "text": "my kernel and it stopped my code",
    "start": "930060",
    "end": "933000"
  },
  {
    "text": "compiling and that's also the reason I'm",
    "start": "933000",
    "end": "936660"
  },
  {
    "text": "doing a sort of clunky looking iterative",
    "start": "936660",
    "end": "940320"
  },
  {
    "text": "Fibonacci because the usual recursive",
    "start": "940320",
    "end": "942959"
  },
  {
    "text": "Fibonacci another thing that will make",
    "start": "942959",
    "end": "945060"
  },
  {
    "text": "this this computer says no is trying to",
    "start": "945060",
    "end": "948480"
  },
  {
    "text": "do recursion within",
    "start": "948480",
    "end": "951480"
  },
  {
    "text": "um within the virtual machine here so",
    "start": "951480",
    "end": "954600"
  },
  {
    "text": "that's actually really short demo it's",
    "start": "954600",
    "end": "957959"
  },
  {
    "text": "just absolutely a sort of first level",
    "start": "957959",
    "end": "960060"
  },
  {
    "text": "taster",
    "start": "960060",
    "end": "961680"
  },
  {
    "text": "um",
    "start": "961680",
    "end": "963360"
  },
  {
    "text": "but this",
    "start": "963360",
    "end": "964920"
  },
  {
    "text": "um this is used by lots of things now uh",
    "start": "964920",
    "end": "968160"
  },
  {
    "text": "when you look at the companies using",
    "start": "968160",
    "end": "970500"
  },
  {
    "text": "ebpf it's all of the big players it's",
    "start": "970500",
    "end": "974459"
  },
  {
    "text": "Google and Facebook or meta as we're",
    "start": "974459",
    "end": "977940"
  },
  {
    "text": "supposed to call them now and the guy",
    "start": "977940",
    "end": "980579"
  },
  {
    "text": "whose code I I was using Brendan Gregg",
    "start": "980579",
    "end": "983699"
  },
  {
    "text": "is with Netflix so people and um the",
    "start": "983699",
    "end": "987360"
  },
  {
    "text": "people doing the big networking stuff",
    "start": "987360",
    "end": "989160"
  },
  {
    "text": "are all using this and US researchers",
    "start": "989160",
    "end": "991680"
  },
  {
    "text": "are also getting really excited about",
    "start": "991680",
    "end": "992940"
  },
  {
    "text": "this I'll give a particular example",
    "start": "992940",
    "end": "994940"
  },
  {
    "text": "slightly local uh Cambridge York and",
    "start": "994940",
    "end": "998579"
  },
  {
    "text": "bologna have done some work and they're",
    "start": "998579",
    "end": "1001639"
  },
  {
    "text": "using this to detect when iot devices",
    "start": "1001639",
    "end": "1006519"
  },
  {
    "text": "are producing a different traffic",
    "start": "1006519",
    "end": "1009079"
  },
  {
    "text": "profile than you expect and that might",
    "start": "1009079",
    "end": "1011240"
  },
  {
    "text": "be a sign of a distributed denial of",
    "start": "1011240",
    "end": "1013820"
  },
  {
    "text": "service device",
    "start": "1013820",
    "end": "1015800"
  },
  {
    "text": "so yeah this technology one thing I",
    "start": "1015800",
    "end": "1017959"
  },
  {
    "text": "would say if you're going to play with",
    "start": "1017959",
    "end": "1019639"
  },
  {
    "text": "it it's one of those Technologies where",
    "start": "1019639",
    "end": "1024280"
  },
  {
    "text": "it's at that stage when you read a",
    "start": "1024280",
    "end": "1028880"
  },
  {
    "text": "manual page you read a Blog and you",
    "start": "1028880",
    "end": "1031400"
  },
  {
    "text": "think that sounds great I'll implement",
    "start": "1031400",
    "end": "1032780"
  },
  {
    "text": "it and then you find that that was from",
    "start": "1032780",
    "end": "1037058"
  },
  {
    "text": "2021 and your operating system is from",
    "start": "1037059",
    "end": "1040640"
  },
  {
    "text": "2022 so it doesn't quite work anymore so",
    "start": "1040640",
    "end": "1042860"
  },
  {
    "text": "I would encourage people to have a play",
    "start": "1042860",
    "end": "1044480"
  },
  {
    "text": "with it but I would also encourage you",
    "start": "1044480",
    "end": "1046579"
  },
  {
    "text": "to have a little bit of patience so I've",
    "start": "1046579",
    "end": "1047959"
  },
  {
    "text": "written this for example in a system",
    "start": "1047959",
    "end": "1049940"
  },
  {
    "text": "called BCC",
    "start": "1049940",
    "end": "1051880"
  },
  {
    "text": "and then about an hour or two after I",
    "start": "1051880",
    "end": "1056360"
  },
  {
    "text": "had written it I found somebody saying",
    "start": "1056360",
    "end": "1058760"
  },
  {
    "text": "BCC is obsolete it's so 2022 so that's",
    "start": "1058760",
    "end": "1063260"
  },
  {
    "text": "why I call it a rapidly moving Target if",
    "start": "1063260",
    "end": "1065600"
  },
  {
    "text": "you want to get interested in this",
    "start": "1065600",
    "end": "1066980"
  },
  {
    "text": "because you're in the kernel yeah is",
    "start": "1066980",
    "end": "1068960"
  },
  {
    "text": "there a potential here to kind of look",
    "start": "1068960",
    "end": "1070760"
  },
  {
    "text": "right fry your kind of internal not fry",
    "start": "1070760",
    "end": "1073280"
  },
  {
    "text": "but no lock up the machine you're",
    "start": "1073280",
    "end": "1074960"
  },
  {
    "text": "thinking you're thinking of the Halton",
    "start": "1074960",
    "end": "1076220"
  },
  {
    "text": "cash you know you know it could easily",
    "start": "1076220",
    "end": "1079039"
  },
  {
    "text": "be it so if if you start running non",
    "start": "1079039",
    "end": "1084160"
  },
  {
    "text": "terminating Loops in your kernel then",
    "start": "1084160",
    "end": "1088280"
  },
  {
    "text": "potential potential not great things",
    "start": "1088280",
    "end": "1090500"
  },
  {
    "text": "will happen which is why it's carefully",
    "start": "1090500",
    "end": "1093740"
  },
  {
    "text": "protecting foolishness it's trying to",
    "start": "1093740",
    "end": "1097039"
  },
  {
    "text": "trap it yes I was a bit mystified with",
    "start": "1097039",
    "end": "1099740"
  },
  {
    "text": "this when I start so",
    "start": "1099740",
    "end": "1101360"
  },
  {
    "text": "somebody who's looking at my code it",
    "start": "1101360",
    "end": "1103400"
  },
  {
    "text": "might go Richard what are you doing",
    "start": "1103400",
    "end": "1105620"
  },
  {
    "text": "you've declared FIB of the function but",
    "start": "1105620",
    "end": "1107780"
  },
  {
    "text": "you haven't declared n",
    "start": "1107780",
    "end": "1109520"
  },
  {
    "text": "so if I go u64 am",
    "start": "1109520",
    "end": "1113980"
  },
  {
    "text": "mysteriously now it lets it compile",
    "start": "1115039",
    "end": "1117919"
  },
  {
    "text": "which it really shouldn't maybe the devs",
    "start": "1117919",
    "end": "1120860"
  },
  {
    "text": "could tell me why that is certainly",
    "start": "1120860",
    "end": "1122360"
  },
  {
    "text": "that's beyond my level of knowledge of",
    "start": "1122360",
    "end": "1124160"
  },
  {
    "text": "this system",
    "start": "1124160",
    "end": "1125720"
  },
  {
    "text": "um so you can see a work in progress but",
    "start": "1125720",
    "end": "1128980"
  },
  {
    "text": "really really important and lots of",
    "start": "1128980",
    "end": "1131539"
  },
  {
    "text": "production systems are running it",
    "start": "1131539",
    "end": "1134980"
  },
  {
    "start": "1134000",
    "end": "1151000"
  },
  {
    "text": "how much room it's got left so now the",
    "start": "1135020",
    "end": "1137960"
  },
  {
    "text": "sender knows if I don't want to",
    "start": "1137960",
    "end": "1141260"
  },
  {
    "text": "overwhelm that computer",
    "start": "1141260",
    "end": "1143120"
  },
  {
    "text": "I'm only going to send he got slightly",
    "start": "1143120",
    "end": "1145640"
  },
  {
    "text": "dimmer when we got to this road and then",
    "start": "1145640",
    "end": "1146960"
  },
  {
    "text": "slightly brighter again when we got to",
    "start": "1146960",
    "end": "1148160"
  },
  {
    "text": "this row and we might find that but",
    "start": "1148160",
    "end": "1150200"
  },
  {
    "text": "basically if you've got a",
    "start": "1150200",
    "end": "1153279"
  }
]