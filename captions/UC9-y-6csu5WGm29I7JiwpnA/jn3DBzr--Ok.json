[
  {
    "text": "consensus in terms of computing is",
    "start": "120",
    "end": "1400"
  },
  {
    "text": "similar to consensus in terms of humans",
    "start": "1400",
    "end": "3600"
  },
  {
    "text": "if you're a group of friends who's",
    "start": "3600",
    "end": "5200"
  },
  {
    "text": "organizing to go to coffee and you're",
    "start": "5200",
    "end": "7200"
  },
  {
    "text": "trying to pick a time in which to go you",
    "start": "7200",
    "end": "9639"
  },
  {
    "text": "may have some friends that don't reply",
    "start": "9639",
    "end": "11559"
  },
  {
    "text": "some messages might get lost you might",
    "start": "11559",
    "end": "13559"
  },
  {
    "text": "ask a friend to ask another friend they",
    "start": "13559",
    "end": "15639"
  },
  {
    "text": "might forget about it one friend might",
    "start": "15639",
    "end": "17640"
  },
  {
    "text": "be off having a nap and doesn't reply to",
    "start": "17640",
    "end": "19800"
  },
  {
    "text": "your message despite all of that you",
    "start": "19800",
    "end": "22080"
  },
  {
    "text": "still manage to to reach agreement you",
    "start": "22080",
    "end": "24240"
  },
  {
    "text": "seem still managed to reach consensus",
    "start": "24240",
    "end": "26240"
  },
  {
    "text": "between",
    "start": "26240",
    "end": "28279"
  },
  {
    "text": "you when we're talking about consensus",
    "start": "28279",
    "end": "30519"
  },
  {
    "text": "we're normally talking often inside a",
    "start": "30519",
    "end": "32599"
  },
  {
    "text": "data center using the coffee analogy so",
    "start": "32599",
    "end": "35559"
  },
  {
    "text": "if you've got a group of free friends",
    "start": "35559",
    "end": "38040"
  },
  {
    "text": "Alice Bob and Charlie Alice wants to go",
    "start": "38040",
    "end": "41520"
  },
  {
    "text": "for coffee she'll message Bob and",
    "start": "41520",
    "end": "44239"
  },
  {
    "text": "Charlie and say hey guys do you want to",
    "start": "44239",
    "end": "46239"
  },
  {
    "text": "go for coffee at 2:00 and if these are",
    "start": "46239",
    "end": "49079"
  },
  {
    "text": "nice reliable friends they'll message",
    "start": "49079",
    "end": "51120"
  },
  {
    "text": "back and say yep great let's do 2:00 and",
    "start": "51120",
    "end": "54359"
  },
  {
    "text": "then Alice will message both Bob and",
    "start": "54359",
    "end": "57199"
  },
  {
    "text": "Charlie to confirm that that time is",
    "start": "57199",
    "end": "59640"
  },
  {
    "text": "okay and the agreement has been reached",
    "start": "59640",
    "end": "62000"
  },
  {
    "text": "in practice however anyone who's tried",
    "start": "62000",
    "end": "63680"
  },
  {
    "text": "to organize anything will know that",
    "start": "63680",
    "end": "65518"
  },
  {
    "text": "things aren't that straightforward Alice",
    "start": "65519",
    "end": "67840"
  },
  {
    "text": "May message Bob and Charlie they may",
    "start": "67840",
    "end": "70720"
  },
  {
    "text": "respond and then Alice May confirm with",
    "start": "70720",
    "end": "73200"
  },
  {
    "text": "Bob but she may get distracted maybe she",
    "start": "73200",
    "end": "76560"
  },
  {
    "text": "has a nap maybe she's busy in a meeting",
    "start": "76560",
    "end": "78759"
  },
  {
    "text": "she may never confirm with Charlie",
    "start": "78759",
    "end": "80439"
  },
  {
    "text": "Charlie now doesn't know what's going on",
    "start": "80439",
    "end": "82880"
  },
  {
    "text": "Charlie could try to maybe try to",
    "start": "82880",
    "end": "85040"
  },
  {
    "text": "contact Bob and find out what's going on",
    "start": "85040",
    "end": "87439"
  },
  {
    "text": "so you may have other parties that are",
    "start": "87439",
    "end": "89640"
  },
  {
    "text": "trying trying to organize things during",
    "start": "89640",
    "end": "91360"
  },
  {
    "text": "the day we've got D for Danny here and",
    "start": "91360",
    "end": "94399"
  },
  {
    "text": "Danny may be saying hey can you come to",
    "start": "94399",
    "end": "96119"
  },
  {
    "text": "a meeting at 2 but Charlie doesn't know",
    "start": "96119",
    "end": "98880"
  },
  {
    "text": "because Charlie's basically blocked",
    "start": "98880",
    "end": "100640"
  },
  {
    "text": "until he finds out for sure what's going",
    "start": "100640",
    "end": "102680"
  },
  {
    "text": "on with",
    "start": "102680",
    "end": "104360"
  },
  {
    "text": "Alice and the same is true for computer",
    "start": "104360",
    "end": "107200"
  },
  {
    "text": "systems if you've got a bank Alice has",
    "start": "107200",
    "end": "109399"
  },
  {
    "text": "£100 and Bob has £50 you have this",
    "start": "109399",
    "end": "112360"
  },
  {
    "text": "database you replicate it across three",
    "start": "112360",
    "end": "114840"
  },
  {
    "text": "different machines then you have some",
    "start": "114840",
    "end": "117200"
  },
  {
    "text": "clients so these might be an ATM might",
    "start": "117200",
    "end": "119680"
  },
  {
    "text": "be a website for online banking you",
    "start": "119680",
    "end": "122600"
  },
  {
    "text": "might have a online bookstore and then",
    "start": "122600",
    "end": "124960"
  },
  {
    "text": "you might have a shop in a restaurant",
    "start": "124960",
    "end": "127000"
  },
  {
    "text": "and these clients will put in requests",
    "start": "127000",
    "end": "129640"
  },
  {
    "text": "and say things like how much money does",
    "start": "129640",
    "end": "131920"
  },
  {
    "text": "Alice have so this machine could respond",
    "start": "131920",
    "end": "134280"
  },
  {
    "text": "and say Alice has 100 but during this",
    "start": "134280",
    "end": "137800"
  },
  {
    "text": "time another guy could say Alice wants",
    "start": "137800",
    "end": "140599"
  },
  {
    "text": "to spend £50 we could change it value",
    "start": "140599",
    "end": "143200"
  },
  {
    "text": "here and reduce it to 50 and respond but",
    "start": "143200",
    "end": "146440"
  },
  {
    "text": "it would then be inconsistent with the",
    "start": "146440",
    "end": "148680"
  },
  {
    "text": "value here so these three machines need",
    "start": "148680",
    "end": "152120"
  },
  {
    "text": "to communicate in the same way that",
    "start": "152120",
    "end": "154560"
  },
  {
    "text": "Alice Bob and Charlie did to reach",
    "start": "154560",
    "end": "156599"
  },
  {
    "text": "agreement about how much money Alice has",
    "start": "156599",
    "end": "159319"
  },
  {
    "text": "in her bank account so we can look at",
    "start": "159319",
    "end": "163040"
  },
  {
    "text": "Alice requesting to take out 50 out of",
    "start": "163040",
    "end": "166599"
  },
  {
    "text": "an ATM in the same way that we uh did",
    "start": "166599",
    "end": "169640"
  },
  {
    "text": "this coffee example between Alice Bob",
    "start": "169640",
    "end": "171720"
  },
  {
    "text": "and Charlie so the machine contacts the",
    "start": "171720",
    "end": "174840"
  },
  {
    "text": "other machines and says how much money",
    "start": "174840",
    "end": "177239"
  },
  {
    "text": "does Alice have these guys respond",
    "start": "177239",
    "end": "180720"
  },
  {
    "text": "let's assume that's back at 100 again",
    "start": "180720",
    "end": "182680"
  },
  {
    "text": "and once this machine has got the",
    "start": "182680",
    "end": "184000"
  },
  {
    "text": "responses can say okay thank you and",
    "start": "184000",
    "end": "187360"
  },
  {
    "text": "return the back importantly these",
    "start": "187360",
    "end": "190440"
  },
  {
    "text": "machines say yes that would be okay but",
    "start": "190440",
    "end": "193319"
  },
  {
    "text": "they don't actually take the money out",
    "start": "193319",
    "end": "195159"
  },
  {
    "text": "of the account at that point in the same",
    "start": "195159",
    "end": "197319"
  },
  {
    "text": "way that when someone says um can you do",
    "start": "197319",
    "end": "199440"
  },
  {
    "text": "coffee at too you don't immediately put",
    "start": "199440",
    "end": "201239"
  },
  {
    "text": "it in your calendar you wait for them to",
    "start": "201239",
    "end": "202879"
  },
  {
    "text": "confirm before you do that so then this",
    "start": "202879",
    "end": "205239"
  },
  {
    "text": "machine once it sees that the other",
    "start": "205239",
    "end": "207080"
  },
  {
    "text": "machines are all happy to put this",
    "start": "207080",
    "end": "208480"
  },
  {
    "text": "request through we respond and say okay",
    "start": "208480",
    "end": "211680"
  },
  {
    "text": "put that through all of the machines",
    "start": "211680",
    "end": "214439"
  },
  {
    "text": "will reduce the money down to 50 and",
    "start": "214439",
    "end": "217959"
  },
  {
    "text": "respond to the cash machine to say that",
    "start": "217959",
    "end": "220200"
  },
  {
    "text": "Alice has enough credit to get the money",
    "start": "220200",
    "end": "222360"
  },
  {
    "text": "out of the machine this protocol is",
    "start": "222360",
    "end": "224239"
  },
  {
    "text": "called two-phase commit and um it's a",
    "start": "224239",
    "end": "228120"
  },
  {
    "text": "good starting point for a lot of",
    "start": "228120",
    "end": "229400"
  },
  {
    "text": "consensus algorithms it requires each",
    "start": "229400",
    "end": "232720"
  },
  {
    "text": "note to ask another node and come back",
    "start": "232720",
    "end": "235840"
  },
  {
    "text": "so the time it takes to speak to a node",
    "start": "235840",
    "end": "238000"
  },
  {
    "text": "and come back is known as the round trip",
    "start": "238000",
    "end": "239760"
  },
  {
    "text": "R time or rtt because it's a two-phase",
    "start": "239760",
    "end": "242760"
  },
  {
    "text": "commit there's two phases of it it takes",
    "start": "242760",
    "end": "245400"
  },
  {
    "text": "two",
    "start": "245400",
    "end": "246959"
  },
  {
    "text": "rtts to reach consensus in this",
    "start": "246959",
    "end": "249680"
  },
  {
    "text": "situation there are however problems",
    "start": "249680",
    "end": "251480"
  },
  {
    "text": "with it because failures can still occur",
    "start": "251480",
    "end": "254079"
  },
  {
    "text": "for example the node that was doing the",
    "start": "254079",
    "end": "256040"
  },
  {
    "text": "coordination here might fail and it",
    "start": "256040",
    "end": "258519"
  },
  {
    "text": "might not be clear whether these other",
    "start": "258519",
    "end": "261680"
  },
  {
    "text": "guys should take the £50 out or not",
    "start": "261680",
    "end": "265000"
  },
  {
    "text": "that's the worst scenario where Alice",
    "start": "265000",
    "end": "266759"
  },
  {
    "text": "asks the cash machine for 50 Quid the",
    "start": "266759",
    "end": "268800"
  },
  {
    "text": "cash machine says Services down you",
    "start": "268800",
    "end": "270639"
  },
  {
    "text": "can't have your 50 Quid but the 50 Quid",
    "start": "270639",
    "end": "272720"
  },
  {
    "text": "goes out of her bank account anyway uh",
    "start": "272720",
    "end": "274960"
  },
  {
    "text": "what we can do instead is use free Phase",
    "start": "274960",
    "end": "277880"
  },
  {
    "text": "commit so this adds an extra step to the",
    "start": "277880",
    "end": "280160"
  },
  {
    "text": "two-phase commit so here the client",
    "start": "280160",
    "end": "283199"
  },
  {
    "text": "comes and says can we deduct 50 from",
    "start": "283199",
    "end": "286360"
  },
  {
    "text": "Alice's bank account the server asks the",
    "start": "286360",
    "end": "289080"
  },
  {
    "text": "other two as before they respond to say",
    "start": "289080",
    "end": "292639"
  },
  {
    "text": "Alice has sufficient balance to do so",
    "start": "292639",
    "end": "294800"
  },
  {
    "text": "now we add an extra phase this is called",
    "start": "294800",
    "end": "296880"
  },
  {
    "text": "the prepare phase so this is where once",
    "start": "296880",
    "end": "299800"
  },
  {
    "text": "server tells the others okay we're ready",
    "start": "299800",
    "end": "302080"
  },
  {
    "text": "to do this but don't do it just yet",
    "start": "302080",
    "end": "303840"
  },
  {
    "text": "these guys say okay we'll wait to hear",
    "start": "303840",
    "end": "305680"
  },
  {
    "text": "some more for you and then once uh the",
    "start": "305680",
    "end": "308160"
  },
  {
    "text": "server hears from everybody it responds",
    "start": "308160",
    "end": "310560"
  },
  {
    "text": "and tells everybody hey guys you can now",
    "start": "310560",
    "end": "314680"
  },
  {
    "text": "decrement Alice's money 50 this extra",
    "start": "314680",
    "end": "318440"
  },
  {
    "text": "stage is important because if the server",
    "start": "318440",
    "end": "321039"
  },
  {
    "text": "who was doing the coordination was to",
    "start": "321039",
    "end": "322639"
  },
  {
    "text": "fail these guys know that consensus was",
    "start": "322639",
    "end": "325759"
  },
  {
    "text": "already reached so they just have a",
    "start": "325759",
    "end": "327560"
  },
  {
    "text": "timer and if they don't hear from server",
    "start": "327560",
    "end": "330039"
  },
  {
    "text": "who was coordinating the transaction at",
    "start": "330039",
    "end": "331720"
  },
  {
    "text": "the time they can then apply the",
    "start": "331720",
    "end": "333400"
  },
  {
    "text": "transaction knowing that it was s that",
    "start": "333400",
    "end": "335680"
  },
  {
    "text": "it safely went through this does have",
    "start": "335680",
    "end": "337960"
  },
  {
    "text": "problems however for example um before",
    "start": "337960",
    "end": "340360"
  },
  {
    "text": "we talked about how two- faase commit",
    "start": "340360",
    "end": "342560"
  },
  {
    "text": "was 2times the rtt well this protocol",
    "start": "342560",
    "end": "346120"
  },
  {
    "text": "now has three phases so it now takes",
    "start": "346120",
    "end": "348360"
  },
  {
    "text": "three times the rtt to reach consensus",
    "start": "348360",
    "end": "352280"
  },
  {
    "text": "and there's some more problems too here",
    "start": "352280",
    "end": "353960"
  },
  {
    "text": "we're assuming that the network is",
    "start": "353960",
    "end": "355600"
  },
  {
    "text": "reliable and that all these messages get",
    "start": "355600",
    "end": "357800"
  },
  {
    "text": "through but in practice this network",
    "start": "357800",
    "end": "359759"
  },
  {
    "text": "might not be reliable there might be",
    "start": "359759",
    "end": "362080"
  },
  {
    "text": "different kinds of partitions and the",
    "start": "362080",
    "end": "364000"
  },
  {
    "text": "nose could actually fail one of the ways",
    "start": "364000",
    "end": "366680"
  },
  {
    "text": "that we deal with this is we work with",
    "start": "366680",
    "end": "369240"
  },
  {
    "text": "what's called majorities and minorities",
    "start": "369240",
    "end": "371759"
  },
  {
    "text": "so if you have five nodes you do not",
    "start": "371759",
    "end": "374440"
  },
  {
    "text": "need to involve every node in every",
    "start": "374440",
    "end": "376759"
  },
  {
    "text": "transaction the whole reason why we need",
    "start": "376759",
    "end": "378840"
  },
  {
    "text": "multiple machines in the first place is",
    "start": "378840",
    "end": "380599"
  },
  {
    "text": "because you've got tons of traffic being",
    "start": "380599",
    "end": "382360"
  },
  {
    "text": "thrown at these distributed systems like",
    "start": "382360",
    "end": "385000"
  },
  {
    "text": "a web server if there wasn't much",
    "start": "385000",
    "end": "386919"
  },
  {
    "text": "traffic we could just have one machine",
    "start": "386919",
    "end": "388680"
  },
  {
    "text": "and this wouldn't be so much of a",
    "start": "388680",
    "end": "390080"
  },
  {
    "text": "problem because you're going to want to",
    "start": "390080",
    "end": "392720"
  },
  {
    "text": "have all this traffic you don't want",
    "start": "392720",
    "end": "394400"
  },
  {
    "text": "every single machine to be involved in",
    "start": "394400",
    "end": "396520"
  },
  {
    "text": "every single request because you've not",
    "start": "396520",
    "end": "398520"
  },
  {
    "text": "made your situation actually any better",
    "start": "398520",
    "end": "401000"
  },
  {
    "text": "so what we do instead is say that a",
    "start": "401000",
    "end": "403199"
  },
  {
    "text": "majority of nodes must agree before you",
    "start": "403199",
    "end": "406840"
  },
  {
    "text": "go ahead with a request if you always",
    "start": "406840",
    "end": "408720"
  },
  {
    "text": "work with a majority you get an",
    "start": "408720",
    "end": "410080"
  },
  {
    "text": "interesting thing which is called the",
    "start": "410080",
    "end": "411319"
  },
  {
    "text": "majority intersection property majority",
    "start": "411319",
    "end": "413919"
  },
  {
    "text": "intersection property means that if you",
    "start": "413919",
    "end": "415960"
  },
  {
    "text": "pick any two majorities there will",
    "start": "415960",
    "end": "417960"
  },
  {
    "text": "always be an overlap of at least one one",
    "start": "417960",
    "end": "419759"
  },
  {
    "text": "node so we have five nodes here if you",
    "start": "419759",
    "end": "423039"
  },
  {
    "text": "pick three of them which is a majority",
    "start": "423039",
    "end": "425599"
  },
  {
    "text": "you can't make a set of three again",
    "start": "425599",
    "end": "427800"
  },
  {
    "text": "without including at least one node from",
    "start": "427800",
    "end": "429720"
  },
  {
    "text": "the previous set so this means if a",
    "start": "429720",
    "end": "432199"
  },
  {
    "text": "group of three of these nodes decided",
    "start": "432199",
    "end": "434319"
  },
  {
    "text": "that Alice took £50 out and then you try",
    "start": "434319",
    "end": "437319"
  },
  {
    "text": "to take another £70 out of the bank",
    "start": "437319",
    "end": "440440"
  },
  {
    "text": "account at least one of the nodes that",
    "start": "440440",
    "end": "443080"
  },
  {
    "text": "would be involved in the process must",
    "start": "443080",
    "end": "445360"
  },
  {
    "text": "have seen that Alice has already taken",
    "start": "445360",
    "end": "447560"
  },
  {
    "text": "out 50 this is really useful because it",
    "start": "447560",
    "end": "449879"
  },
  {
    "text": "reduces the load on the servers it means",
    "start": "449879",
    "end": "452120"
  },
  {
    "text": "you now need almost half as many servers",
    "start": "452120",
    "end": "454639"
  },
  {
    "text": "when you're processing any one",
    "start": "454639",
    "end": "456280"
  },
  {
    "text": "transaction it also means that if any",
    "start": "456280",
    "end": "459720"
  },
  {
    "text": "minority of servers were to fail you can",
    "start": "459720",
    "end": "462080"
  },
  {
    "text": "carry on as you were before and it also",
    "start": "462080",
    "end": "464039"
  },
  {
    "text": "means if you have a partition which",
    "start": "464039",
    "end": "466840"
  },
  {
    "text": "isolates a few of the nodes you can",
    "start": "466840",
    "end": "469440"
  },
  {
    "text": "carry on as you were before even though",
    "start": "469440",
    "end": "472000"
  },
  {
    "text": "you have this partition interfering with",
    "start": "472000",
    "end": "476479"
  },
  {
    "text": "things so a lot of the protocol that we",
    "start": "477319",
    "end": "479879"
  },
  {
    "text": "use nowadays are based on a protocol",
    "start": "479879",
    "end": "481720"
  },
  {
    "text": "called paxos paxos was invented by a",
    "start": "481720",
    "end": "485280"
  },
  {
    "text": "famous computer scientist called Leslie",
    "start": "485280",
    "end": "486879"
  },
  {
    "text": "Lamport who won the touring award last",
    "start": "486879",
    "end": "489800"
  },
  {
    "text": "year",
    "start": "489800",
    "end": "492039"
  }
]